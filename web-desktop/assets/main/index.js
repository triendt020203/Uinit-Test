window.__require=function e(t,o,n){function r(i,s){if(!o[i]){if(!t[i]){var c=i.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+i+"'")}i=c}var l=o[i]={exports:{}};t[i][0].call(l.exports,function(e){return r(t[i][1][e]||e)},l,l.exports,e,t,o,n)}return o[i].exports}for(var a="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({AbstractHandler:[function(e,t,o){"use strict";cc._RF.push(t,"63617pfNp9DKKHI19MujHJh","AbstractHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){this.game=null,this.game=e}return e.prototype.execute=function(){},Object.defineProperty(e.prototype,"playerManager",{get:function(){return this.game.playerManager},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.game.screen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"room",{get:function(){return this.game.room},enumerable:!1,configurable:!0}),e}();o.default=n,cc._RF.pop()},{}],ActionButtons:[function(e,t,o){"use strict";cc._RF.push(t,"9392ataJzFJF6vBfRO1S+tb","ActionButtons");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../SocketControl"),s=e("../../util/CardUtil"),c=cc._decorator,u=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.drawButton=null,t.khaengButton=null,t.blockButton=null,t.dumpButton=null,t}return r(t,e),t.prototype.init=function(e){this.gameScene=e},t.prototype.start=function(){},t.prototype.onDump=function(){var e=this.gameScene.seatManager.my.cardControl.getChooseCards();if(console.log(e),e.length>0){if(e.length>1&&!s.default.isSameRankCardGroup(e))return;i.default.instance.sendDumpCardRequest(e),this.hide()}},t.prototype.onBlock=function(){var e=this.gameScene.seatManager.my.cardControl.getChooseCards();if(e.length>0){if(e.push(this.gameScene.game.lastDumpCard),!s.default.isSameRankCardGroup(e))return;i.default.instance.sendFollowCardRequest(this.gameScene.seatManager.my.cardControl.getChooseCards()),this.hide()}},t.prototype.onKhaeng=function(){i.default.instance.sendKhaengRequest()&&this.hide()},t.prototype.onDraw=function(){i.default.instance.sendDrawRequest()&&this.hide()},t.prototype.centerDraw=function(){this.showKhaeng(),this.showDraw()},t.prototype.centerBlock=function(){this.showKhaeng(),this.showDraw(),this.showBlock()},t.prototype.showButtonWithEffect=function(e){e.setScale(.5),cc.tween(e).to(.5,{scale:.9},{easing:"backOut"}).start()},t.prototype.showDraw=function(){},t.prototype.hideDraw=function(){},t.prototype.showKhaeng=function(){},t.prototype.hideKhaeng=function(){},t.prototype.showBlock=function(){},t.prototype.hideBlock=function(){},t.prototype.showDump=function(){this.dumpButton.node.active=!0,this.showButtonWithEffect(this.dumpButton.node)},t.prototype.hideDump=function(){this.dumpButton.node.active=!1},t.prototype.hide=function(){this.hideBlock(),this.hideDraw(),this.hideKhaeng(),this.hideDump()},a([l(cc.Button)],t.prototype,"drawButton",void 0),a([l(cc.Button)],t.prototype,"khaengButton",void 0),a([l(cc.Button)],t.prototype,"blockButton",void 0),a([l(cc.Button)],t.prototype,"dumpButton",void 0),a([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../SocketControl":"SocketControl","../../util/CardUtil":"CardUtil"}],AdapterManager:[function(e,t,o){"use strict";cc._RF.push(t,"062eeFliN9P04EQOYOMKrFT","AdapterManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.AdaptaterType=void 0;var n,r=function(){function e(){}return Object.defineProperty(e,"inst",{get:function(){return null==this._instance&&(this._instance=new e,this._instance.visibleSize=cc.winSize,this._instance.ratio=cc.winSize.height/cc.winSize.width),this._instance},enumerable:!1,configurable:!0}),e.prototype.autoFitCanvas=function(e){var t=this.ratio;t>640/1136&&(t<=.65?this.adapatByType(n.FIT_WIDTH,e):this.adapatByType(n.FIT_ALL,e))},e.prototype.adapatByType=function(e,t){var o=t.getComponent(cc.Canvas);switch(e){case n.FIT_WIDTH:o.fitWidth=!0,o.fitHeight=!1;break;case n.FIT_HEIGHT:o.fitWidth=!1,o.fitHeight=!0;break;case n.FIT_ALL:o.fitWidth=!0,o.fitHeight=!0;break;case n.SHOW_ALL:o.fitWidth=!1,o.fitHeight=!1}},e.prototype.updateAllNodeWidget=function(e){var t=e.getComponent(cc.Widget);t&&t.updateAlignment();for(var o=0,n=e.getComponentsInChildren(cc.Widget);o<n.length;o++)n[o].updateAlignment()},e.prototype.removeWidget=function(e){e.getComponent(cc.Widget)&&e.removeComponent(cc.Widget)},e._instance=null,e}();o.default=r,function(e){e[e.FIT_WIDTH=0]="FIT_WIDTH",e[e.FIT_HEIGHT=1]="FIT_HEIGHT",e[e.FIT_ALL=2]="FIT_ALL",e[e.SHOW_ALL=3]="SHOW_ALL"}(n=o.AdaptaterType||(o.AdaptaterType={})),cc._RF.pop()},{}],AdsPopup:[function(e,t,o){"use strict";cc._RF.push(t,"49c36gBjstGZoannh9C3bF9","AdsPopup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t.wrapper=null,t.watchCounter=0,t.watchButton=null,t}return r(t,e),t.prototype.start=function(){this.wrapper=this.node.getChildByName("rw_popup_bg"),this.watchButton=this.wrapper.getChildByName("vid_watch_button"),this.watchButton.getComponent(cc.Button).node.once("click",this.onWatchClick,this),"th"==i.cyberGame.lang.code&&(this.wrapper.getChildByName("title").y=this.wrapper.getChildByName("title").y+15),this.watchCounter=i.cyberGame.ad.watchCounter,this.watchCounter>i.cyberGame.ad.MAX_VIDEOS&&(this.watchCounter=i.cyberGame.ad.MAX_VIDEOS);var e=this.watchCounter<5?0:this.watchCounter-4;this.watchCounter==i.cyberGame.ad.MAX_VIDEOS&&(e=this.watchCounter-5);for(var t=0;t<5;){var o=e<5?i.cyberGame.ad.REWARD_ARRAY[e]:i.cyberGame.ad.REWARD_ARRAY[4];this.wrapper.getChildByName("coin"+(t+1)).getComponent(cc.Label).string=i.cyberGame.utils.formatCoinWithCommas(o),e<=this.watchCounter-1&&(this.wrapper.getChildByName("box"+(t+1)).getChildByName("completeIcon").active=!0),this.wrapper.getChildByName("txt"+(t+1)).getComponent(cc.Label).string=e+1+"",t++,e++}this.updateAdsLeftCounter(),i.cyberGame.ad.ready?this.disableButtonOverlay():this.enableButtonOverlay()},t.prototype.onEnable=function(){cc.game.emit(i.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!0);var e=this.node.getChildByName("rw_popup_bg");e.setScale(.8),cc.tween(e).to(.8,{scale:1},{easing:"elasticOut"}).start()},t.prototype.onDisable=function(){cc.game.emit(i.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!1)},t.prototype.onWatchClick=function(){i.cyberGame.ad.ready?(this.watchCounter<i.cyberGame.ad.MAX_VIDEOS?i.cyberGame.ad.show(i.cyberGame.ad.REWARDED_POPUP_POSITION):i.cyberGame.openCommonPopup({content:i.cyberGame.text("DAILY_ADS_REACHED")}),this.node.destroy()):(this.node.destroy(),i.cyberGame.openCommonPopup({content:i.cyberGame.text("ADS_NOT_AVAILABLE")}))},t.prototype.updateAdsLeftCounter=function(){this.wrapper.getChildByName("adsLeft").getComponent(cc.Label).string=i.cyberGame.ad.MAX_VIDEOS-this.watchCounter+""},t.prototype.enableButtonOverlay=function(){this.watchButton.getChildByName("vid_watch_button_overlay").active=!0},t.prototype.disableButtonOverlay=function(){this.watchButton.getChildByName("vid_watch_button_overlay").active=!1},t.prototype.closePopup=function(){i.cyberGame.audio.playButton(),this.node.destroy()},a([u(cc.Label)],t.prototype,"label",void 0),a([u],t.prototype,"text",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../CyberGame":"CyberGame"}],Ad:[function(e,t,o){"use strict";cc._RF.push(t,"903d60dMZdLVZanAFWXYwaD","Ad"),Object.defineProperty(o,"__esModule",{value:!0}),o.adController=void 0;var n=e("../constants/CyberEvent"),r=e("../CyberGame");(function(e){e.REWARDED_POPUP_POSITION=1,e.IAP_POSITION=2,e.OUT_OFF_MONEY_POSITION=3,e.SPIN_POSITION=4,e.MAX_VIDEOS=10,e.REWARD_ARRAY=[5e4,1e5,2e5,3e5,5e5],e.watchCounter=0,e.spinCounter=0,e.ready=!1;var t,o,a,i=[],s=!1,c=!1,u=null,l=1;function p(t){FBInstant.player.getDataAsync(["currentDate","watchCounter","spinCounter"]).then(function(o){var n=new Date;u=new Date(n.getTime()-6e4*n.getTimezoneOffset()).toISOString().split("T")[0],o.watchCounter&&(e.watchCounter=parseInt(o.watchCounter)),o.spinCounter!=u&&(e.spinCounter=parseInt(o.spinCounter)),o.currentDate!==u&&(e.watchCounter=0,e.spinCounter=0),FBInstant.player.setDataAsync({currentDate:u,watchCounter:e.watchCounter,spinCounter:e.spinCounter}),t()}).catch(function(e){console.log(e),setTimeout(function(){p(t)},5e3)})}function d(){e.ready||h(!0)}function h(t){e.ready=t,cc.game.emit(n.default.AdsEvent.READY,e.ready)}function y(e){i.length>1&&(e.id==a.id?o.preload():e.id==o.id&&t.preload())}function f(t){if(h(!1),l==e.REWARDED_POPUP_POSITION){e.watchCounter++,FBInstant.player.setDataAsync({watchCounter:e.watchCounter});var o=e.watchCounter<=5?e.REWARD_ARRAY[e.watchCounter-1]:e.REWARD_ARRAY[4];cc.game.emit(n.default.AdsEvent.REWARD,{id:t,type:l,coin:o})}else l==e.SPIN_POSITION&&cc.game.emit(n.default.AdsEvent.REWARD,{id:t,type:l});c&&setTimeout(function(){cc.game.emit(n.default.AdsEvent.ON_LOAD,"fakeid")},3e3),r.cyberGame.audio.resumeMusic()}e.init=function(e,r){if(!s){for(var u=0;u<e.length;u++){var l=new m(e[u],0==u);i.push(l)}t=i[0],o=i[1],a=i[2],cc.game.on(n.default.AdsEvent.ON_SHOW,f,this),cc.game.on(n.default.AdsEvent.ON_LOAD,d,this),cc.game.on(n.default.AdsEvent.ON_LOAD_ERROR,y,this),(c=r)||-1==FBInstant.getSupportedAPIs().indexOf("getRewardedVideoAsync")?p(function(){setTimeout(function(){cc.game.emit(n.default.AdsEvent.ON_LOAD,"fakeid")},5e3)}):p(function(){i.length>1?a.blocked?o.blocked?t.preload():o.preload():a.preload():t.preload()}),s=!0}},e.show=function(t){if(e.ready)if(l=t,c){var o=null;cc.resources.load("dev/FakeAdVideo",cc.Prefab,function(e,t){e||(o=cc.instantiate(t),cc.director.getScene().addChild(o),r.cyberGame.audio.pauseMusic(),setTimeout(function(){null!=o&&o.destroy(),cc.game.emit(n.default.AdsEvent.ON_SHOW,"fakeid")},5e3))})}else for(var a=0;a<i.length;a++)if(i[a].loaded){r.cyberGame.audio.pauseMusic(),i[a].show();break}},e.increaseSpinCounter=function(){e.spinCounter++,FBInstant.player.setDataAsync({spinCounter:e.spinCounter})};var m=function(){function e(e,t){this.id=e,this.isAnyPrice=t,this.blocked=!1,this.loaded=!1,this.adInstance=null}return e.prototype.preload=function(){var e=this;null!==this.adInstance?this.adInstance.loadAsync().then(function(){e.handleLoadSuccess()}).catch(function(){e.handleLoadError(2)}):FBInstant.getRewardedVideoAsync(this.id).then(function(t){return e.adInstance=t,e.adInstance.loadAsync()}).then(function(){e.handleLoadSuccess()}).catch(function(){e.handleLoadError(2)})},e.prototype.handleLoadSuccess=function(){this.loaded=!0,cc.game.emit(n.default.AdsEvent.ON_LOAD,this.id)},e.prototype.handleLoadError=function(e){var t=this;this.isAnyPrice?setTimeout(function(){null!=t.adInstance&&t.handleAdsNoFill(e)},3e4):this.blocked=!0,cc.game.emit(n.default.AdsEvent.ON_LOAD_ERROR,this)},e.prototype.handleAdsNoFill=function(e){var t=this;e>3?this.blocked=!0:this.adInstance.loadAsync().then(function(){t.handleLoadSuccess()}).catch(function(o){console.log(o),t.handleLoadError(e+1)})},e.prototype.show=function(){var e=this;this.adInstance.showAsync().then(function(){e.adInstance=null,e.loaded=!1,cc.game.emit(n.default.AdsEvent.ON_SHOW,e.id),setTimeout(function(){e.preload()},1e3)}).catch(function(){e.adInstance=null,e.loaded=!1,r.cyberGame.audio.resumeMusic(),setTimeout(function(){e.preload()},1e3)})},e}();e.AdEntity=m})(o.adController||(o.adController={})),cc._RF.pop()},{"../CyberGame":"CyberGame","../constants/CyberEvent":"CyberEvent"}],Audio:[function(e,t,o){"use strict";cc._RF.push(t,"6a23fn6ibhIi62I+TdsI7vb","Audio"),Object.defineProperty(o,"__esModule",{value:!0});var n,r=e("../CyberGame");(function(e){e.soundEnabled=!0,e.musicEnabled=!1;var t=new Map,o=null,n=!1;function a(){e.musicEnabled&&o&&(cc.audioEngine.playMusic(o,!0),cc.audioEngine.setMusicVolume(.5),"game"==r.cyberGame.storage.get("currentScene")&&setTimeout(function(){i()},100))}function i(){e.musicEnabled&&cc.audioEngine.isMusicPlaying()&&cc.audioEngine.pauseMusic()}function s(e,t){cc.resources.preload(t,cc.AudioClip,function(){cc.resources.load(t,cc.AudioClip,function(t,o){t||u(e,o)})})}function c(o){try{e.soundEnabled&&t.has(o)&&cc.audioEngine.playEffect(t.get(o),!1)}catch(n){console.log("playSound error",n)}}function u(e,o){CyberGlobals.gameConfig.debugLoadingProgress&&console.log("audio "+e+" loaded"),t.set(e,o)}e.loadButtonAudio=function(){cc.resources.load("audio/button_game",cc.AudioClip,null,function(e,t){e||u(t.name,t)})},e.loadThenPlayMusic=function(){if(o)a();else{if(n)return;n=!0,cc.resources.load("audio/bg/music",cc.AudioClip,null,function(e,t){e||(o=t,a()),n=!1})}},e.playMusic=a,e.stopMusic=function(){o&&cc.audioEngine.stopMusic()},e.pauseMusic=i,e.resumeMusic=function(){e.musicEnabled&&cc.audioEngine.resumeMusic()},e.preloadGameAudios=function(){s("joinRoom","audio/joinRoom"),s("leaveRoom","audio/LeaveRoom"),s("lose","audio/lost"),s("win","audio/win"),s("coinmove","audio/ChipChamNhau"),s("chiabai","audio/chia_bai"),s("myturn","audio/myturn"),s("lighting","audio/lighting"),s("showmoney","audio/king_addmoney"),s("kwin","audio/king_bi_win"),s("klose","audio/king_bi_lost"),s("opencards","audio/king_hu"),s("kshow","audio/king_result_light"),s("start_game","audio/start_game");for(var e=["water","kiss_flowers","brick","kiss","tomato","Bom","beer1","eggs"],t=0;t<e.length;t++)s("gift"+(t+1),"audio/gift/"+e[t])},e.stopAllEffects=function(){cc.audioEngine.stopAllEffects()},e.playLight=function(){try{e.soundEnabled&&t.has("lighting")&&cc.audioEngine.play(t.get("lighting"),!1,.4)}catch(o){console.log("playSound error",o)}},e.playStartGame=function(){try{e.soundEnabled&&t.has("start_game")&&cc.audioEngine.play(t.get("start_game"),!1,.5)}catch(o){console.log("playSound error",o)}},e.playSound=c,e.playKeangWin=function(){c("kwin")},e.playKeangLose=function(){c("klose")},e.playMoneyEffect=function(){c("showmoney")},e.playJoinRoomSound=function(){c("joinRoom")},e.playLoseSound=function(){c("lose")},e.playWinSound=function(){c("win")},e.playYourTurn=function(){c("denluot")},e.playDiscard=function(){c("danhbai")},e.playButton=function(){c("button_game")}})(n||(n={})),o.default=n,cc._RF.pop()},{"../CyberGame":"CyberGame"}],AutoStartTimerHandler:[function(e,t,o){"use strict";cc._RF.push(t,"3d4c3ll62hFtJagKZByGeCN","AutoStartTimerHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.execute=function(e){try{this.game.inited&&(this.screen.deskLayer.showStartCountDown(e.getInt("delay")),this.game.friendMode&&this.screen.invitePopup&&this.screen.invitePopup.hide())}catch(t){console.log("AutoStartTimerHandler exception",t)}this.game.releaseCurrentQueue()},t}(e("./AbstractHandler").default);o.default=a,cc._RF.pop()},{"./AbstractHandler":"AbstractHandler"}],AvatarBox:[function(e,t,o){"use strict";cc._RF.push(t,"98ae7zn3Y9EVZ43fAifmz0e","AvatarBox");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.avatarName=null,t.coin=null,t.img=null,t.id=0,t}return r(t,e),t.prototype.start=function(){},t.prototype.onBoxClick=function(){cc.game.emit("ON_AVATAR_BOX_CLICK",this.id)},t.prototype.removeActiveBg=function(){this.node.getChildByName("bg_active").active=!1},t.prototype.addActiveBg=function(){this.node.getChildByName("bg_active").active=!0},a([c(cc.Label)],t.prototype,"avatarName",void 0),a([c(cc.Label)],t.prototype,"coin",void 0),a([c(cc.Sprite)],t.prototype,"img",void 0),a([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],AvatarRow:[function(e,t,o){"use strict";cc._RF.push(t,"6d9f51dk4ZDw6wHx+Xc1E4X","AvatarRow");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t}return r(t,e),t.prototype.start=function(){},t.prototype.createAvatarBox=function(){var e=cc.instantiate(this.itemPrefab);return e.parent=this.node,e},a([c(cc.Prefab)],t.prototype,"itemPrefab",void 0),a([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],Avatar:[function(e,t,o){"use strict";cc._RF.push(t,"4bc5e7JOMJJZ5aTYNUcDK1i","Avatar");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultAvatarFrame=null,t}return r(t,e),t.prototype.start=function(){this.defaultAvatarFrame=this.node.getComponent(cc.Sprite).spriteFrame},t.prototype.loadAvatar=function(e){var t=this;"no_avatar"!=e&&cc.assetManager.loadRemote(e,{ext:".jpg"},function(e,o){!e&&cc.isValid(t.node)&&(o.packable=!1,t.node.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o),t.node.setContentSize(102,102))})},t.prototype.show=function(){this.node.active=!0},t.prototype.hide=function(){this.node.active=!1},t.prototype.onDisable=function(){this.defaultAvatarFrame&&(this.node.getComponent(cc.Sprite).spriteFrame=this.defaultAvatarFrame,this.node.setContentSize(102,102))},a([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],CardControl:[function(e,t,o){"use strict";cc._RF.push(t,"00eee+vKvhMdqql6FuIRhvI","CardControl"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./CardSize"),r=e("../../entities/CardEntity"),a=e("../player/PositionHelper"),i=e("../../constants/GameInfo"),s=function(){function e(e){this.cards=[],this.positions=[],this.seat=e,this.point=e.point,this.index=e.index,a.default.createCardPositions(this)}return e.prototype.addCard=function(e){if(this.cards.push(e),this.index>=3&&this.cards.length>1)for(var t=0,o=this.cards.length-1;o>=0;o--)this.cards[o].node.zIndex=t,t++},e.prototype.chooseCards=function(e,t){for(var o=0;o<e.length;o++)for(var n=0;n<this.cards.length;n++)if(this.cards[n].getId()==e[o].id){t&&(this.cards[n].enableCardClick(),this.cards[n].hideOverlay()),this.cards[n].choose();break}},e.prototype.openOppCards=function(e){var t=this;if(0!=e.length)for(var o=function(o){var a=r.cards[o];a.setId(e[o]),a.moveToNewXWithCB(r.index<3?r.positions[0].x:r.positions[5].x,function(){if(o==e.length-1){var r=t.index<3?t.cards[0].node.x+22:t.cards[0].node.x-22,a=t.cards[0].node.y+17;t.cards.length>1&&t.index>2&&(r-=30*(t.cards.length-1)-1);for(var i=0,s=0;s<t.cards.length;s++)t.index>2&&(t.cards[s].node.zIndex=s),t.cards[s].setCardPositon({x:r,y:a,angle:0,scale:n.CardSize.ENDGAME_SCALE}),t.cards[s].simpleOpen(),t.cards[s].openCardToPosition().then(function(){++i==t.cards.length&&cc.game.emit("ON_OPEN_CARD_FINISH")}),r+=30;t.point.y=a,t.index<3?t.point.x=r+n.CardSize.TABLE_WIDTH/2+10:(t.point.x=t.cards[0].node.x-t.point.getContentSize().width-10,t.cards.length>1&&(t.point.x=t.point.x-30*(t.cards.length-1))),t.seat.showOppPoint(t.doGetPoint(e))}})},r=this,a=0;a<e.length;a++)o(a)},e.prototype.openCards=function(){var e=this;if(0!=this.cards.length){if(1==this.cards.length)return this.cards[0].hideOverlay(),void cc.game.emit("ON_OPEN_CARD_FINISH");for(var t=0,o=0;o<this.cards.length;o++){var n=this.cards[o];0!=o&&n.moveToNewXWithCB(this.positions[0].x,function(){if(++t==e.cards.length-1){e.cards[0].hideOverlay();for(var o=0,n=1;n<e.cards.length;n++)e.cards[n].hideOverlay(),e.cards[n].setNewX(e.positions[n].x),e.cards[n].openCardToPosition().then(function(){++o==e.cards.length-1&&cc.game.emit("ON_OPEN_CARD_FINISH")})}})}}},e.prototype.dumpCardsBackUp=function(e){var t=this.removeCards(e),o=0,r=n.CardSize.TABLE_WIDTH;t.length>1&&(o=-(r+25*(t.length-1))/2+r/2);for(var a=0;a<t.length;a++)t[a].setCardPositon({x:o,y:130,angle:0,scale:n.CardSize.TABLE_SCALE}),t[a].moveToTable(),o+=25;for(this.lastDumpCards=t,a=0;a<this.positions.length;a++)this.positions[a].isUsed=!1;this.refreshPositions(this.size())},e.prototype.dumpCards=function(e){var t=this.removeCards(e),o=0,r=n.CardSize.TABLE_WIDTH;t.length>1&&(o=-(r+25*(t.length-1))/2+r/2);for(var i=a.default.getDumpPosition(this.index,e.length),s=0;s<t.length;s++)t[s].node.zIndex=s,t[s].setCardPositon({x:o+i[s].x,y:130+i[s].y,angle:i[s].a,scale:n.CardSize.TABLE_SCALE}),t[s].moveToTable(),o+=25;for(this.lastDumpCards=t,s=0;s<this.positions.length;s++)this.positions[s].isUsed=!1;this.refreshPositions(this.size())},e.prototype.simpleDump=function(e){var t=0,o=n.CardSize.TABLE_WIDTH;e.length>1&&(t=-(o+25*(e.length-1))/2+o/2);for(var r=a.default.getDumpPosition(this.index,e.length),i=0;i<e.length;i++){var s=e[i];s.node.zIndex=i,s.setCardPositon({x:t+r[i].x,y:130+r[i].y,angle:r[i].a,scale:n.CardSize.TABLE_SCALE}),s.open(),s.node.active=!0,t+=25}this.lastDumpCards=e},e.prototype.dumpOppCards=function(e){var t=this.removeCards(e),o=a.default.getDumpPosition(this.index,e.length),r=o.x,i=o.y;t.length>1&&this.index>2&&(r-=30*(t.length-1));for(var s=0;s<t.length;s++)t[s].node.zIndex=s,t[s].setCardPositon({x:r+o.angles[s].x,y:i+o.angles[s].y,angle:o.angles[s].a,scale:n.CardSize.TABLE_SCALE}),t[s].moveOppCardToTable(),r+=30;this.lastDumpCards=t},e.prototype.simpleDumpOpp=function(e){var t=a.default.getDumpPosition(this.index,e.length),o=t.x,r=t.y;e.length>1&&this.index>2&&(o-=30*(e.length-1));for(var i=0;i<e.length;i++){var s=e[i];s.node.zIndex=i,s.setCardPositon({x:o+t.angles[i].x,y:r+t.angles[i].y,angle:t.angles[i].a,scale:n.CardSize.TABLE_SCALE}),s.open(),s.node.active=!0,o+=30}this.lastDumpCards=e},e.prototype.removeLastDumpCards=function(){if(null!=this.lastDumpCards&&this.lastDumpCards.length>0)for(var e=0;e<this.lastDumpCards.length;e++)this.lastDumpCards[e].hide()},e.prototype.refreshPositions=function(e){for(var t=n.CardSize.PLAYER_WIDTH,o=Math.floor(t/2),r=-(t+(e-1)*o)/2+t/2,a=0;a<e;a++)this.positions[a].x=r,a<this.size()&&(this.cards[a].moveToNewX(this.positions[a].x),this.positions[a].isUsed=!0),a<e-1&&(r+=o);this.seat.moveMyPointTo(r)},e.prototype.sortCards=function(e){for(var t=this,o=0;o<this.positions.length;o++)this.positions[o].isUsed=!1;var n=0;for(o=0;o<this.cards.length;o++){var r=this.getPointStart(),a=this.cards[o];a.moveToNewX(r.x,function(){e&&++n==t.cards.length&&cc.game.emit("SORT_CARDS_FINISH")}),a.node.zIndex=o}},e.prototype.getPointStart=function(){if(this.index<3){for(var e=0;e<this.positions.length;e++)if(0==(t=this.positions[e]).isUsed)return t.isUsed=!0,t}else for(e=this.positions.length-1;e>=0;e--){var t;if(0==(t=this.positions[e]).isUsed)return t.isUsed=!0,t}},e.prototype.getChooseCards=function(){for(var e=[],t=0;t<this.cards.length;t++)this.cards[t].isChoose()&&e.push(this.cards[t].getId());return e},e.prototype.getMaxZIndex=function(){for(var e=0,t=0;t<this.cards.length;t++)e<this.cards[t].node.zIndex&&(e=this.cards[t].node.zIndex);return e},e.prototype.enableClick=function(){for(var e=0;e<this.cards.length;e++)this.cards[e].enableCardClick()},e.prototype.disableClick=function(){for(var e=0;e<this.cards.length;e++)this.cards[e].disableCardClick()},e.prototype.addOverlay=function(e){for(var t=0;t<this.cards.length;t++){if(e){for(var o=!1,n=0;n<e.length;n++)if(this.cards[t].getId()==e[n].id){o=!0;break}if(o)continue}this.cards[t].addOverlay()}},e.prototype.unChoose=function(){for(var e=0;e<this.cards.length;e++)this.cards[e].isChoose()&&this.cards[e].unChoose()},e.prototype.hideOverlay=function(){for(var e=0;e<this.cards.length;e++)this.cards[e].hideOverlay()},e.prototype.size=function(){return this.cards.length},e.prototype.reset=function(){this.cards.forEach(function(e){e.resetCard()}),this.cards.length=0,this.lastDumpCards=null;for(var e=0;e<this.positions.length;e++)this.positions[e].isUsed=!1;if(0==this.index){var t=n.CardSize.PLAYER_WIDTH,o=Math.floor(t/2)-5,r=-(t+(i.GameInfo.TOTAL_CARDS_FOR_EACH_PLAYER-1)*o)/2+t/2;for(e=0;e<i.GameInfo.TOTAL_CARDS_FOR_EACH_PLAYER;e++)this.positions[e].x=r,r+=o}},e.prototype.updateCardIds=function(e){for(var t=0;t<e.length;t++)for(var o=0;o<this.cards.length;o++)if(-1==this.cards[o].getId()){this.cards[o].setId(e[t]);break}return this.cards},e.prototype.doGetPointFromCards=function(){for(var e=0,t=0;t<this.cards.length;t++)e+=r.default.getInstance(this.cards[t].getId()).point;return e},e.prototype.doGetPoint=function(e){for(var t=0,o=0;o<e.length;o++)t+=r.default.getInstance(e[o]).point;return t},e.prototype.removeCards=function(e){for(var t=[],o=0;o<e.length;o++)if(0==this.index){for(var n=0;n<this.cards.length;n++)if(this.cards[n].getId()==e[o]){var r;(r=this.cards[n]).disableCardClick(),t.push(r),this.cards.splice(n,1);break}}else(r=this.cards.pop()).setId(e[o]),t.push(r),this.index<3?this.positions[this.cards.length].isUsed=!1:this.positions[i.GameInfo.TOTAL_CARDS_FOR_EACH_PLAYER-1-this.cards.length].isUsed=!1;return t},e}();o.default=s,cc._RF.pop()},{"../../constants/GameInfo":"GameInfo","../../entities/CardEntity":"CardEntity","../player/PositionHelper":"PositionHelper","./CardSize":"CardSize"}],CardEntity:[function(e,t,o){"use strict";cc._RF.push(t,"e9bdaWfCTlHFKpi80+gP/P9","CardEntity"),Object.defineProperty(o,"__esModule",{value:!0});var n=new Map,r=function(){function e(e,t){this.rank=e,this.suit=t,this.id=e+13*t-1,this.point=e<10?e:10}return e.getInstance=function(t){if(0==n.size)for(var o=0;o<4;o++)for(var r=1;r<=13;r++){var a=new e(r,o);n.set(a.id,a)}return n.get(t)},e.prototype.equals=function(e){return-1!=this.id&&this.id==e.id},e.prototype.compareTo=function(e){if(-1==e.id||-1==this.id)throw new Error("Can not compare invalid card");return this.id<e.id?-1:this.id==e.id?0:1},e}();o.default=r,cc._RF.pop()},{}],CardManagerV2:[function(e,t,o){"use strict";cc._RF.push(t,"a84572HjTRKabshAPy9MT4I","CardManagerV2");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../main/CyberGame"),s=e("./CardSize"),c=e("../../util/Queue"),u=e("../component/DeskNumText"),l=e("./Card"),p=e("../../constants/GameInfo"),d=cc._decorator,h=d.ccclass,y=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cardAtlas=null,t.deskNumText=null,t.cardBackSF=null,t.overlay=null,t.cardList=[],t.cardQueue=new c.default(52),t}return r(t,e),t.prototype.init=function(e){this.gameScene=e},t.prototype.start=function(){for(var e=0;e<52;e++){var t=new cc.Node("Card_"+e),o=t.addComponent(l.default);t.addComponent(cc.Sprite).spriteFrame=this.cardBackSF,o.cardManager=this,o.node.active=!1,o.overlaySF=this.overlay,this.cardList.push(o)}},t.prototype.updatePlayerCards=function(){this.deskCard.active=!0,this.deskCard.y=236,this.deskCard.setScale(.85),this.deskNumText.show(this.gameScene.game.deskSize);for(var e=this.createResumeCardInfo();e.length>0;){var t=e.shift();t.node.active=!0,t.node.parent=this.node,t.open()}},t.prototype.doGetCardFromQueue=function(e){for(var t=[],o=0;o<e.length;o++){var n=this.cardQueue.dequeue();n.setId(e[o]),n.setDistributed(!0),n.node.parent=this.node,t.push(n)}return t},t.prototype.correctQueueSize=function(){if(this.cardQueue.size()>this.gameScene.game.deskSize)for(;this.cardQueue.size()>this.gameScene.game.deskSize;)this.cardQueue.dequeue()},t.prototype.divideCard=function(){var e=this;this.deskCard.active=!0,this.deskCard.y=236,this.deskCard.setScale(.1),cc.tween(this.deskCard).to(1,{y:108,scale:1},{easing:"backOut"}).call(function(){var t=e.createCardInfo(),o=52;e.deskNumText.show(o);var n=0;e.schedule(function(){if(0==n&&i.cyberGame.audio.playSound("chiabai"),n=1-n,t.length>0){var r=t.shift();r.node.active=!0,r.moveToPlayer(!0),r.node.parent=e.node,e.deskNumText.show(--o)}else e.unscheduleAllCallbacks(),e.moveBackCardDesk(),e.scheduleOnce(function(){e.gameScene.node.emit(i.cyberGame.event.GameEvent.CARD_DIVIDED)},.8)},.06)}).start()},t.prototype.divideTutCard=function(e){var t=this;this.deskCard.active=!0,this.deskCard.y=236,this.deskCard.setScale(.1),cc.tween(this.deskCard).to(1,{y:108,scale:1},{easing:"backOut"}).call(function(){var o=t.createDevCardInfo(e),n=52;t.deskNumText.show(n);var r=0;t.schedule(function(){if(0==r&&i.cyberGame.audio.playSound("chiabai"),r=1-r,o.length>0){var e=o.shift();e.node.active=!0,e.moveToPlayer(!0),e.node.parent=t.node,t.deskNumText.show(--n)}else t.unscheduleAllCallbacks(),t.moveBackCardDesk(),t.scheduleOnce(function(){t.gameScene.node.emit(i.cyberGame.event.GameEvent.CARD_DIVIDED)},.8)},.06)}).start()},t.prototype.setStartPoint=function(e,t){0==t?(e.x=this.deskCard.x,e.y=-25):1==t||2==t?(e.x=-40,e.y=this.deskCard.y):3!=t&&4!=t||(e.x=40,e.y=this.deskCard.y)},t.prototype.addCard=function(e,t){var o=this.cardQueue.dequeue();o.setId(t),o.setDistributed(!0),o.setPlayerPos(e.index),0==e.index&&(e.cardControl.refreshPositions(e.cardControl.size()+1),o.node.zIndex=e.cardControl.getMaxZIndex()+1),e.cardControl.addCard(o);var n=e.cardControl.getPointStart();o.setCardPositon({x:n.x,y:n.y,angle:0,scale:0==e.index?s.CardSize.PLAYER_SCALE:s.CardSize.OPP_SCALE});var r=this.node.getChildByName("card_desk");o.node.x=r.x,o.node.y=r.y,o.node.setScale(s.CardSize.DEAL_SCALE),o.node.angle=-315,o.node.active=!0,o.node.parent=this.node,o.moveToPlayer(),i.cyberGame.audio.playSound("chiabai");var a=this.cardQueue.size();a>0?this.deskNumText.show(a):this.hideDesk()},t.prototype.createDealList=function(){var e=this.gameScene.seatManager,t=e.getSeatByGuserid(this.gameScene.game.dealer),o=[];if(o.push(t),t.index<4)for(var n=t.index+1;n<p.GameInfo.USER_GAME;n++)null!=(r=e.getSeatAt(n)).user&&this.gameScene.game.playerManager.has(r.user.guserid)&&o.push(r);if(t.index>0)for(n=0;n<t.index;n++){var r;null!=(r=e.getSeatAt(n)).user&&this.gameScene.game.playerManager.has(r.user.guserid)&&o.push(r)}return o},t.prototype.createCardInfo=function(){this.cardListToQueue();for(var e=this.createDealList(),t=[],o=0;o<p.GameInfo.TOTAL_CARDS_FOR_EACH_PLAYER;o++)for(var n=0;n<e.length;n++){var r=e[n],a=this.cardQueue.dequeue();a.setId(r.user.isItMe?r.user.cards[o].id:-1),a.setDistributed(!0),a.setPlayerPos(r.index),a.node.setScale(s.CardSize.DEAL_SCALE),a.node.angle=-315,this.setStartPoint(a.node,a.getPlayerPos());var i=r.cardControl.getPointStart();a.setCardPositon({x:i.x,y:i.y,angle:r.user.isItMe?12-2*o:0,scale:r.user.isItMe?s.CardSize.PLAYER_SCALE:s.CardSize.OPP_SCALE}),r.cardControl.addCard(a),t.push(a)}return t},t.prototype.createResumeCardInfo=function(){this.cardListToQueue();for(var e=this.createDealList(),t=[],o=0;o<e.length;o++)for(var n=e[o],r=n.user.isItMe?n.user.cards.length:n.user.numCard,a=0;a<r;a++){var i=this.cardQueue.dequeue();i.setId(n.user.isItMe?n.user.cards[a].id:-1),i.setDistributed(!0),i.setPlayerPos(n.index);var c=n.cardControl.getPointStart();i.setCardPositon({x:c.x,y:c.y,angle:0,scale:n.user.isItMe?s.CardSize.PLAYER_SCALE:s.CardSize.OPP_SCALE}),n.cardControl.addCard(i),t.push(i)}return t},t.prototype.createDevCardInfo=function(e){this.cardListToQueue();for(var t=[],o=0;o<5;o++)for(var n=0;n<2;n++){var r=this.cardQueue.dequeue();r.setId(0==n?e[o]:-1),r.setDistributed(!0),r.setPlayerPos(0==n?0:4),r.node.setScale(s.CardSize.DEAL_SCALE),r.node.angle=-315,this.setStartPoint(r.node,r.getPlayerPos());var a=this.gameScene.seatManager.getSeatAt(r.getPlayerPos()),i=a.cardControl.getPointStart();r.setCardPositon({x:i.x,y:i.y,angle:0,scale:0==n?s.CardSize.PLAYER_SCALE:s.CardSize.OPP_SCALE}),a.cardControl.addCard(r),t.push(r)}return t},t.prototype.hideDesk=function(){this.deskCard.active=!1},t.prototype.cardListToQueue=function(){this.cardQueue.clear();for(var e=0;e<52;e++)this.cardQueue.enqueue(this.cardList[e])},t.prototype.moveBackCardDesk=function(){cc.tween(this.deskCard).to(.8,{y:236,scale:.85},{easing:"backInOut"}).start()},t.prototype.hideDeskWithEffect=function(){var e=this;cc.tween(this.deskCard).to(.8,{scale:0},{easing:"backInOut"}).call(function(){e.hideDesk()}).start()},Object.defineProperty(t.prototype,"deskCard",{get:function(){return this.node.getChildByName("card_desk")},enumerable:!1,configurable:!0}),t.prototype.reset=function(){if(this.hideDesk(),this.deskNumText.hide(),this.cardList.length>0)for(var e=0;e<52;e++)this.cardList[e].resetCard()},a([y(cc.SpriteAtlas)],t.prototype,"cardAtlas",void 0),a([y(u.default)],t.prototype,"deskNumText",void 0),a([y(cc.SpriteFrame)],t.prototype,"cardBackSF",void 0),a([y(cc.SpriteFrame)],t.prototype,"overlay",void 0),a([h],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../main/CyberGame":"CyberGame","../../constants/GameInfo":"GameInfo","../../util/Queue":"Queue","../component/DeskNumText":"DeskNumText","./Card":"Card","./CardSize":"CardSize"}],CardSize:[function(e,t,o){"use strict";cc._RF.push(t,"523693RWoBA9YVZTkBeqsgH","CardSize"),Object.defineProperty(o,"__esModule",{value:!0}),o.CardSize=void 0;var n=function(){function e(){}return Object.defineProperty(e,"CARD_WIDTH",{get:function(){return 127},enumerable:!1,configurable:!0}),Object.defineProperty(e,"CARD_HEIGHT",{get:function(){return 174},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEAL_SCALE",{get:function(){return.4},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TABLE_SCALE",{get:function(){return.6},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ENDGAME_SCALE",{get:function(){return.45},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE_WIN_SCALE",{get:function(){return.4},enumerable:!1,configurable:!0}),Object.defineProperty(e,"PLAYER_SCALE",{get:function(){return.95},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OPP_SCALE",{get:function(){return.3},enumerable:!1,configurable:!0}),Object.defineProperty(e,"PLAYER_WIDTH",{get:function(){return Math.floor(e.CARD_WIDTH*e.PLAYER_SCALE)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"PLAYER_HEIGHT",{get:function(){return Math.floor(e.CARD_HEIGHT*e.PLAYER_SCALE)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TABLE_WIDTH",{get:function(){return Math.floor(e.CARD_WIDTH*e.TABLE_SCALE)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TABLE_HEIGHT",{get:function(){return Math.floor(e.CARD_HEIGHT*e.TABLE_SCALE)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OPP_WIDTH",{get:function(){return Math.floor(e.CARD_WIDTH*e.OPP_SCALE)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OPP_HEIGHT",{get:function(){return Math.floor(e.CARD_HEIGHT*e.OPP_SCALE)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE_WIN_WIDTH",{get:function(){return Math.floor(e.CARD_WIDTH*e.WHITE_WIN_SCALE)},enumerable:!1,configurable:!0}),e}();o.CardSize=n,cc._RF.pop()},{}],CardUtil:[function(e,t,o){"use strict";cc._RF.push(t,"79fb87JqwhLXKgtAIpTMiAP","CardUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.checkFollow=function(e,t){for(var o=this.getRankById(t),n=0;n<e.length;n++)if(e[n].rank==o)return!0;return!1},e.doGetFollowCards=function(e,t){for(var o=[],n=this.getRankById(t),r=0;r<e.length;r++)e[r].rank==n&&o.push(e[r]);return o},e.isSameRankCardGroup=function(e){for(var t=0;t<e.length-1;t++)if(this.getRankById(e[t])!=this.getRankById(e[t+1]))return!1;return!0},e.doGetBestDump=function(e){var t=[],o=this.createMapByValue(e),n=0,r=0;return o.forEach(function(e){for(var o=0,a=0;a<e.length;a++)o+=e[a].point;o>n?(n=o,t=e,r=e[0].rank):o==n&&e[0].rank>r&&(n=o,t=e,r=e[0].rank)}),t},e.getRankById=function(e){return e%13+1},e.getSuitById=function(e){return Math.floor(e/13)},e.sortCardEntityByValue=function(e){var t=this;e.sort(function(e,o){return t.getSuitById(e.id)-t.getSuitById(o.id)})},e.sortCardsByValue=function(e){var t=this;e.sort(function(e,o){return t.getRankById(e.getId())-t.getRankById(o.getId())})},e.sortCardsByRank=function(e){var t=this;e.sort(function(e,o){return t.getRankById(e)-t.getRankById(o)})},e.createMapByValue=function(e){for(var t=new Map,o=0;o<e.length;o++){var n=e[o];t.has(n.rank)?t.get(n.rank).push(n):t.set(n.rank,[n])}return t},e}();o.default=n,cc._RF.pop()},{}],Card:[function(e,t,o){"use strict";cc._RF.push(t,"91eabsrScFE774UuhNi61qN","Card");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../main/CyberGame"),s=cc._decorator.ccclass,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerPos=-1,t.cardSF=null,t.overlaySF=null,t.overlay=null,t.cardManager=null,t.distributed=!1,t.choosed=!1,t.tweening=!1,t}return r(t,e),t.prototype.setId=function(e){if(this.id=e,-1!=e){var t=this.cardManager.cardAtlas.getSpriteFrame("Card_"+e);this.setCardSF(t)}},t.prototype.getId=function(){return this.id},t.prototype.setCardPositon=function(e){this.playerX=e.x,this.playerY=e.y,this.playerAngle=e.angle,this.playerScale=e.scale},t.prototype.setNewX=function(e){this.playerX=e},t.prototype.setPlayerPos=function(e){this.playerPos=e},t.prototype.getPlayerPos=function(){return this.playerPos},t.prototype.setCardSF=function(e){this.cardSF=e},t.prototype.isChoose=function(){return this.choosed},t.prototype.isDistributed=function(){return this.distributed},t.prototype.setDistributed=function(e){this.distributed=e},t.prototype.enableCardClick=function(){this.disableCardClick(),this.choosed=!1,this.node.y=this.startY,this.node.on(cc.Node.EventType.TOUCH_START,this.onCardClick,this)},t.prototype.disableCardClick=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onCardClick,this)},t.prototype.onCardClick=function(){this.tweening||(this.tweenToNewY(this.choosed?this.startY:this.startY+15),this.choosed=!this.choosed,this.cardManager.gameScene.node.emit(i.cyberGame.event.GameEvent.CARD_CLICK,this))},t.prototype.unChoose=function(){this.tweening||(this.choosed=!1,this.tweenToNewY(this.startY))},t.prototype.choose=function(){this.tweening||(this.choosed=!0,this.tweenToNewY(this.startY+15))},t.prototype.tweenToNewY=function(e){var t=this;this.tweening=!0,cc.tween(this.node).to(.15,{y:e}).call(function(){t.tweening=!1}).start()},t.prototype.open=function(){this.node.x=this.playerX,this.node.y=this.playerY,this.startY=this.playerY,this.node.setScale(this.playerScale),this.node.angle=this.playerAngle,this.cardSF&&this.simpleOpen()},t.prototype.moveToPlayer=function(e){var t=this;cc.tween(this.node).to(.8,{x:this.playerX,y:this.playerY,angle:this.playerAngle,scale:this.playerScale},{easing:"backOut"}).call(function(){t.cardSF&&(t.startY=t.playerY,t.openCurrentPlayerCard(e))}).start()},t.prototype.moveToTable=function(){cc.tween(this.node).to(.5,{x:this.playerX,y:this.playerY,angle:this.playerAngle,scale:this.playerScale},{easing:"backOut"}).start()},t.prototype.moveToWhiteWinBox=function(e){var t=this;cc.tween(this.node).to(.5,{x:this.playerX,y:this.playerY,angle:this.playerAngle,scale:this.playerScale},{easing:"backOut"}).call(function(){cc.tween(t.node).to(.15,{scaleX:0,scaleY:t.playerScale+.1}).call(function(){t.simpleOpen()}).to(.15,{scaleX:t.playerScale,scaleY:t.playerScale}).call(function(){e&&e()}).start()}).start()},t.prototype.moveToWhiteWinBoxV2=function(e){cc.tween(this.node).to(.6,{x:this.playerX,y:this.playerY,angle:this.playerAngle,scale:this.playerScale},{easing:"backOut"}).call(function(){e&&e()}).start()},t.prototype.moveOppCardToTable=function(){var e=this;this.simpleOpen(),cc.tween(this.node).to(.4,{x:this.playerX,y:this.playerY,angle:this.playerAngle,scale:this.playerScale},{easing:"backOut"}).start(),cc.tween(this.node).to(.15,{scale:this.playerScale+.1},{easing:"backOut"}).call(function(){cc.tween(e.node).to(.15,{scale:e.playerScale},{easing:"backOut"}).start()}).start()},t.prototype.moveToNewX=function(e,t){this.playerX=e,cc.tween(this.node).to(.8,{x:this.playerX},{easing:"backOut"}).call(function(){t&&t()}).start()},t.prototype.moveToNewXWithCB=function(e,t){this.playerX=e,cc.tween(this.node).to(.4,{x:this.playerX},{easing:"linear"}).call(t).start()},t.prototype.openCardToPosition=function(){var e=this;return new Promise(function(t){cc.tween(e.node).to(.7,{x:e.playerX,y:e.playerY,scale:e.playerScale},{easing:"backOut"}).call(function(){t()}).start()})},t.prototype.openCurrentPlayerCard=function(e){var t=this;cc.tween(this.node).to(.15,{scaleX:0,scaleY:this.playerScale+.1}).call(function(){t.simpleOpen(),e&&t.addOverlay()}).to(.15,{scaleX:this.playerScale,scaleY:this.playerScale}).call(function(){t.cardManager.gameScene.node.emit(i.cyberGame.event.GameEvent.ADD_CARD_FINISH,t)}).start()},t.prototype.simpleOpen=function(){this.changeSpriteFrame(this.cardSF)},t.prototype.simpleClose=function(){this.changeSpriteFrame(this.cardManager.cardBackSF)},t.prototype.changeSpriteFrame=function(e){this.node.getComponent(cc.Sprite).spriteFrame=e},t.prototype.addOverlay=function(){this.overlay?(this.overlay.parent=this.node,this.overlay.active=!0):(this.overlay=new cc.Node("overlay"),this.overlay.addComponent(cc.Sprite).spriteFrame=this.overlaySF,this.overlay.opacity=150,this.overlay.parent=this.node)},t.prototype.hideOverlay=function(){this.overlay&&1==this.overlay.active&&(this.overlay.removeFromParent(!1),this.overlay.active=!1)},t.prototype.hide=function(){var e=this;cc.tween(this.node).to(.3,{scale:0,opacity:0},{easing:"linear"}).call(function(){e.resetCard()}).start()},t.prototype.resetCard=function(){this.distributed&&(this.choosed=!1,this.distributed=!1,this.id=-1,this.playerPos=-1,this.simpleClose(),this.disableCardClick(),this.setCardSF(null),this.tweening=!1,this.hideOverlay(),this.node.active=!1,this.node.opacity=255,this.node.zIndex=0,this.node.removeFromParent(!1))},a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../../../main/CyberGame":"CyberGame"}],ChatButton:[function(e,t,o){"use strict";cc._RF.push(t,"ca882byAhpNBZNT5mtwblPp","ChatButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.msg1=null,t.msg2=null,t}return r(t,e),t.prototype.updateMsg=function(e,t){e&&t&&(0==this.msg1.string.length&&0==this.msg2.string.length?(this.msg1.string=this.doGetMsg(e,t),this.msg1.node.y=0):0==this.msg2.string.length?(this.msg1.node.y=12,this.msg2.string=this.doGetMsg(e,t)):(this.msg1.string=this.msg2.string,this.msg2.string=this.doGetMsg(e,t)))},t.prototype.doGetMsg=function(e,t){return"<color=#ecb65e>"+i.cyberGame.utils.formatName(e,12,!1)+":</c> <color=#e9fff3>"+i.cyberGame.utils.formatName(t,35,!1)+"</color>"},a([u(cc.RichText)],t.prototype,"msg1",void 0),a([u(cc.RichText)],t.prototype,"msg2",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../CyberGame":"CyberGame"}],ChatContent:[function(e,t,o){"use strict";cc._RF.push(t,"f6fc4Xer7lF9bp7Iv/59Lex","ChatContent");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.avatar=null,t.playerName=null,t.msgWrap=null,t.msg=null,t._isOnlyMsgEnabled=!1,t}return r(t,e),t.prototype.start=function(){var e=this.msg.node.getContentSize().width+40,t=this.msg.node.getContentSize().height+20;this.msgWrap.setContentSize(e,t),this.isOnlyMsgEnabled?this.node.height=t:this.node.height=t+30},t.prototype.setPlayerName=function(e){"undefined"!=e&&null!=e||(e="Player"),this.playerName.string=e},t.prototype.setMsg=function(e){this.msg.string=e},t.prototype.setAvatar=function(e){var t=this;e&&cc.assetManager.loadRemote(e,{ext:".jpg"},function(e,o){!e&&cc.isValid(t.node)&&(o.packable=!1,t.avatar.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o),t.avatar.setContentSize(58,58))})},Object.defineProperty(t.prototype,"isOnlyMsgEnabled",{get:function(){return this._isOnlyMsgEnabled},set:function(e){this._isOnlyMsgEnabled=e,this._isOnlyMsgEnabled&&(this.avatar.destroy(),this.playerName.destroy(),this.msgWrap.getComponent(cc.Widget).top=0)},enumerable:!1,configurable:!0}),a([c(cc.Node)],t.prototype,"avatar",void 0),a([c(cc.Label)],t.prototype,"playerName",void 0),a([c(cc.Node)],t.prototype,"msgWrap",void 0),a([c(cc.Label)],t.prototype,"msg",void 0),a([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],ChatPopup:[function(e,t,o){"use strict";cc._RF.push(t,"47ee2djtb9F16Chp2+Qb1xu","ChatPopup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sendButton=null,t.chatInputText=null,t}return r(t,e),t.prototype.start=function(){},t.prototype.closePopup=function(){this.node.destroy()},a([c(cc.Button)],t.prototype,"sendButton",void 0),a([c(cc.EditBox)],t.prototype,"chatInputText",void 0),a([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],Chat:[function(e,t,o){"use strict";cc._RF.push(t,"0a8b2XRMc5Hd4SQz9yRbpZp","Chat"),Object.defineProperty(o,"__esModule",{value:!0}),o.chatController=void 0;var n=e("../constants/CyberEvent"),r=e("../CyberGame");(function(e){var t,o=null,a=!1,i=!1,s=null,c=[];function u(){return c}(function(e){e.UpdateProfile="_UPDATE_PROFILE_",e.GetLogChat="_GET_LOG_CHAT_",e.Login="_LOGIN_",e.LoginSuccess="LOGIN_SUCCESS",e.UpdateProfileSuccess="UPDATE_PROFILE_SUCCESS"})(t=e.Command||(e.Command={})),e.messages=u,e.send=function(e){a&&s.send(JSON.stringify({content:e}))},e.disconnect=function(){s&&s.readyState===WebSocket.OPEN&&s.close()},e.setUrl=function(e){o=e},e.connect=function(){!o||i||a||(i=!0,(s=new WebSocket(o+r.cyberGame.player.playerId)).onopen=function(){a=!0,i=!1,s.send(JSON.stringify({content:t.Login,token:r.cyberGame.player.signature})),console.log("connected to chat server")},s.onmessage=function(e){try{var o=JSON.parse(e.data);o.content&&(o.content==t.LoginSuccess?s.send(JSON.stringify({content:t.UpdateProfile,avatar:FBInstant.player.getPhoto(),name:FBInstant.player.getName()})):o.content==t.UpdateProfileSuccess?0==c.length&&s.send(JSON.stringify({content:t.GetLogChat})):(cc.game.emit(n.default.ON_LOBBY_PUBLIC_MSG,o),c.push(o),u.length>50&&c.shift()))}catch(r){console.log(r)}},s.onclose=function(){a=!1,i=!1})}})(o.chatController||(o.chatController={})),cc._RF.pop()},{"../CyberGame":"CyberGame","../constants/CyberEvent":"CyberEvent"}],CompareType:[function(e,t,o){"use strict";cc._RF.push(t,"8268dKcaNBOAbh6PZuK8wMw","CompareType"),Object.defineProperty(o,"__esModule",{value:!0}),o.CompareType=void 0,function(e){e[e.WIN=1]="WIN",e[e.LOSE=2]="LOSE",e[e.DRAW=0]="DRAW",e[e.NONE=-1]="NONE"}(o.CompareType||(o.CompareType={})),cc._RF.pop()},{}],ConnectingScene:[function(e,t,o){"use strict";cc._RF.push(t,"97c56/5YAxEF5eZj28q1ODs","ConnectingScene");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return r(t,e),t.prototype.start=function(){this.connect(),cc.director.preloadScene("home")},t.prototype.connect=function(){var e=this;i.cyberGame.socket.connect(),this.schedule(function(){i.cyberGame.socket.isConnectionReady()&&(e.unscheduleAllCallbacks(),cc.director.loadScene("home"))},.3)},a([u(cc.Label)],t.prototype,"label",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../CyberGame":"CyberGame"}],Connector:[function(e,t,o){"use strict";cc._RF.push(t,"9a991gP7nBMuIP+j/jD1CHA","Connector"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../CyberGame"),r=function(){function e(){this.sfs=null,this.connectionErrorCount=0,this.loginErrorCount=0,this.heartBeat=null,this.connected=!1,this.logged=!1,this.variableUpdated=!1}return e.getInstance=function(){return e.instance},e.prototype.init=function(){this.sfs||(this.sfs=new SFS2X.SmartFox(CyberGlobals.sfsConfig),this.sfs.addEventListener(SFS2X.SFSEvent.CONNECTION,this.onConnection,this),this.sfs.addEventListener(SFS2X.SFSEvent.CONNECTION_LOST,this.onConnectionLost,this),this.sfs.addEventListener(SFS2X.SFSEvent.LOGIN,this.onLogin,this),this.sfs.addEventListener(SFS2X.SFSEvent.LOGIN_ERROR,this.onLoginError,this),this.sfs.addEventListener(SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdate,this),CyberGlobals.sfsConfig=void 0)},e.prototype.isConnectionReady=function(){return this.logged&&this.variableUpdated},e.prototype.connect=function(){this.sfs.connect()},e.prototype.send=function(e){this.sfs.send(e)},e.prototype.disconnect=function(){this.sfs.disconnect()},Object.defineProperty(e.prototype,"isConnected",{get:function(){return this.sfs.isConnected},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastJoinedRoom",{get:function(){return this.sfs.lastJoinedRoom},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mySelf",{get:function(){return this.sfs.mySelf},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomManager",{get:function(){return this.sfs.roomManager},enumerable:!1,configurable:!0}),e.prototype.addEventListener=function(e,t,o){this.sfs.addEventListener(e,t,o)},e.prototype.removeEventListener=function(e,t){this.sfs.removeEventListener(e,t)},e.prototype.sendLoginRequest=function(){var e=new SFS2X.SFSObject;e.putLong("guserid",n.cyberGame.player.guserid),e.putUtfString("token",n.cyberGame.player.signature),e.putUtfString("platform",n.cyberGame.platform()),this.sfs.send(new SFS2X.LoginRequest(n.cyberGame.player.playerId,"",e))},e.prototype.onConnection=function(e){var t=this;if(this.connected=e.success,this.connected)this.sendLoginRequest(),this.loginErrorCount=0,CyberGlobals.gameConfig.debugLoadingProgress&&console.log("connection has been established");else{var o=0==this.connectionErrorCount?100:1e3;setTimeout(function(){t.connect()},o),this.connectionErrorCount++}},e.prototype.onConnectionLost=function(){var e=this;this.connected=!1,this.logged=!1,this.variableUpdated=!1,this.removeHearBeat(),n.cyberGame.storage.get("isHomeSceneStarted")||setTimeout(function(){e.connect()},300)},e.prototype.onLogin=function(e){if(this.logged=!0,this.sfs.enableLagMonitor(!0,2),n.cyberGame.player.guserid=parseInt(e.user.name),FBInstant.player.setDataAsync({guserid:n.cyberGame.player.guserid}),n.cyberGame.storage.put("collectTime",e.data.getInt("collectTime")),this.initHeartBeat(),n.cyberGame.storage.put("lastJoinedRoomId",e.data.containsKey("roomId")?e.data.getInt("roomId"):-1),this.connectionErrorCount=0,e.data.containsKey("isNewUser")&&(n.cyberGame.storage.put("canShowFlashSale",!1),this.handleInvitation()),e.data.containsKey("promotion")){var t=e.data.getSFSObject("promotion");n.cyberGame.iap.handlePromotion(t)}CyberGlobals.gameConfig.debugLoadingProgress&&console.log("logged to game server")},e.prototype.handleInvitation=function(){var e=FBInstant.getEntryPointData();if(e&&e.guserid){var t=new SFS2X.SFSObject;t.putUtfString("inviter",e.guserid+""),this.sfs.send(new SFS2X.ExtensionRequest("fbinstant.invite",t))}},e.prototype.onUserVariablesUpdate=function(e){var t=this;if(e.user.isItMe&&-1!=e.changedVars.indexOf("guserid")){try{var o,r=this.sfs.mySelf.getVariable("username").value;r==FBInstant.player.getID()?((o=new SFS2X.SFSObject).putUtfString("username",FBInstant.player.getName()),o.putInt("timezone",n.cyberGame.utils.timezoneOffset()),this.sfs.send(new SFS2X.ExtensionRequest("profile.update",o))):r!=FBInstant.player.getName()&&((o=new SFS2X.SFSObject).putUtfString("username",FBInstant.player.getName()),this.sfs.send(new SFS2X.ExtensionRequest("profile.update",o))),null!=FBInstant.player.getPhoto()&&((o=new SFS2X.SFSObject).putUtfString("avatar",FBInstant.player.getPhoto()),this.sfs.send(new SFS2X.ExtensionRequest("profile.updateAvatar",o))),FBInstant.player.getDataAsync(["asid"]).then(function(e){e.asid||FBInstant.player.getASIDAsync().then(function(e){var o=new SFS2X.SFSObject;o.putUtfString("asid",e),t.sfs.send(new SFS2X.ExtensionRequest("profile.updateAsid",o)),FBInstant.player.setDataAsync({asid:e})})})}catch(a){console.log(a)}this.variableUpdated=!0,CyberGlobals.gameConfig.debugLoadingProgress&&console.log("user variable updated")}},e.prototype.onLoginError=function(e){var t=this;e.errorMessage&&"MAINTENANCE"===e.errorMessage||4!==e.errorCode&&this.loginErrorCount<4&&(this.loginErrorCount++,1==this.loginErrorCount&&(n.cyberGame.player.guserid=0),setTimeout(function(){t.connected&&t.sendLoginRequest()},500))},e.prototype.initHeartBeat=function(){var e=this;this.removeHearBeat(),n.cyberGame.storage.get("collectTime")>10740&&n.cyberGame.storage.get("collectTime")<10800&&n.cyberGame.storage.put("collectTime",10740),n.cyberGame.storage.get("collectTime")<10800&&(this.heartBeat=setInterval(function(){n.cyberGame.storage.get("collectTime")<10800?n.cyberGame.storage.put("collectTime",n.cyberGame.storage.get("collectTime")+60):e.removeHearBeat()},6e4))},e.prototype.removeHearBeat=function(){this.heartBeat&&(clearInterval(this.heartBeat),this.heartBeat=null)},e.instance=new e,e}();o.default=r,cc._RF.pop()},{"../CyberGame":"CyberGame"}],CyberEvent:[function(e,t,o){"use strict";var n;cc._RF.push(t,"9a2a53QcK1Ea5kNGvLzwy1Q","CyberEvent"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.ON_LOAD_HOME_RES="onLoadHomeRes",e.ON_GAME_PAUSE="onCyberGamePause",e.ON_LOBBY_PUBLIC_MSG="onLobbyPublicMsg",e.ON_LOBBY_TAB_CHANGE="onLobbyTabChange",e.ON_POPUP_VISIBILITY_CHANGE="onPopupVisibilityChange",function(e){e.QUEUE_COMPLETE="onRequestQueueComplete",e.GAMESCENE_LAUNCHED="onGameSceneLaunched",e.CARD_DIVIDED="onDivideFinish",e.ADD_CARD_FINISH="onAddCardFinish",e.CARD_CLICK="onCardClick"}(e.GameEvent||(e.GameEvent={})),function(e){e.READY="onAdsReady",e.REWARD="onAdsReward",e.ON_SHOW="onAdsShow",e.ON_LOAD="onAdsLoaded",e.ON_LOAD_ERROR="onAdsLoadError",e.ON_INTER_SHOW="onInterAdsShow"}(e.AdsEvent||(e.AdsEvent={})),function(e){e.CONSUME_PURCHASE="onConsumePurchase",e.PURCHASE_PRODUCT="onPurchaseProduct"}(e.IAPEvent||(e.IAPEvent={}))}(n||(n={})),o.default=n,cc._RF.pop()},{}],CyberGame:[function(e,t,o){"use strict";cc._RF.push(t,"3bbedSF/7VJn4Io/m+ii33O","CyberGame");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,r++)n[r]=a[i];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.cyberGame=void 0;var i,s=e("./controllers/Connector"),c=e("./controllers/IAPManager"),u=e("./controllers/LobbyController"),l=e("./constants/CyberEvent"),p=e("./util/Storage"),d=e("./popup/Popup"),h=e("../game/SocketControl"),y=e("../language/GameLanuage"),f=e("./util/Utils"),m=e("./controllers/Ad"),g=e("./controllers/Audio"),b=e("./controllers/Chat"),v=!1,_=null,C=!1,O=null,S=null,P=null;(function(e){function t(){return new Promise(function(e,t){_?e(_):FBInstant.player.getDataAsync(["todayDate","invitation"]).then(function(t){_=new Map;var o=new Date,n=new Date(o.getTime()-6e4*o.getTimezoneOffset()).toISOString().split("T")[0];if(t.todayDate!==n)FBInstant.player.setDataAsync({todayDate:n,invitation:[]});else if(t.invitation&&t.invitation.length>0)for(var r=0;r<t.invitation.length;r++)_.set(t.invitation[r],!0);e(_)}).catch(function(e){t(e)})})}function o(t){e.lang.locale=t}e.utils=f.utils,e.event=l.default,e.ad=m.adController,e.audio=g.default,e.chat=b.chatController,e.socket=s.default.getInstance(),e.iap=c.default.getInstance(),e.lobbyCtrl=u.default.getInstance(),e.storage=new p.default,e.lang=new y.GameLanguage,e.player=null,e.initAsync=function(){return n(this,void 0,Promise,function(){return r(this,function(t){switch(t.label){case 0:return C?[2,Promise.reject("initAsync is already initializing")]:(C=!0,[4,new Promise(function(e){try{if(CyberGlobals.isSignedPlayerResolved())e(CyberGlobals.signedPlayer);else var t=setInterval(function(){CyberGlobals.isSignedPlayerResolved()&&(clearInterval(t),e(CyberGlobals.signedPlayer))},30)}catch(o){console.log(o)}})]);case 1:return e.player=t.sent(),CyberGlobals.signedPlayer=void 0,o(CyberGlobals.getLocale()),e.socket.init(),h.default.instance.initialize(),e.iap.onReady().then(function(){console.log("IAP supported"),e.iap.init().then(function(){console.log("IAP inited success")})}),e.socket.connect(),e.ad.init([CyberGlobals.adConfig.rewardedVideoId],CyberGlobals.gameConfig.isPreviewMode),e.chat.setUrl(CyberGlobals.gameConfig.globalChatUrl),CyberGlobals.gameConfig.globalChatUrl=void 0,FBInstant.onPause(function(){cc.game.emit(e.event.ON_GAME_PAUSE)}),window.CyberGame=void 0,[2,Promise.resolve()]}})})},e.processEntryPointData=function(){var t=!0;if(e.storage.get("entryPointHandled"))t=!1;else{var o=FBInstant.getEntryPointData();if(o)if(o.friendMode&&o.roomId&&o.bet)e.lobbyCtrl.canPlay(parseInt(o.bet))&&e.lobbyCtrl.joinPrivateRoom(parseInt(o.roomId));else if("noplay1day"===o.type)(n=new SFS2X.SFSObject).putLong("coin",o.coin?parseInt(o.coin):1e6),e.socket.send(new SFS2X.ExtensionRequest("gift.freeChip",n));else if(o.giftcode){var n,r=String(o.giftcode);r.length>=8&&((n=new SFS2X.SFSObject).putUtfString("code",r),n.putBool("isEntryPointData",!0),e.socket.send(new SFS2X.ExtensionRequest("gift.code",n)))}else t=!1;else t=!1;e.storage.put("entryPointHandled",!0)}return new Promise(function(e){e(t)})},e.loadAvatar=function(e,t,o){return new Promise(function(n,r){e&&"images/no_avatar"!=e&&cc.assetManager.loadRemote(e,{ext:".jpg"},function(e,a){if(e)r(e);else{a.packable=!1;var i=new cc.SpriteFrame(a);t&&cc.isValid(t)&&(t.getComponent(cc.Sprite).spriteFrame=i,o&&t.setContentSize(o,o)),n(i)}})})},e.loadPrefab=function(e,t){return new Promise(function(o,n){cc.resources.load(e,cc.Prefab,function(e,r){if(e)n(e);else if(t){var a=cc.instantiate(r);o(a)}else o(r)})})},e.loadDragonBone=function(e,t){return new Promise(function(o,n){var r={};cc.resources.load(e,dragonBones.DragonBonesAsset,function(e,t){e?n(e):(r.DragonBonesAsset=t,2==Object.keys(r).length&&o(r))}),cc.resources.load(t,dragonBones.DragonBonesAtlasAsset,function(e,t){e?n(e):(r.DragonBonesAtlasAsset=t,2==Object.keys(r).length&&o(r))})})},e.getInvitationDataAsync=t,e.updateInvitationData=function(t){if(_&&!_.has(t)){var o=new SFS2X.SFSObject;o.putUtfString("friendId",t),e.socket.send(new SFS2X.ExtensionRequest("friend.sendGift",o));var n=[];_.set(t,!0),_.forEach(function(e,t){n.length<50&&n.push(t)}),FBInstant.player.setDataAsync({invitation:n})}},e.containsInvitation=function(e){return _.has(e)},e.getConnectedPlayersAsync=function(){return new Promise(function(e,o){var n={};FBInstant.player.getConnectedPlayersAsync().then(function(t){n.players=t,2==Object.keys(n).length&&e(n)}).catch(function(e){console.log("getConnectedPlayersAsync",e),o(e)}),t().then(function(t){n.invitation=t,2==Object.keys(n).length&&e(n)}).catch(function(e){o(e)})})},e.openCommonPopup=function(e){if(null!=S){var t=cc.instantiate(S);t.getComponent(d.default).init(e),cc.director.getScene().addChild(t)}},e.setCommonPopupPrefab=function(e){S=e},e.setOverlayPrefab=function(e){P=e},e.createOverlay=function(){return cc.instantiate(P)},e.getPersistNode=function(){return O},e.setPersistNode=function(e){O=e},e.isGameAssetReady=function(){return v},e.setGameAssetReady=function(e){v=e},e.setLocale=o,e.text=function(t){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];return e.lang.text.apply(e.lang,a([t],o))},e.coin=function(){return e.socket.mySelf.getVariable("coin").value},e.level=function(){return e.socket.mySelf.getVariable("level").value},e.guserid=function(){return e.socket.mySelf.getVariable("guserid").value},e.getAvatarId=function(){return e.socket.mySelf.containsVariable("avatarId")?e.socket.mySelf.getVariable("avatarId").value:0},e.isFirstPurchased=function(){return e.socket.mySelf.getVariable("isFirstPurchased").value},e.isAdRemoved=function(){return e.socket.mySelf.getVariable("isAdRemoved").value},e.platform=function(){return FBInstant.getPlatform()||"UNDEF"}})(i=o.cyberGame||(o.cyberGame={})),window.CyberGame=i,cc._RF.pop()},{"../game/SocketControl":"SocketControl","../language/GameLanuage":"GameLanuage","./constants/CyberEvent":"CyberEvent","./controllers/Ad":"Ad","./controllers/Audio":"Audio","./controllers/Chat":"Chat","./controllers/Connector":"Connector","./controllers/IAPManager":"IAPManager","./controllers/LobbyController":"LobbyController","./popup/Popup":"Popup","./util/Storage":"Storage","./util/Utils":"Utils"}],DealCardHandler:[function(e,t,o){"use strict";cc._RF.push(t,"1718c56CzxNOaOjZ3Oc23le","DealCardHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=e("./AbstractHandler"),i=e("../entities/CardEntity"),s=e("../constants/GameState"),c=e("../../main/CyberGame"),u=e("../entities/Player"),l=e("../constants/GameInfo"),p=e("../util/CardUtil"),d=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.execute=function(e){this.game.inited&&!e.containsKey("error")?(this.addDisUsers(e.getSFSArray("playerList")),this.game.gameState=s.GameState.PLAYING,this.game.playing=!0,this.game.currentTurn=e.containsKey("currentTurn")?e.getUtfString("currentTurn"):null,this.game.dealer=this.game.currentTurn,this.game.lastDumpCard=-1,this.game.lastDumpId=null,this.addPlayers(e.getSFSArray("playerList")),e.containsKey("cards")&&(this.initCardsForCurrentPlayer(e.getIntArray("cards")),c.cyberGame.storage.put("interstitialShowingAllowed",!0)),this.screen.updateDealCard(e.containsKey("winType"))):this.game.releaseCurrentQueue()},t.prototype.initCardsForCurrentPlayer=function(e){for(var t=this.playerManager.getCurrentPlayer(),o=0;o<e.length;o++){var n=i.default.getInstance(e[o]);t.addCard(n)}p.default.sortCardEntityByValue(t.cards)},t.prototype.addPlayers=function(e){for(var t=0;t<e.size();t++){var o=e.getSFSObject(t).getUtfString("guserid");try{var n=this.game.getUser(o);if(n){if(n.playing=!0,n.numCard=l.GameInfo.TOTAL_CARDS_FOR_EACH_PLAYER-1,!n.isItMe){n.cards=[];for(var r=0;r<l.GameInfo.TOTAL_CARDS_FOR_EACH_PLAYER;r++)n.cards.push(-1)}this.playerManager.add(n)}}catch(a){console.log("add player id "+o+" exception: ",a),c.cyberGame.socket.disconnect()}}},t.prototype.addDisUsers=function(e){for(var t=0;t<e.size();t++){var o=e.getSFSObject(t),n=o.getUtfString("guserid");if(!this.game.containsUser(n)){var r=u.default.newInstance(o);r.position=o.getInt("pos"),r.ready=!0,this.game.addUser(r);for(var a=0;a<this.game.boardPositions.length;a++)if(this.game.boardPositions[a]==r.position){r.positionIndex=a;break}this.updateUserEnterRoom(r),this.screen.seatManager.highLightPlayer(r)}}},t.prototype.updateUserEnterRoom=function(e){this.game.playing||c.cyberGame.audio.playJoinRoomSound(),this.screen.seatManager.getSeatAt(e.positionIndex).updateData(e),this.screen.deskLayer.hideWatingPlayerText(),console.log("crazy user enter room :D")},t}(a.default);o.default=d,cc._RF.pop()},{"../../main/CyberGame":"CyberGame","../constants/GameInfo":"GameInfo","../constants/GameState":"GameState","../entities/CardEntity":"CardEntity","../entities/Player":"Player","../util/CardUtil":"CardUtil","./AbstractHandler":"AbstractHandler"}],DeskLayer:[function(e,t,o){"use strict";cc._RF.push(t,"3133a1hXqROFrh7uTHB+Yn/","DeskLayer");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../main/CyberGame"),s=e("../prefab/StartCountDown"),c=e("./KhaengPopup"),u=cc._decorator,l=u.ccclass,p=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.countDownPrefab=null,t.khaengPopup=null,t.countDownNode=null,t}return r(t,e),t.prototype.showStartEffect=function(e){var t=this.node.getChildByName("start_"+i.cyberGame.lang.code),o="en"==i.cyberGame.lang.code?"animation1":"animation2",n=t.getComponent(sp.Skeleton);n.setAnimation(1,o,!1),t.active=!0,n.setCompleteListener(function(){e(),n.clearTrack(0),n.node.active=!1})},t.prototype.showStartCountDown=function(e){e>1e3&&!this.countDownNode&&(this.countDownNode=cc.instantiate(this.countDownPrefab),this.countDownNode.getComponent(s.default).delay=e,this.node.addChild(this.countDownNode))},t.prototype.hideStartCountDown=function(){if(this.countDownNode){try{cc.isValid(this.countDownNode)&&this.countDownNode.getComponent(s.default).stopCounter()}catch(e){console.log(e)}this.countDownNode=null}},t.prototype.isCountDownRunning=function(){try{if(this.countDownNode)return this.countDownNode.getComponent(s.default).running}catch(e){return!1}return!1},t.prototype.showWatingPlayerText=function(){this.node.getChildByName("waiting_bg").active=!0},t.prototype.hideWatingPlayerText=function(){this.node.getChildByName("waiting_bg").active=!1},a([p(cc.Prefab)],t.prototype,"countDownPrefab",void 0),a([p(c.default)],t.prototype,"khaengPopup",void 0),a([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../main/CyberGame":"CyberGame","../prefab/StartCountDown":"StartCountDown","./KhaengPopup":"KhaengPopup"}],DeskNumText:[function(e,t,o){"use strict";cc._RF.push(t,"236baUXXnRNlZ6pgda+IA7m","DeskNumText");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./TextManager"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textManager=null,t.chars=[],t}return r(t,e),t.prototype.show=function(e){if(this.chars.length>0){for(var t=0;t<this.chars.length;t++)this.textManager.charPool.put(this.chars[t]);this.chars.length=0}var o=0,n=e.toString();for(t=0;t<n.length;t++){var r=n.charAt(t),a=null,i=this.textManager.getCharNode();i.setPosition(0,0),o+=(a=this.textManager.arrOfWinTextSF[parseInt(r)]).getRect().width,i.getComponent(cc.Sprite).spriteFrame=a,this.node.addChild(i),this.chars.push(i)}this.node.setContentSize(o,27)},t.prototype.hide=function(){if(this.chars.length>0){for(var e=0;e<this.chars.length;e++)this.textManager.charPool.put(this.chars[e]);this.chars.length=0}},a([u(i.default)],t.prototype,"textManager",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./TextManager":"TextManager"}],DrawCardHandler:[function(e,t,o){"use strict";cc._RF.push(t,"348c7tnMRhDT7LQPRHt4P/X","DrawCardHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../main/CyberGame"),i=e("../constants/GameState"),s=e("../entities/CardEntity"),c=e("../util/CardUtil"),u=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.execute=function(e){if(this.game.inited&&this.game.gameState==i.GameState.PLAYING&&!e.containsKey("error")){var t=e.getUtfString("guserid"),o=e.getInt("card"),n=this.game.getUser(t);if(n)if(n.isItMe){var r=s.default.getInstance(o);n.addCard(r),this.updateDrawCard(t,o)}else n.cards.push(o),this.updateDrawCard(t,-1);else this.game.releaseCurrentQueue()}else this.game.releaseCurrentQueue()},t.prototype.updateDrawCard=function(e,t){var o=this,n=this.screen.seatManager.getSeatByGuserid(e);n.cardControl.hideOverlay(),n.cardControl.unChoose(),this.screen.cardManager.addCard(n,t),n.user.isItMe?(this.screen.actionButtonLayer.hide(),this.screen.actionButtonLayer.showDump(),n.cardControl.sortCards(),this.screen.node.once(a.cyberGame.event.GameEvent.ADD_CARD_FINISH,function(){n.cardControl.enableClick(),n.updateMyPoint();var e=c.default.doGetBestDump(n.user.cards);e.length>0?(n.cardControl.chooseCards(e),o.screen.scheduleOnce(function(){o.game.releaseCurrentQueue()},.2)):o.game.releaseCurrentQueue()})):this.screen.scheduleOnce(function(){o.game.releaseCurrentQueue()},.8)},t}(e("./AbstractHandler").default);o.default=u,cc._RF.pop()},{"../../main/CyberGame":"CyberGame","../constants/GameState":"GameState","../entities/CardEntity":"CardEntity","../util/CardUtil":"CardUtil","./AbstractHandler":"AbstractHandler"}],DumpCardHandler:[function(e,t,o){"use strict";cc._RF.push(t,"64aa5ksCodKrYxzb/l9CcfN","DumpCardHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../main/CyberGame"),i=e("../constants/GameState"),s=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.execute=function(e){if(this.game.inited&&this.game.gameState==i.GameState.PLAYING&&!e.containsKey("error")){e.containsKey("nextTurn")&&(this.game.currentTurn=e.getUtfString("nextTurn"));var t=e.getUtfString("guserid"),o=this.game.getUser(t),n=e.getIntArray("cards");this.game.lastDumpCard=n[0],this.game.lastDumpId=t,o?(o.removeCards(n),this.updateDumpCard(t,n,e.containsKey("nextTurn"))):this.game.releaseCurrentQueue()}else this.game.releaseCurrentQueue()},t.prototype.updateDumpCard=function(e,t,o){var n=this,r=this.screen.seatManager.getSeatByGuserid(e);if(r.cardControl.removeLastDumpCards(),r.lights.length>0){for(var i=0;i<r.lights.length;i++)r.lights[i].destroy();r.lights.length=0}r.user.isItMe?(this.screen.actionButtonLayer.hide(),r.cardControl.unChoose(),r.cardControl.dumpCards(t),r.updateMyPoint(),r.cardControl.addOverlay(),r.cardControl.disableClick()):r.cardControl.dumpOppCards(t),a.cyberGame.audio.playSound("chiabai"),o?this.screen.scheduleOnce(function(){n.screen.updateCurrentTurn(n.game.currentTurn),n.game.releaseCurrentQueue()},.5):this.screen.scheduleOnce(function(){n.game.releaseCurrentQueue()},1)},t}(e("./AbstractHandler").default);o.default=s,cc._RF.pop()},{"../../main/CyberGame":"CyberGame","../constants/GameState":"GameState","./AbstractHandler":"AbstractHandler"}],FollowCardHandler:[function(e,t,o){"use strict";cc._RF.push(t,"41aedhOM69B6YEkcY/07xib","FollowCardHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../main/CyberGame"),i=e("../constants/GameState"),s=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.execute=function(e){if(this.game.inited&&this.game.gameState==i.GameState.PLAYING&&!e.containsKey("error")){e.containsKey("nextTurn")&&(this.game.currentTurn=e.getUtfString("nextTurn"));var t=e.getUtfString("guserid"),o=this.game.getUser(t),n=e.getIntArray("cards"),r=e.getUtfString("lastDumpId"),a=e.getLong("coin");o?(o.removeCards(n),this.render(t,n,r,a,e.containsKey("nextTurn"))):this.game.releaseCurrentQueue()}else this.game.releaseCurrentQueue()},t.prototype.render=function(e,t,o,n,r){var i=this,s=this.screen.seatManager.getSeatByGuserid(e);if(a.cyberGame.audio.playSound("chiabai"),s.cardControl.removeLastDumpCards(),s.lights.length>0){for(var c=0;c<s.lights.length;c++)s.lights[c].destroy();s.lights.length=0}s.user.isItMe?(this.screen.actionButtonLayer.hide(),s.cardControl.dumpCards(t),s.updateMyPoint()):s.cardControl.dumpOppCards(t),this.screen.scheduleOnce(function(){s.showMoney(n,3);var e=i.screen.seatManager.getSeatByGuserid(o);e.showMoney(-n,3);var t=!1;if(e.lights.length>0){for(var r=0;r<e.lights.length;r++)e.lights[r].destroy();e.lights.length=0,t=!0}var c=i.screen.lightingLayer.show(s.index,e.index,t);c&&(e.lights.push(c),a.cyberGame.audio.playLight(),i.screen.lightingLayer.showTextAtAvatar(s))},.3),r?this.screen.scheduleOnce(function(){i.screen.updateCurrentTurn(i.game.currentTurn),i.game.releaseCurrentQueue()},.5):this.screen.scheduleOnce(function(){i.game.releaseCurrentQueue()},2)},t}(e("./AbstractHandler").default);o.default=s,cc._RF.pop()},{"../../main/CyberGame":"CyberGame","../constants/GameState":"GameState","./AbstractHandler":"AbstractHandler"}],FollowText:[function(e,t,o){"use strict";cc._RF.push(t,"43f68+FhAlB+Jatw1PIWzTB","FollowText");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onEnable=function(){this.scheduleOnce(this.hideWithEffect,2.8)},t.prototype.show=function(e,t){this.node.x=e,this.node.y=t,this.node.opacity=255;var o=this.getComponent(sp.Skeleton);o.clearTracks(),o.setAnimation(0,"animation",!1),this.node.active=!0},t.prototype.hideWithEffect=function(){var e=this;cc.tween(this.node).to(.25,{y:this.node.y+14,opacity:150}).call(function(){e.followTextPool.put(e.node),e.node.active=!1}).start()},a([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],FriendGiftPopup:[function(e,t,o){"use strict";cc._RF.push(t,"ba525YQg6hMZrwaeBwqB268","FriendGiftPopup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../component/FriendGiftRow"),s=e("../component/OverlayLoader"),c=e("../CyberGame"),u=cc._decorator,l=u.ccclass,p=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listView=null,t.giftView=null,t.noGiftLable=null,t.rowPrefab=null,t.currentTab=0,t.overlayLoader=null,t.friends=null,t.invMap=null,t}return r(t,e),t.prototype.start=function(){var e=this;Array.isArray(this.friends)&&this.friends.length>0&&(this.friends.forEach(function(t){e.addFriendEntry(t)}),this.listView.scrollToTop(.5)),c.cyberGame.socket.send(new SFS2X.ExtensionRequest("friend.getGifts"))},t.prototype.onEnable=function(){cc.game.emit(c.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!0),c.cyberGame.socket.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponse,this)},t.prototype.onDisable=function(){cc.game.emit(c.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!1),c.cyberGame.socket.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponse)},t.prototype.onExtensionResponse=function(e){if("friend.getGifts"==e.cmd){var t=e.params.getLongArray("friendIDs");if(0==t.length)return;for(var o=0;o<t.length;o++)for(var n=String(t[o]),r=0;r<this.friends.length;r++){var a=this.friends[r];if(a.getID()==n){this.addGiftEntry(a);break}}this.giftView.scrollToTop(.5),this.noGiftLable.node.active=!1}},t.prototype.addFriendEntry=function(e){var t=this.createListEntry(e);t.getChildByName("invite").active=!0,t.getChildByName("avatar").active=!0,this.listView.content.addChild(t)},t.prototype.addGiftEntry=function(e){var t=this.createListEntry(e);t.getChildByName("collect").active=!0,t.getChildByName("avatar").active=!0,t.getChildByName("sent_text").active=!0,this.giftView.content.addChild(t)},t.prototype.createListEntry=function(e){var t=cc.instantiate(this.rowPrefab);return t.getChildByName("name").getComponent(cc.Label).string=e.getName(),t.getComponent(i.default).playerID=e.getID(),c.cyberGame.loadAvatar(e.getPhoto()).then(function(e){cc.isValid(t)&&(t.getChildByName("avatar").getComponent(cc.Sprite).spriteFrame=e,t.getChildByName("avatar").setContentSize(68,68))}),t},t.prototype.onFriendTabClick=function(){c.cyberGame.audio.playButton(),1==this.currentTab&&(this.currentTab=0,this.listView.node.active=!0,this.giftView.node.active=!1,this.noGiftLable.node.active=!1)},t.prototype.onGiftTabClick=function(){c.cyberGame.audio.playButton(),0==this.currentTab&&(this.currentTab=1,this.listView.node.active=!1,this.giftView.node.active=!0,0==this.giftView.content.childrenCount&&(this.noGiftLable.node.active=!0))},t.prototype.onInviteFriend=function(){var e=this;c.cyberGame.audio.playButton(),this.showOverlayLoader(),cc.resources.load("images/shareimage",cc.Texture2D,function(t,o){if(e.hideOverlayLoader(),!t){var n=document.createElement("canvas"),r=n.getContext("2d");n.width=960,n.height=544,r.drawImage(o.getHtmlElementObj(),0,0,960,544),FBInstant.inviteAsync({image:n.toDataURL(),text:'"'+FBInstant.player.getName()+'" invited you to play',data:{guserid:c.cyberGame.player.guserid}})}})},t.prototype.closePopup=function(){c.cyberGame.audio.playButton(),this.node.destroy()},t.prototype.showOverlayLoader=function(){this.overlayLoader||(this.overlayLoader=c.cyberGame.createOverlay(),this.node.addChild(this.overlayLoader))},t.prototype.hideOverlayLoader=function(){this.overlayLoader&&(this.overlayLoader.getComponent(s.default).close(),this.overlayLoader=null)},a([p(cc.ScrollView)],t.prototype,"listView",void 0),a([p(cc.ScrollView)],t.prototype,"giftView",void 0),a([p(cc.Label)],t.prototype,"noGiftLable",void 0),a([p(cc.Prefab)],t.prototype,"rowPrefab",void 0),a([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../CyberGame":"CyberGame","../component/FriendGiftRow":"FriendGiftRow","../component/OverlayLoader":"OverlayLoader"}],FriendGiftRow:[function(e,t,o){"use strict";cc._RF.push(t,"f7c30fsDfhCdKAFFCTtRRsG","FriendGiftRow");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator.ccclass,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerID=null,t}return r(t,e),t.prototype.start=function(){this.node.getChildByName("collect").once("click",this.onCollect,this)},t.prototype.onInvite=function(){var e=this;i.cyberGame.audio.playButton(),FBInstant.context.createAsync(this.playerID).then(function(){e.updateAsync()})},t.prototype.onCollect=function(){var e=this;i.cyberGame.audio.playButton();var t=new SFS2X.SFSObject;t.putUtfString("friendId",this.playerID),i.cyberGame.socket.send(new SFS2X.ExtensionRequest("friend.collectGift",t)),this.node.getChildByName("collect").active=!1;var o=this.node.getChildByName("coin"),n=o.y;o.y=n-30,o.active=!0,cc.tween(o).to(.5,{y:n}).start(),cc.tween(this.node).delay(2).to(1,{opacity:0}).call(function(){e.node.destroy()}).start()},t.prototype.updateAsync=function(){var e=this;cc.resources.load("images/shareimage",cc.Texture2D,function(t,o){if(!t){o.addRef();var n=document.createElement("canvas"),r=n.getContext("2d");n.width=960,n.height=544,r.drawImage(o.getHtmlElementObj(),0,0,960,544);var a=i.cyberGame.containsInvitation(e.playerID)?"Play":"GET IT",s=i.cyberGame.containsInvitation(e.playerID)?'"'+FBInstant.player.getName()+'" invited you to play':'"'+FBInstant.player.getName()+'" sent you a gift! Hurry up and try it out!',c={action:"CUSTOM",cta:a,image:n.toDataURL(),text:s,template:"challenge",data:{guserid:i.cyberGame.player.guserid},strategy:"IMMEDIATE",notification:"NO_PUSH"};FBInstant.updateAsync(c).then(function(){e.updateInvite()})}})},t.prototype.updateInvite=function(){i.cyberGame.updateInvitationData(this.playerID)},a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../CyberGame":"CyberGame"}],GameConfig:[function(e,t,o){"use strict";cc._RF.push(t,"6ac3fSSrA5JSoBe40wZz6sS","GameConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameConfig=void 0,o.GameConfig={maxUsers:5,npcEnabled:!0,npcSize:4,disableReconnect:!0,disableTimer:!1},cc._RF.pop()},{}],GameInfo:[function(e,t,o){"use strict";cc._RF.push(t,"715f1ghWIdJOaA+L9tMv7+N","GameInfo"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameInfo=void 0,function(e){e[e.TOTAL_CARDS_FOR_EACH_PLAYER=13]="TOTAL_CARDS_FOR_EACH_PLAYER",e[e.USER_GAME=4]="USER_GAME",e[e.TIME_COUNTDOWN_EACH_TURN=15]="TIME_COUNTDOWN_EACH_TURN",e[e.EACH_CARD_DIVIDING_TIME=.2]="EACH_CARD_DIVIDING_TIME",e[e.CARD_DUMP_TIME=.25]="CARD_DUMP_TIME"}(o.GameInfo||(o.GameInfo={})),cc._RF.pop()},{}],GameInvitePopup:[function(e,t,o){"use strict";cc._RF.push(t,"0171cnPlQlBc7WiqvUcYHFX","GameInvitePopup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../main/CyberGame"),s=e("../../constants/GameInfo"),c=e("../../SocketControl"),u=cc._decorator,l=u.ccclass,p=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.avatars=[],t.noAvatarSF=null,t.iconInviteSF=null,t.roomCode=null,t.desc=null,t.betText=null,t.idMap=new Map,t.roomId=0,t.roomBet=0,t.inviteAllowed=!0,t.touchAllowed=!0,t}return r(t,e),t.prototype.show=function(e,t){var o=this;this.touchAllowed=!0,this.roomId=e,this.roomBet=t,this.roomCode.string=i.cyberGame.text("ROOM_NUMBER")+e,"th"==i.cyberGame.lang.code?this.desc.string="":this.desc.string="Invite Your Friends To Play And Send Them The Room Number: "+e,this.betText.string=i.cyberGame.text("BET2")+i.cyberGame.utils.shortenLargeNumber(t,0),this.node.active=!0;var n=FBInstant.player.getPhoto();n&&cc.assetManager.loadRemote(n,{ext:".jpg"},function(e,t){!e&&cc.isValid(o.node)&&(t.packable=!1,o.avatars[0].spriteFrame=new cc.SpriteFrame(t))})},t.prototype.updateUserEnterRoom=function(e){for(var t=this,o=1,n=function(){var e=!0;if(r.idMap.forEach(function(t){t==o&&(e=!1)}),e)return"break";o++},r=this;o<s.GameInfo.USER_GAME&&"break"!==n(););this.avatars[o].spriteFrame=this.noAvatarSF,this.avatars[o].node.getComponent(cc.Button).interactable=!1,this.idMap.set(e.guserid,o),e.avatar&&cc.assetManager.loadRemote(e.avatar,{ext:".jpg"},function(e,n){!e&&cc.isValid(t.node)&&(n.packable=!1,t.avatars[o].spriteFrame=new cc.SpriteFrame(n))}),this.enableStartButton()},t.prototype.updateUserExitRoom=function(e,t){var o=this.idMap.get(e);o&&(this.avatars[o].spriteFrame=this.iconInviteSF,this.avatars[o].node.getComponent(cc.Button).interactable=!0,this.idMap.delete(e)),1==t&&this.disableStartButton()},t.prototype.enableStartButton=function(){this.node.getChildByName("bg").getChildByName("button_start_alpha").active=!1,this.node.getChildByName("bg").getChildByName("button_startgame").active=!0},t.prototype.disableStartButton=function(){this.node.getChildByName("bg").getChildByName("button_start_alpha").active=!0,this.node.getChildByName("bg").getChildByName("button_startgame").active=!1},t.prototype.onStartGame=function(){this.touchAllowed&&c.default.instance.startGame()},t.prototype.onInvite=function(){var e=this;this.inviteAllowed&&(this.inviteAllowed=!1,cc.resources.load("images/shareimage",cc.Texture2D,function(t,o){if(t)e.inviteAllowed=!0;else{o.packable=!1;var n=document.createElement("canvas"),r=n.getContext("2d");n.width=960,n.height=544,r.drawImage(o.getHtmlElementObj(),0,0,960,544),e.touchAllowed=!1,FBInstant.inviteAsync({image:n.toDataURL(),text:'"'+FBInstant.player.getName()+'" invited you to play',data:{friendMode:!0,bet:e.roomBet,roomId:e.roomId}}).then(function(){e.inviteAllowed=!0,e.touchAllowed=!0}).catch(function(){e.inviteAllowed=!0,e.touchAllowed=!0})}}))},t.prototype.onClose=function(){this.touchAllowed&&c.default.instance.leaveGame()},t.prototype.hide=function(){this.node.active=!1},a([p({type:[cc.Sprite]})],t.prototype,"avatars",void 0),a([p(cc.SpriteFrame)],t.prototype,"noAvatarSF",void 0),a([p(cc.SpriteFrame)],t.prototype,"iconInviteSF",void 0),a([p(cc.Label)],t.prototype,"roomCode",void 0),a([p(cc.Label)],t.prototype,"desc",void 0),a([p(cc.Label)],t.prototype,"betText",void 0),a([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../main/CyberGame":"CyberGame","../../SocketControl":"SocketControl","../../constants/GameInfo":"GameInfo"}],GameLanuage:[function(e,t,o){"use strict";cc._RF.push(t,"ed56bN+22RDaJctIni+wWWC","GameLanuage"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameLanguage=void 0;var n=e("./en_US"),r=e("./th_TH"),a=function(){function e(){this._locale="en_US",this._code="en",this.langInstance=null}return Object.defineProperty(e.prototype,"code",{get:function(){return this._code},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this._locale},set:function(e){this._locale=e,this._code=e.substring(0,2),this.langInstance="th_TH"==e?new r.default:new n.default},enumerable:!1,configurable:!0}),e.prototype.text=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=this.langInstance[e];return t&&t.forEach(function(e){n=n.replace("%s",e)}),n},e}();o.GameLanguage=a,cc._RF.pop()},{"./en_US":"en_US","./th_TH":"th_TH"}],GameOverHandler:[function(e,t,o){"use strict";cc._RF.push(t,"5383fA704JFRJRf83b4ZTe9","GameOverHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=e("./AbstractHandler"),i=e("../entities/ResultData"),s=e("../constants/WinType"),c=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.execute=function(e){var t=this;try{if(!this.game.inited)return void this.game.releaseCurrentQueue();var o=new i.ResultData(e,this.game.mySelf.name);o.players.forEach(function(e){t.playerManager.has(e.guserid)&&t.playerManager.getPlayer(e.guserid).playing?e.playing=!0:e.playing=!1}),this.screen.gameFinished=!0,o.winType==s.WinType.WHITE_WIN?this.screen.updateWhiteWin(o):o.winType==s.WinType.NORMAL?this.screen.updateNormalEndGame(o):o.winType==s.WinType.KNOCK?this.screen.updateKnock(o):o.winType==s.WinType.BIG_WIN?this.screen.updateKnock(o):this.screen.updateKaeng(o)}catch(n){this.game.releaseCurrentQueue(),console.log("GameOverHandler exception",n)}},t}(a.default);o.default=c,cc._RF.pop()},{"../constants/WinType":"WinType","../entities/ResultData":"ResultData","./AbstractHandler":"AbstractHandler"}],GameRequest:[function(e,t,o){"use strict";cc._RF.push(t,"f364cX/bpxCK4VfYZClcpwb","GameRequest"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameRequest=void 0,function(e){e.READY="ready",e.DEALCARD="dealCard",e.DRAW_CARD="drawCard",e.DUMP_CARD="dumpCard",e.FOLLOW_CARD="blockCard",e.KHAENG="khaeng",e.GET_PLAYING_INFO="getPlayingInfo",e.GAMEOVER="gameOver",e.QUIT_GAME="quitGame",e.UPDATE_POSITION="updatePosition",e.GET_USER_INFO="getUserInfo",e.USER_LEAVE_ROOM="userLeaveRoom",e.USER_ENTER_ROOM="uEnterRoom",e.USER_VAR_UPDATE="uVarUpdate",e.ROOM_VARIABLE_UPDATE="roomVariableUpdate",e.INIT_GAME="initGame",e.SEND_GIFT="sendGift",e.START_AFTER="autoStart",e.UPDATE_MONEY="updateMoney",e.NOT_ENOUGH_MONEY="notEnoughMoney",e.UPDATE_DEALER="updateDealer"}(o.GameRequest||(o.GameRequest={})),cc._RF.pop()},{}],GameRule:[function(e,t,o){"use strict";cc._RF.push(t,"f8f96c3LflIJaxM+BKBJD0H","GameRule");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../main/CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content1=null,t.content2=null,t}return r(t,e),t.prototype.close=function(){this.node.destroy()},t.prototype.onChangeTab=function(e){i.cyberGame.audio.playButton(),"toggle2"==e.node.name?(this.content1.active=!1,this.content2.active=!0):(this.content1.active=!0,this.content2.active=!1)},a([u(cc.Node)],t.prototype,"content1",void 0),a([u(cc.Node)],t.prototype,"content2",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../main/CyberGame":"CyberGame"}],GameScene:[function(e,t,o){"use strict";cc._RF.push(t,"2891d/lRslAo7elWi2hYrGr","GameScene");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../main/component/OverlayLoader"),s=e("../../main/controllers/AdapterManager"),c=e("../../main/CyberGame"),u=e("../constants/GameState"),l=e("../SocketControl"),p=e("./chat/InGameChat"),d=e("./component/DeskLayer"),h=e("./component/ActionButtons"),y=e("./component/Notification"),f=e("./component/PlayerInfoPopup"),m=e("./gift/GiftManager"),g=e("./menu/Menu"),b=e("./prefab/GameInvitePopup"),v=e("./component/TextManager"),_=e("./player/SeatManager"),C=e("./card/CardManagerV2"),O=e("../util/CardUtil"),S=e("./component/ResultPopup"),P=e("./component/LightingLayer"),G=e("../constants/GameInfo"),R=cc._decorator,w=R.ccclass,E=R.property,A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.deskLayer=null,t.actionButtonLayer=null,t.textManager=null,t.seatManager=null,t.cardManager=null,t.lightingLayer=null,t.giftManager=null,t.playerInfoPopup=null,t.menu=null,t.notification=null,t.roomIdLabel=null,t.avatarDragonData=null,t.resultPopup=null,t.invitePopup=null,t.chat=null,t.overlayLoader=null,t.gameFinished=!1,t}return r(t,e),t.prototype.onLoad=function(){s.default.inst.autoFitCanvas(this.node)},t.prototype.start=function(){var e=this;this.showOverlayLoader(),this.actionButtonLayer.init(this),this.seatManager.init(this),this.cardManager.init(this),this.giftManager.init(this),this.menu.init(this),this.roomIdLabel.string=c.cyberGame.utils.shortenLargeNumber(this.game.bet,0)+" - ID: "+this.game.room.id,c.cyberGame.socket.addEventListener(SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage,this),this.node.on(c.cyberGame.event.GameEvent.CARD_CLICK,this.onCardClick,this),this.game.friendMode?cc.resources.load("gameprefab/InvitePopup",cc.Prefab,function(t,o){if(!t&&cc.isValid(e.node)){var n=cc.instantiate(o);e.node.addChild(n),e.invitePopup=n.getComponent(b.default),e.loadChatPrefab(),e.node.emit(c.cyberGame.event.GameEvent.GAMESCENE_LAUNCHED)}}):(this.loadChatPrefab(),this.scheduleOnce(function(){e.node.emit(c.cyberGame.event.GameEvent.GAMESCENE_LAUNCHED)},.05))},t.prototype.loadChatPrefab=function(){var e=this;cc.resources.load("gameprefab/resultDialog",cc.Prefab,function(t,o){if(!t&&cc.isValid(e.node)){var n=cc.instantiate(o);e.resultPopup=n.getComponent(S.default),e.resultPopup.init(e),e.node.getChildByName("preloadNode").addChild(n),console.log("LOAD PREFAB"),e.resultPopup.hide()}}),cc.resources.load("gameprefab/ChatInGame",cc.Prefab,function(t,o){if(!t&&cc.isValid(e.node)){var n=cc.instantiate(o);n.active=!1,e.node.addChild(n),e.chat=n.getComponent(p.default)}})},t.prototype.onPublicMessage=function(e){var t=this.seatManager.getSeatByGuserid(e.sender.name);t&&(t.showChat(e.message),this.chat&&this.chat.addMessage(t.user.displayName,e.message))},t.prototype.updateGameState=function(e){if(this.hideOverlayLoader(),this.seatManager.allocate(),this.cardManager.reset(),this.gameFinished=!1,this.resultPopup&&this.resultPopup.hide(),this.game.gameState==u.GameState.PLAYING){this.seatManager.hideInviteButtons(),this.seatManager.updateDealer(this.game.dealer);var t=this.seatManager.getSeatByGuserid(this.game.currentTurn);if(t.startTimer(G.GameInfo.TIME_COUNTDOWN_EACH_TURN),this.cardManager.updatePlayerCards(),this.game.isMyTurn()){if(e)t.cardControl.enableClick(),this.actionButtonLayer.showDump();else{var o=O.default.doGetFollowCards(t.user.cards,this.game.lastDumpCard);-1!=this.game.lastDumpCard&&o.length>0?(t.cardControl.addOverlay(o),t.cardControl.chooseCards(o,!0),this.actionButtonLayer.centerBlock()):(this.actionButtonLayer.centerDraw(),t.cardControl.addOverlay())}c.cyberGame.audio.playSound("myturn")}else this.seatManager.my.user.playing&&this.seatManager.my.cardControl.addOverlay();if(this.game.dumpList)for(var n=0;n<this.game.dumpList.size();n++){var r=this.game.dumpList.getSFSObject(n).getUtfString("guserid"),a=this.game.dumpList.getSFSObject(n).getIntArray("cards"),i=this.seatManager.getSeatByGuserid(r);o=this.cardManager.doGetCardFromQueue(a),i.user.isItMe?i.cardControl.simpleDump(o):i.cardControl.simpleDumpOpp(o)}this.cardManager.correctQueueSize(),this.seatManager.my.user.playing&&this.seatManager.my.showMyPoint()}else 1==this.seatManager.getSize()&&(this.deskLayer.showWatingPlayerText(),this.game.friendMode&&this.invitePopup&&this.invitePopup.show(this.game.room.id,this.game.bet))},t.prototype.updateDealCard=function(e){var t=this;this.seatManager.prepareForDealcard(),this.node.once(c.cyberGame.event.GameEvent.CARD_DIVIDED,function(){t.game.currentTurn&&!e&&t.updateCurrentTurn(t.game.currentTurn);var o=t.seatManager.my;o.user.playing?(t.playerInfoPopup.hidePopup(),t.chat&&t.chat.closePopup(),o.showMyPointV2(),cc.game.once("SORT_CARDS_FINISH",function(){t.node.emit(c.cyberGame.event.GameEvent.QUEUE_COMPLETE,"dealCard")}),o.cardControl.sortCards(!0)):t.node.emit(c.cyberGame.event.GameEvent.QUEUE_COMPLETE,"dealCard")}),this.deskLayer.isCountDownRunning()?cc.game.once("START_COUNT_DOWN_FINISH",function(){t.deskLayer.hideStartCountDown(),c.cyberGame.audio.playStartGame(),t.deskLayer.showStartEffect(function(){t.seatManager.updateDealer(t.game.dealer),t.cardManager.divideCard()})}):(this.seatManager.updateDealer(this.game.dealer),this.deskLayer.hideStartCountDown(),c.cyberGame.audio.playStartGame(),this.deskLayer.showStartEffect(function(){t.cardManager.divideCard()})),this.game.friendMode&&this.invitePopup&&(this.invitePopup.destroy(),this.invitePopup=null),this.seatManager.my.user.playing&&this.hideOverlayLoader()},t.prototype.updateCurrentTurn=function(e){this.seatManager.hideTimers();var t=this.seatManager.getSeatByGuserid(e);if(t.startTimer(G.GameInfo.TIME_COUNTDOWN_EACH_TURN),this.game.isMyTurn()){t.cardControl.unChoose();var o=O.default.doGetFollowCards(t.user.cards,this.game.lastDumpCard);-1!=this.game.lastDumpCard&&o.length>0?this.game.lastDumpId!=e?(t.cardControl.chooseCards(o,!0),this.actionButtonLayer.centerBlock()):this.actionButtonLayer.centerDraw():(this.actionButtonLayer.centerDraw(),t.cardControl.enableClick(),this.actionButtonLayer.showDump()),c.cyberGame.audio.playSound("myturn")}else this.actionButtonLayer.hide()},t.prototype.updateNormalEndGame=function(e){var t=this;this.actionButtonLayer.hide(),this.seatManager.hideTimers(),this.seatManager.removeLastDumpCards();for(var o=0;o<e.players.length;o++){var n=e.players[o],r=this.seatManager.getSeatByGuserid(n.guserid);null!=r&&r.user.playing&&(0!=r.index?r.cardControl.openOppCards(n.cards):r.cardControl.openCards())}this.scheduleOnce(function(){c.cyberGame.audio.playSound("opencards")},.4),this.scheduleOnce(function(){e.my&&(e.my.win?c.cyberGame.audio.playKeangWin():c.cyberGame.audio.playKeangLose()),t.scheduleOnce(function(){t.showMoney(e)},1)},1)},t.prototype.updateKaeng=function(e){var t=this;this.actionButtonLayer.hide(),this.seatManager.hideTimers(),this.seatManager.removeLastDumpCards(),cc.game.once("ON_OPEN_CARD_FINISH",function(){for(var o=0;o<e.players.length;o++){var n=e.players[o],r=t.seatManager.getSeatByGuserid(n.guserid);null!=r&&r.user.playing&&r.user.guserid!=t.game.khaengId&&(0!=r.index?r.cardControl.openOppCards(n.cards):r.cardControl.openCards())}t.scheduleOnce(function(){c.cyberGame.audio.playSound("opencards")},.4),t.scheduleOnce(function(){for(var o=0;o<e.players.length;o++){var n=e.players[o];if(n.guserid==t.game.khaengId){var r=t.seatManager.getSeatByGuserid(n.guserid);n.win?(t.deskLayer.khaengPopup.showWin(r.index,r.cards.length,function(){t.scheduleOnce(function(){t.showMoney(e)},.1)}),c.cyberGame.audio.playKeangWin()):(t.deskLayer.khaengPopup.showLose(r.index,r.cards.length,function(){t.scheduleOnce(function(){t.showMoney(e)},.1)}),c.cyberGame.audio.playKeangLose());break}}},1)});for(var o=0;o<e.players.length;o++){var n=e.players[o];if(n.playing&&n.guserid==this.game.khaengId){var r=this.seatManager.getSeatByGuserid(n.guserid);null!=r&&(0!=r.index?r.cardControl.openOppCards(n.cards):r.cardControl.openCards());break}}this.scheduleOnce(function(){c.cyberGame.audio.playSound("opencards")},.4)},t.prototype.updateWhiteWin=function(e){var t=this;this.actionButtonLayer.hide(),this.seatManager.hideTimers(),cc.game.once("WHITE_WIN_OPEN_CARD_FINISH",function(){for(var o=0;o<e.players.length;o++){var n=e.players[o],r=t.seatManager.getSeatByGuserid(n.guserid);null!=r&&r.user.playing&&r.user.guserid!=e.whiteWinEntry.guserid&&(0==r.index?r.cardControl.openCards():r.cardControl.openOppCards(n.cards))}e.my&&(e.my.win?c.cyberGame.audio.playKeangWin():c.cyberGame.audio.playKeangLose()),t.scheduleOnce(function(){c.cyberGame.audio.playSound("opencards")},.4),t.scheduleOnce(function(){t.showMoney(e)},1.5)});var o=this.seatManager.getSeatByGuserid(e.whiteWinEntry.guserid);2!=o.index&&3!=o.index||this.cardManager.hideDeskWithEffect(),this.seatManager.showWhiteWin(o,e.whiteWinType,e.whiteWinEntry.cards)},t.prototype.updateKnock=function(e){var t=this;this.actionButtonLayer.hide(),this.seatManager.hideTimers(),this.seatManager.removeLastDumpCards();for(var o=0;o<e.players.length;o++){var n=e.players[o],r=this.seatManager.getSeatByGuserid(n.guserid);null!=r&&r.user.playing&&!n.win&&(0!=r.index?r.cardControl.openOppCards(n.cards):r.cardControl.openCards())}this.scheduleOnce(function(){c.cyberGame.audio.playSound("opencards")},.4),this.scheduleOnce(function(){e.my&&(e.my.win?c.cyberGame.audio.playKeangWin():c.cyberGame.audio.playKeangLose()),t.scheduleOnce(function(){t.showMoney(e)},1)},1)},t.prototype.showMoney=function(e){var t=this;c.cyberGame.audio.playMoneyEffect();for(var o=0;o<e.players.length;o++){var n=e.players[o],r=this.seatManager.getSeatByGuserid(n.guserid);if(null!=r&&r.user.playing){r.showMoney(n.coin);var a=r.user.coin+n.coin;a<0&&(a=0),r.updateCoin(a)}}this.scheduleOnce(function(){t.showWinLoseIcon(e)},1)},t.prototype.showWinLoseIcon=function(e){for(var t=this,o=0;o<e.players.length;o++){var n=e.players[o],r=this.seatManager.getSeatByGuserid(n.guserid);null!=r&&r.user.playing&&(n.win?r.showWin():r.showLose())}this.seatManager.my.user.playing&&this.resultPopup?this.scheduleOnce(function(){t.showResultPopup(e)},3.2):this.scheduleOnce(this.resetGame,7)},t.prototype.showResultPopup=function(e){this.resultPopup.updateData(e),this.resultPopup.show(),this.scheduleOnce(this.resetGame,3.8)},t.prototype.resetGame=function(){if(this.gameFinished){this.gameFinished=!1;try{!0===this.menu.quitRegistered?(this.showOverlayLoader(),this.game.prepareToLeaveGame(),l.default.instance.leaveGame()):this.game.sendGetGameStateRequest(),this.node.emit(c.cyberGame.event.GameEvent.QUEUE_COMPLETE,"gameOver.resetGame")}catch(e){l.default.instance.leaveGame(),this.node.emit(c.cyberGame.event.GameEvent.QUEUE_COMPLETE,"gameOver.resetGame")}}},t.prototype.onCardClick=function(e){if(e.isChoose())for(var t=this.seatManager.my.cardControl,o=O.default.getRankById(e.getId()),n=0;n<t.cards.length;n++){var r=t.cards[n],a=O.default.getRankById(r.getId());r.getId()!=e.getId()&&(r.isChoose()&&a!=o?r.unChoose():r.isChoose()||a!=o||r.choose())}},t.prototype.onLeaveRoom=function(){if(this.gameFinished)return this.gameFinished=!1,this.menu.quitRegistered=!0,this.unscheduleAllCallbacks(),this.showOverlayLoader(),this.game.prepareToLeaveGame(),void l.default.instance.leaveGame();this.game.playing&&this.seatManager.my.user.playing?(1==this.notification.node.active&&(this.notification.unscheduleAllCallbacks(),this.notification.hide()),this.menu.quitRegistered?this.notification.show(c.cyberGame.text("WAIT_TO_EXIT")):this.notification.show(c.cyberGame.text("WAIT_TO_EXIT_CANCEL"))):(this.showOverlayLoader(),l.default.instance.leaveGame())},t.prototype.onSwitchRoom=function(){if(this.gameFinished)return this.gameFinished=!1,this.menu.quitRegistered=!0,this.unscheduleAllCallbacks(),this.showOverlayLoader(),l.default.instance.switchedTable=!0,this.game.prepareToLeaveGame(),void l.default.instance.leaveGame();this.game.playing&&this.seatManager.my.user.playing?(1==this.notification.node.active&&(this.notification.unscheduleAllCallbacks(),this.notification.hide()),this.notification.show(c.cyberGame.text("CAN_NOT_CHANGE_TABLE"))):(l.default.instance.switchedTable=!0,this.showOverlayLoader(),l.default.instance.leaveGame())},t.prototype.onForceLeaveRoom=function(){this.gameFinished&&(this.gameFinished=!1,this.unschedule(this.resetGame),this.menu.quitRegistered=!0,this.showOverlayLoader(),this.game.prepareToLeaveGame(),l.default.instance.leaveGame())},t.prototype.prepareForSwitchTable=function(){this.roomIdLabel.node.active=!1,this.seatManager.prepareForSwitchTable()},t.prototype.openEmoPopup=function(){this.playerInfoPopup.showEmoPopup(this.seatManager.my.user.displayName,this.seatManager.my.user.coin,this.seatManager.my.user.avatar)},t.prototype.playButtonClick=function(){c.cyberGame.audio.playButton()},t.prototype.openSetting=function(){c.cyberGame.audio.playButton(),this.menu.node.active=!0},t.prototype.openChat=function(){c.cyberGame.audio.playButton(),this.chat&&this.chat.show()},t.prototype.setGame=function(e){this.game=e},t.prototype.showOverlayLoader=function(){this.overlayLoader||(this.overlayLoader=c.cyberGame.createOverlay(),this.node.addChild(this.overlayLoader))},t.prototype.hideOverlayLoader=function(){this.overlayLoader&&(this.overlayLoader.getComponent(i.default).close(),this.overlayLoader=null)},t.prototype.onDestroy=function(){c.cyberGame.socket.removeEventListener(SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.node.off(c.cyberGame.event.GameEvent.CARD_CLICK,this.onCardClick,this),cc.game.off("WHITE_WIN_OPEN_CARD_FINISH"),cc.game.off("ON_OPEN_CARD_FINISH"),cc.game.off("START_COUNT_DOWN_FINISH"),cc.game.off("SORT_CARDS_FINISH")},a([E({type:d.default})],t.prototype,"deskLayer",void 0),a([E({type:h.default})],t.prototype,"actionButtonLayer",void 0),a([E(v.default)],t.prototype,"textManager",void 0),a([E(_.default)],t.prototype,"seatManager",void 0),a([E(C.default)],t.prototype,"cardManager",void 0),a([E(P.default)],t.prototype,"lightingLayer",void 0),a([E({type:m.default})],t.prototype,"giftManager",void 0),a([E({type:f.default})],t.prototype,"playerInfoPopup",void 0),a([E({type:g.default})],t.prototype,"menu",void 0),a([E({type:y.default})],t.prototype,"notification",void 0),a([E(cc.Label)],t.prototype,"roomIdLabel",void 0),a([w],t)}(cc.Component);o.default=A,cc._RF.pop()},{"../../main/CyberGame":"CyberGame","../../main/component/OverlayLoader":"OverlayLoader","../../main/controllers/AdapterManager":"AdapterManager","../SocketControl":"SocketControl","../constants/GameInfo":"GameInfo","../constants/GameState":"GameState","../util/CardUtil":"CardUtil","./card/CardManagerV2":"CardManagerV2","./chat/InGameChat":"InGameChat","./component/ActionButtons":"ActionButtons","./component/DeskLayer":"DeskLayer","./component/LightingLayer":"LightingLayer","./component/Notification":"Notification","./component/PlayerInfoPopup":"PlayerInfoPopup","./component/ResultPopup":"ResultPopup","./component/TextManager":"TextManager","./gift/GiftManager":"GiftManager","./menu/Menu":"Menu","./player/SeatManager":"SeatManager","./prefab/GameInvitePopup":"GameInvitePopup"}],GameState:[function(e,t,o){"use strict";cc._RF.push(t,"d7bd6u5FQhBnJ6vXy1Nt+7o","GameState"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameState=void 0,function(e){e.WAITING="waiting",e.PLAYING="playing"}(o.GameState||(o.GameState={})),cc._RF.pop()},{}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"8caf3CrlZNJ0pUa04GNhaYL","Game"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../main/CyberGame"),r=e("./constants/GameRequest"),a=e("./constants/GameState"),i=e("./constants/Variable"),s=e("./entities/Player"),c=e("./handlers/AutoStartTimerHandler"),u=e("./handlers/DealCardHandler"),l=e("./handlers/GameOverHandler"),p=e("./handlers/GetPlayingInfo"),d=e("./handlers/InitGameHandler"),h=e("./handlers/ReadyHandler"),y=e("./handlers/UpdatePositionHandler"),f=e("./handlers/UserEnterRoomHandler"),m=e("./handlers/UserExitRoomHandler"),g=e("./handlers/UserVarUpdateHandler"),b=e("./handlers/QuitGameHandler"),v=e("./handlers/DrawCardHandler"),_=e("./handlers/DumpCardHandler"),C=e("./handlers/FollowCardHandler"),O=e("./handlers/KhaengHandler"),S=e("./PlayManager"),P=e("./SocketControl"),G=e("./util/Queue"),R=e("./util/RequestParameter"),w=e("./view/GameScene"),E=function(){function e(e){this.inited=!1,this.paused=!1,this.screenReady=!1,this.screen=null,this.queue=null,this.currentRequest=null,this.jobTracker=null,this.handlers=new Map,this.userList=null,this.boardPositions=null,this.playerManager=null,this.lastDumpCard=-1,this.lastDumpId=null,this.khaengId=null,this.deskSize=-1,this.dumpList=null,this.dealer=null,this.pausedTime=0,this.room=e}return e.prototype.initialize=function(){this.initializeJobTracker(),this.playing=!1,this.bet=this.room.getVariable(i.RoomVariable.BET).value,this.friendMode=!!this.room.containsVariable(i.RoomVariable.FRIEND_MODE)&&this.room.getVariable(i.RoomVariable.FRIEND_MODE).value,this.gameState=a.GameState.WAITING,this.boardPositions=[],this.userList=new Map,this.playerManager=new S.default(this),this.handlers.set(r.GameRequest.INIT_GAME,new d.default(this)),this.handlers.set(r.GameRequest.USER_ENTER_ROOM,new f.default(this)),this.handlers.set(r.GameRequest.GET_PLAYING_INFO,new p.default(this)),this.handlers.set(r.GameRequest.READY,new h.default(this)),this.handlers.set(r.GameRequest.UPDATE_POSITION,new y.default(this)),this.handlers.set(r.GameRequest.USER_VAR_UPDATE,new g.default(this)),this.handlers.set(r.GameRequest.QUIT_GAME,new b.default(this)),this.handlers.set(r.GameRequest.START_AFTER,new c.default(this)),this.handlers.set(r.GameRequest.DEALCARD,new u.default(this)),this.handlers.set(r.GameRequest.GAMEOVER,new l.default(this)),this.handlers.set(r.GameRequest.DRAW_CARD,new v.default(this)),this.handlers.set(r.GameRequest.DUMP_CARD,new _.default(this)),this.handlers.set(r.GameRequest.FOLLOW_CARD,new C.default(this)),this.handlers.set(r.GameRequest.KHAENG,new O.default(this)),this.handlers.set(r.GameRequest.USER_LEAVE_ROOM,new m.default(this)),this.queue.enqueue(new R.default(r.GameRequest.INIT_GAME)),cc.game.on(n.cyberGame.event.ON_GAME_PAUSE,this.onGamePause,this),cc.game.on(cc.game.EVENT_SHOW,this.onGameResume,this)},e.prototype.onGameResume=function(){var e=this;this.pausedTime>0&&Date.now()-this.pausedTime<3e4?this.pausedTime=0:(this.pausedTime=0,this.gameState=a.GameState.WAITING,this.playing=!1,this.playerManager.clear(),this.userList.clear(),this.inited=!1,this.queue.clear(),this.screenReady=!1,cc.director.loadScene("game",function(t,o){t||(e.screen=o.getChildByName("Canvas").getComponent(w.default),e.screen.setGame(e),e.screen.node.once(n.cyberGame.event.GameEvent.GAMESCENE_LAUNCHED,function(){e.screenReady=!0,e.releaseCurrentQueue(),e.queue.clear(),P.default.instance.getPlayingInfoRequest()}),e.screen.node.on(n.cyberGame.event.GameEvent.QUEUE_COMPLETE,function(){e.releaseCurrentQueue()}))}))},e.prototype.onGamePause=function(){this.pausedTime=Date.now()},e.prototype.initializeJobTracker=function(){var e=this;this.queue=new G.default(9999),this.jobTracker=setInterval(function(){e.doWorker()},60)},e.prototype.doWorker=function(){this.paused||this.queue.isEmpty()||null!=this.currentRequest||(this.currentRequest=this.queue.dequeue(),this.execute(this.currentRequest.cmd,this.currentRequest.params))},e.prototype.execute=function(e,t){this.handlers.has(e)&&(CyberGlobals.gameConfig.isPreviewMode&&(e!=r.GameRequest.USER_ENTER_ROOM&&e!=r.GameRequest.INIT_GAME&&e!=r.GameRequest.ROOM_VARIABLE_UPDATE&&e!=r.GameRequest.USER_VAR_UPDATE?console.log("execute cmd: "+e,t.getDump()):e==r.GameRequest.INIT_GAME?console.log("INIT GAME"):e==r.GameRequest.USER_ENTER_ROOM?console.log("user "+t.guserid+" enter room"):e==r.GameRequest.ROOM_VARIABLE_UPDATE?console.log("update room master"):e==r.GameRequest.USER_VAR_UPDATE&&console.log("update user variable")),this.handlers.get(e).execute(t))},e.prototype.releaseCurrentQueue=function(){this.currentRequest=null},e.prototype.handleServerResponse=function(e,t){this.handlers.has(e)?this.queue.enqueue({cmd:e,params:t}):e==r.GameRequest.SEND_GIFT?this.handleSendGift(t):e==r.GameRequest.GET_USER_INFO&&this.updateCornerInfo(t)},e.prototype.sendGetGameStateRequest=function(){this.gameState=a.GameState.WAITING,this.playing=!1,this.playerManager.clear(),this.userList.clear(),this.inited=!1,this.queue.clear(),n.cyberGame.socket.lastJoinedRoom&&P.default.instance.joinedRoom?P.default.instance.getPlayingInfoRequest():P.default.instance.leaveGame()},e.prototype.prepareToLeaveGame=function(){this.playing=!1,this.inited=!1,this.queue.clear()},e.prototype.handleUserEnterRoom=function(e){this.handleServerResponse(r.GameRequest.USER_ENTER_ROOM,new s.default(e))},e.prototype.handleUserVariablesUpdate=function(e){this.handleServerResponse(r.GameRequest.USER_VAR_UPDATE,e)},e.prototype.handleSendGift=function(e){this.screenReady&&!this.paused&&this.inited&&(e.getInt("id")>0?this.screen.giftManager.updateSendGift(e):this.screen.giftManager.updateEmo(e))},e.prototype.isDealer=function(){return this.mySelf.name==this.dealer},e.prototype.isMyTurn=function(){return this.mySelf.name==this.currentTurn},e.prototype.containsUser=function(e){return this.userList.has(e)},e.prototype.getUser=function(e){return this.userList.has(e)?this.userList.get(e):null},e.prototype.addUser=function(e){this.userList.has(e.guserid)||this.userList.set(e.guserid,e)},e.prototype.removeUser=function(e){this.userList.has(e)&&this.userList.delete(e)},e.prototype.updateCornerInfo=function(){},Object.defineProperty(e.prototype,"mySelf",{get:function(){return n.cyberGame.socket.mySelf},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userCount",{get:function(){return this.room.userCount},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){cc.game.off(n.cyberGame.event.ON_GAME_PAUSE,this.onGamePause,this),cc.game.off(cc.game.EVENT_SHOW,this.onGameResume,this),clearInterval(this.jobTracker),this.playerManager&&this.playerManager.destroy(),this.userList&&this.userList.clear(),this.queue.clear(),this.handlers.clear(),this.userList=null,this.playerManager=null,this.screen=null,this.handlers=null,this.jobTracker=null,this.currentRequest=null},e}();o.default=E,cc._RF.pop()},{"../main/CyberGame":"CyberGame","./PlayManager":"PlayManager","./SocketControl":"SocketControl","./constants/GameRequest":"GameRequest","./constants/GameState":"GameState","./constants/Variable":"Variable","./entities/Player":"Player","./handlers/AutoStartTimerHandler":"AutoStartTimerHandler","./handlers/DealCardHandler":"DealCardHandler","./handlers/DrawCardHandler":"DrawCardHandler","./handlers/DumpCardHandler":"DumpCardHandler","./handlers/FollowCardHandler":"FollowCardHandler","./handlers/GameOverHandler":"GameOverHandler","./handlers/GetPlayingInfo":"GetPlayingInfo","./handlers/InitGameHandler":"InitGameHandler","./handlers/KhaengHandler":"KhaengHandler","./handlers/QuitGameHandler":"QuitGameHandler","./handlers/ReadyHandler":"ReadyHandler","./handlers/UpdatePositionHandler":"UpdatePositionHandler","./handlers/UserEnterRoomHandler":"UserEnterRoomHandler","./handlers/UserExitRoomHandler":"UserExitRoomHandler","./handlers/UserVarUpdateHandler":"UserVarUpdateHandler","./util/Queue":"Queue","./util/RequestParameter":"RequestParameter","./view/GameScene":"GameScene"}],GetPlayingInfo:[function(e,t,o){"use strict";cc._RF.push(t,"1af5eE4wptE8badCJlimdTX","GetPlayingInfo");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=e("./AbstractHandler"),i=e("../entities/CardEntity"),s=e("../entities/Player"),c=e("../constants/GameState"),u=e("../SocketControl"),l=e("../constants/GameInfo"),p=function(e){function t(t){var o=e.call(this,t)||this;return o.executedAtLeastOnce=!1,o}return r(t,e),t.prototype.execute=function(e){this.game.inited||(this.updateGameState(e),this.screen.updateGameState(!!e.containsKey("isDraw")&&e.getBool("isDraw")),this.game.inited=!0),this.game.releaseCurrentQueue()},t.prototype.updateGameState=function(e){this.game.gameState=e.getUtfString("gameState"),this.game.gameState!=c.GameState.WAITING?(this.game.playing=!0,this.playerManager.clear(),this.game.currentTurn=e.getUtfString("currentTurn"),this.game.dealer=e.getUtfString("dealer"),this.game.deskSize=e.getInt("deskSize"),e.containsKey("dumpList")?(this.game.lastDumpCard=e.getInt("lastDumpCard"),this.game.lastDumpId=e.getUtfString("lastDumpId"),this.game.dumpList=e.getSFSArray("dumpList")):(this.game.lastDumpCard=-1,this.game.lastDumpId=null,this.game.dumpList=null)):this.game.playing=!1,this.addUsers(e),this.initBoardPosition(),this.game.playing?this.updatePlayingState(e):this.executedAtLeastOnce||(u.default.instance.ready(),this.executedAtLeastOnce=!0)},t.prototype.initBoardPosition=function(){var e=this;this.game.boardPositions.length=0;var t=this.game.getUser(this.game.mySelf.name).position;this.game.boardPositions.push(t);for(var o=t;(o=o+1>l.GameInfo.USER_GAME-1?0:o+1)!=t;)this.game.boardPositions.push(o);this.game.userList.forEach(function(t){for(var o=0;o<e.game.boardPositions.length;o++)if(e.game.boardPositions[o]==t.position){t.positionIndex=o;break}})},t.prototype.updatePlayingState=function(e){console.log("updatePlayingState");for(var t=e.getSFSArray("playerList"),o=0;o<t.size();o++){var n=t.getSFSObject(o),r=this.game.getUser(n.getUtfString("guserid"));if(r.ready){if(r.playing=!0,r.isItMe){var a=n.getIntArray("cards");for(c=0;c<a.length;c++){var s=i.default.getInstance(a[c]);r.addCard(s)}}else for(var c=0;c<r.numCard;c++)r.cards.push(-1);this.playerManager.add(r)}}},t.prototype.addUsers=function(e){for(var t=e.getSFSArray("playerList"),o=0;o<t.size();o++){var n=t.getSFSObject(o),r=n.getUtfString("guserid"),a=this.game.room.getUserByName(r),i=void 0;(i=a?new s.default(a):s.default.newInstance(n)).ready=!!n.containsKey("ready")&&n.getBool("ready"),i.numCard=n.containsKey("numCard")?n.getInt("numCard"):l.GameInfo.TOTAL_CARDS_FOR_EACH_PLAYER-1,i.position=n.getInt("pos"),this.game.addUser(i)}},t}(a.default);o.default=p,cc._RF.pop()},{"../SocketControl":"SocketControl","../constants/GameInfo":"GameInfo","../constants/GameState":"GameState","../entities/CardEntity":"CardEntity","../entities/Player":"Player","./AbstractHandler":"AbstractHandler"}],GiftManager:[function(e,t,o){"use strict";cc._RF.push(t,"9497dVmJ5BDOplEABk6Sstb","GiftManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../main/CyberGame"),s=cc._decorator.ccclass,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emodAsset=null,t.emodAtlas=null,t.giftAsset=null,t.giftAtlas=null,t.moveCount=0,t}return r(t,e),t.prototype.init=function(e){var t=this;this.gameScene=e,cc.resources.load("dragonbones/Icon_All_backup_ske",dragonBones.DragonBonesAsset,function(e,o){e?cc.error(e):cc.isValid(t.node)&&(t.emodAsset=o,cc.resources.load("dragonbones/Icon_All_backup_tex",dragonBones.DragonBonesAtlasAsset,function(e,o){cc.isValid(t.node)&&(e?cc.error(e):t.emodAtlas=o)}))}),cc.resources.load("dragonbones/Effect_ALL_Copy_ske",dragonBones.DragonBonesAsset,function(e,o){e?cc.error(e):cc.isValid(t.node)&&(t.giftAsset=o,cc.resources.load("dragonbones/Effect_ALL_Copy_tex",dragonBones.DragonBonesAtlasAsset,function(e,o){cc.isValid(t.node)&&(e?cc.error(e):t.giftAtlas=o)}))})},t.prototype.updateSendGift=function(e){if(this.giftAsset&&this.giftAtlas&&this.moveCount<8){var t=e.getInt("id"),o=e.getUtfString("sender"),n=e.getUtfString("recipient"),r=this.gameScene.seatManager.getSeatByGuserid(o),a=this.gameScene.seatManager.getSeatByGuserid(n);r&&a&&this.move(t,r,a)}},t.prototype.move=function(e,t,o){var n=this;try{this.moveCount++;var r=1==e?60:0,a=o.node.x+r,s=o.node.y,c=this.gameScene.playerInfoPopup.node.getChildByName("bg").getChildByName("grid").getChildByName("gift_item_bg"+e).getChildByName("gift_"+e);if(c){var u=c.getComponent(cc.Sprite).spriteFrame,l=new cc.Node("GiftItem");l.addComponent(cc.Sprite).spriteFrame=u,l.setPosition(t.node.position),this.gameScene.seatManager.giftNode.addChild(l),cc.tween(l).to(.65,{x:a,y:s}).call(function(){n.moveCount--,l.destroy(),n.playgift(o,"GIFT_"+e),i.cyberGame.audio.playSound("gift"+e)}).start()}}catch(p){console.log("GiftManager.move: ",p)}},t.prototype.updateEmo=function(e){var t=e.getUtfString("emoCode"),o=e.getUtfString("sender"),n=this.gameScene.seatManager.getSeatByGuserid(o);"Angry"==t||"Smile"==t?this.playEmo(n,t,2):this.playEmo(n,t,1)},t.prototype.playEmo=function(e,t,o){if(this.emodAsset&&this.emodAtlas){var n=new cc.Node;n.setPosition(e.node.position),n.x=n.x-this[t].deltaX,n.y=n.y+this[t].deltaY,this.node.addChild(n);var r=n.addComponent(dragonBones.ArmatureDisplay);r.dragonAsset=this.emodAsset,r.dragonAtlasAsset=this.emodAtlas,r.armatureName="Armature",r.playAnimation(t,o),r.enableBatch=!0,r.once(dragonBones.EventObject.COMPLETE,function(){r.destroy()})}},t.prototype.playgift=function(e,t){var o=new cc.Node;o.setPosition(e.node.position),o.x=o.x-this[t].deltaX,o.y=o.y+this[t].deltaY,this.node.addChild(o);var n=o.addComponent(dragonBones.ArmatureDisplay);n.dragonAsset=this.giftAsset,n.dragonAtlasAsset=this.giftAtlas,n.armatureName=this[t].armature,n.playAnimation(this[t].animName,1),n.enableBatch=!0,n.once(dragonBones.EventObject.COMPLETE,function(){n.destroy()})},Object.defineProperty(t.prototype,"GIFT_1",{get:function(){return{animName:"animtion0",armature:"Xo_nuoc",deltaX:133,deltaY:120}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GIFT_2",{get:function(){return{animName:"Hoa_hong",armature:"Hoa_hong",deltaX:118,deltaY:140}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GIFT_3",{get:function(){return{animName:"animtion0",armature:"Brick",deltaX:121,deltaY:120}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GIFT_4",{get:function(){return{animName:"Kiss",armature:"Kiss",deltaX:125,deltaY:123}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GIFT_5",{get:function(){return{animName:"Tomato",armature:"Tomato",deltaX:125,deltaY:123}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GIFT_6",{get:function(){return{animName:"bom",armature:"bom",deltaX:124,deltaY:124}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GIFT_7",{get:function(){return{animName:"animtion0",armature:"Beer",deltaX:80,deltaY:65}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GIFT_8",{get:function(){return{animName:"animtion0",armature:"Egg",deltaX:123,deltaY:126}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Angry",{get:function(){return{animName:"Angry",deltaX:100,deltaY:60}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Bye",{get:function(){return{animName:"Bye",deltaX:105,deltaY:58}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cry",{get:function(){return{animName:"Cry",deltaX:104,deltaY:60}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Like",{get:function(){return{animName:"Like",deltaX:50,deltaY:60}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Please",{get:function(){return{animName:"Please",deltaX:105,deltaY:59}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Smile",{get:function(){return{animName:"Smile",deltaX:105,deltaY:59}},enumerable:!1,configurable:!0}),a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../../../main/CyberGame":"CyberGame"}],HandEffect:[function(e,t,o){"use strict";cc._RF.push(t,"4ec18W2J5pIOaC0GlYtiALH","HandEffect");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator.ccclass,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onEnable=function(){this.node.scale=1,this.tweenLoseDec()},t.prototype.show=function(){this.node.active=!0},t.prototype.hide=function(){this.node.active=!1},t.prototype.tweenLoseDec=function(){var e=this;cc.tween(this.node).to(1,{scale:.85}).call(function(){e.tweenLoseInc()}).start()},t.prototype.tweenLoseInc=function(){var e=this;cc.tween(this.node).to(1,{scale:1.05}).call(function(){e.tweenLoseDec()}).start()},a([i],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],HomeSceneDecorator:[function(e,t,o){"use strict";cc._RF.push(t,"c7535HRa49NWr1DBzmO34vC","HomeSceneDecorator");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){var e=this.node.getChildByName("Profile");e.getChildByName("playerName").getComponent(cc.Label).string=FBInstant.player.getName(),e.getChildByName("playerId").getComponent(cc.Label).string="ID "+i.cyberGame.player.guserid,e.getChildByName("playerCoin").getComponent(cc.Label).string=i.cyberGame.utils.formatCoinWithCommas(i.cyberGame.coin()),e.getChildByName("profile_level").getChildByName("level").getComponent(cc.Label).string=i.cyberGame.level().toString(),i.cyberGame.loadAvatar(FBInstant.player.getPhoto(),e.getChildByName("avatar_border").getChildByName("avatar"),86)},t.prototype.onEnable=function(){cc.game.on(i.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,this.onPopupVisibilityChange,this)},t.prototype.onDisable=function(){cc.game.off(i.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,this.onPopupVisibilityChange,this)},t.prototype.onPopupVisibilityChange=function(e,t){cc.isValid(this.node)&&(this.node.getChildByName("playNow").active=!e,this.node.getChildByName("playWithFriend").active=!e,this.node.getChildByName("selectTable").active=!e,t&&(this.node.getChildByName("bg").active=!e,this.node.getChildByName("BottomMenu").active=!e,this.node.getChildByName("Profile").active=!e,this.node.getChildByName("RightMenu").active=!e))},a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../CyberGame":"CyberGame"}],HomeScreen:[function(e,t,o){"use strict";cc._RF.push(t,"a7d92qdJCNEQL4ez9kTAU0O","HomeScreen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=e("../component/OverlayLoader"),c=e("../controllers/AdapterManager"),u=e("../popup/PlayFriendPopup"),l=e("../popup/SettingPopup"),p=e("../chat/LobbyChat"),d=e("../popup/FriendGiftPopup"),h=e("../chat/ChatButton"),y=e("../controllers/InterstitialManager"),f=cc._decorator,m=f.ccclass,g=f.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chatButton=null,t.playFriendPopup=null,t.lobbyChat=null,t.overlayLoader=null,t.lobbyOpenning=!1,t}return r(t,e),t.prototype.onLoad=function(){c.default.inst.autoFitCanvas(this.node)},t.prototype.start=function(){var e=this;i.cyberGame.ad.ready&&(this.refreshSpinBadge(!0),this.refreshAdsBadge(!0)),i.cyberGame.processEntryPointData().then(function(t){t||e.handleResumeGame()}),this.showOptIn(),i.cyberGame.chat.connect(),2===i.cyberGame.storage.get("currentLobby")&&this.openLobbyScene();var t=i.cyberGame.chat.messages();t.length>0&&(1==t.length?this.updateChatBadge(t[0]):(this.updateChatBadge(t[t.length-2]),this.updateChatBadge(t[t.length-1]))),i.cyberGame.storage.get("interstitialShowingAllowed")?(y.default.instance.canShow()?(i.cyberGame.audio.stopAllEffects(),y.default.instance.show()):(this.showShortcut(),i.cyberGame.audio.resumeMusic()),i.cyberGame.storage.put("interstitialShowingAllowed",!1)):i.cyberGame.audio.resumeMusic(),i.cyberGame.storage.put("currentScene","home")},t.prototype.showShortcut=function(){i.cyberGame.storage.get("canCreateShortcut")||FBInstant.player.getDataAsync(["canCreateShortcut"]).then(function(e){e.canCreateShortcut||FBInstant.canCreateShortcutAsync().then(function(e){e&&FBInstant.createShortcutAsync().then(function(){i.cyberGame.storage.put("canCreateShortcut",!0),FBInstant.player.setDataAsync({canCreateShortcut:!0})})})})},t.prototype.onEnable=function(){i.cyberGame.socket.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponse,this),i.cyberGame.socket.addEventListener(SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdate,this),cc.game.on(i.cyberGame.event.AdsEvent.REWARD,this.onAdReward,this),cc.game.on(i.cyberGame.event.AdsEvent.READY,this.onAdReady,this),cc.game.on(i.cyberGame.event.ON_LOBBY_PUBLIC_MSG,this.onPublicMessage,this),i.cyberGame.storage.get("isHomeSceneStarted")?cc.director.preloadScene("game"):i.cyberGame.storage.put("isHomeSceneStarted",!0),i.cyberGame.storage.get("currentLobby")||i.cyberGame.storage.put("currentLobby",1)},t.prototype.onDisable=function(){i.cyberGame.socket.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponse),i.cyberGame.socket.removeEventListener(SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdate),cc.game.off(i.cyberGame.event.AdsEvent.REWARD,this.onAdReward,this),cc.game.off(i.cyberGame.event.AdsEvent.READY,this.onAdReady,this),cc.game.off(i.cyberGame.event.ON_LOBBY_PUBLIC_MSG,this.onPublicMessage,this)},t.prototype.onPublicMessage=function(e){this.updateChatBadge(e),this.lobbyChat&&this.lobbyChat.updatePublicMessage(e)},t.prototype.updateChatBadge=function(e){this.chatButton.updateMsg(e.name,e.content)},t.prototype.handleResumeGame=function(){i.cyberGame.storage.get("lastJoinedRoomId")&&-1!=i.cyberGame.storage.get("lastJoinedRoomId")&&(this.showOverlayLoader(),setTimeout(function(){i.cyberGame.lobbyCtrl.resumeRoom(i.cyberGame.storage.get("lastJoinedRoomId"))},300))},t.prototype.showOptIn=function(){var e=this;CyberGlobals.gameConfig.isPreviewMode||i.cyberGame.storage.get("optHandled")||FBInstant.player.canSubscribeBotAsync().then(function(t){t&&cc.resources.load("prefab/OptInPopup",cc.Prefab,function(t,o){!t&&cc.isValid(e.node)&&(e.node.addChild(cc.instantiate(o)),i.cyberGame.storage.put("optHandled",!0))})}).catch(function(e){i.cyberGame.storage.put("optHandled",!0),console.log(e)})},t.prototype.onUserVariablesUpdate=function(e){if(e.user.isItMe&&-1!=e.changedVars.indexOf("coin")){var t=e.user.getVariable("coin").value;this.node.getChildByName("Profile").getChildByName("playerCoin").getComponent(cc.Label).string=i.cyberGame.utils.formatCoinWithCommas(t)}},t.prototype.addCoinn=function(){var e=new SFS2X.SFSObject;e.putLong("coin",1e7),i.cyberGame.socket.send(new SFS2X.ExtensionRequest("profile.setCoin",e))},t.prototype.onExtensionResponse=function(e){if("findGame"==e.cmd)this.hideOverlayLoader(),1===e.params.getInt("errorCode")&&this.showAdsPopup();else if("freeChip"==e.cmd)this.handleUpdateChip(e.params);else if("resumeGameError"==e.cmd)this.handleResumeGameError(e.params);else if("joinFriendGameError"==e.cmd)this.handleJoinFriendGameError(e.params);else if("ads.rewardedInterstitial"==e.cmd)this.handleUpdateChip(e.params);else if("gift.code"==e.cmd){var t=e.params.containsKey("msg")?e.params.getUtfString("msg"):null;t&&i.cyberGame.openCommonPopup({content:t})}},t.prototype.handleResumeGameError=function(e){e.containsKey("canRetry")?this.scheduleOnce(function(){var t=e.getInt("roomId");i.cyberGame.lobbyCtrl.resumeRoom(t)},1):this.hideOverlayLoader()},t.prototype.handleJoinFriendGameError=function(e){if(this.playFriendPopup){this.hideOverlayLoader();var t=e.getInt("errorCode");if(15==t)i.cyberGame.openCommonPopup({content:i.cyberGame.text("ROOM_WAS_NOT_FOUND")});else if(2==t||5==t)i.cyberGame.openCommonPopup({content:i.cyberGame.text("ROOM_FULL")});else if(1==t){var o=e.getLong("bet"),n=i.cyberGame.text("YOU_NEED_AT_LEAST",i.cyberGame.utils.shortenLargeNumber(i.cyberGame.lobbyCtrl.miniumMoneyCondition*o,0));i.cyberGame.openCommonPopup({content:n})}}},t.prototype.handleUpdateChip=function(e){if(e.containsKey("coin")){var t=i.cyberGame.text("YOU_GOT_CHIP",i.cyberGame.utils.shortenLargeNumber(e.getLong("coin"),2));i.cyberGame.openCommonPopup({content:t})}},t.prototype.onAdReward=function(e){if(e.type==i.cyberGame.ad.REWARDED_POPUP_POSITION){var t=new SFS2X.SFSObject;t.putInt("type",e.type),i.cyberGame.socket.send(new SFS2X.ExtensionRequest("ads.rewarded",t)),i.cyberGame.openCommonPopup({content:i.cyberGame.text("WATCH_VIDEO_SUCCESS",i.cyberGame.utils.formatCoinWithCommas(e.coin))})}},t.prototype.onAdReady=function(e){this.refreshSpinBadge(e),this.refreshAdsBadge(e)},t.prototype.refreshAdsBadge=function(e){this.node.getChildByName("RightMenu").getChildByName("rewardvideo").getChildByName("badge").active=!!e&&i.cyberGame.ad.MAX_VIDEOS-i.cyberGame.ad.watchCounter>0},t.prototype.refreshSpinBadge=function(e){var t=this.node.getChildByName("RightMenu").getChildByName("spin").getChildByName("badge"),o=i.cyberGame.storage.get("collectTime");o<10800?e&&i.cyberGame.ad.spinCounter<2&&10800-o>500?t.active=!0:t.active=!1:t.active=!0},t.prototype.onPlayNow=function(){if(i.cyberGame.isGameAssetReady()||cc.director.preloadScene("game",null,function(){i.cyberGame.setGameAssetReady(!0)}),i.cyberGame.lobbyCtrl.canPlay(5e3))this.showOverlayLoader(),i.cyberGame.lobbyCtrl.sendFindGameRequest();else{var e=i.cyberGame.text("YOU_NEED_AT_LEAST",i.cyberGame.utils.shortenLargeNumber(5e3*i.cyberGame.lobbyCtrl.miniumMoneyCondition,0));i.cyberGame.openCommonPopup({content:e})}},t.prototype.onCreateGameRequest=function(){this.playFriendPopup.node.active=!1;var e=this.playFriendPopup.currentBet;if(i.cyberGame.lobbyCtrl.canPlay(e))this.showOverlayLoader(),i.cyberGame.lobbyCtrl.sendCreateFriendGameRequest(e);else{var t=i.cyberGame.text("YOU_NEED_AT_LEAST",i.cyberGame.utils.shortenLargeNumber(i.cyberGame.lobbyCtrl.miniumMoneyCondition*e,2));i.cyberGame.openCommonPopup({content:t})}},t.prototype.onJoinFriengGameRequest=function(e){this.showOverlayLoader(),i.cyberGame.lobbyCtrl.joinPrivateRoom(e)},t.prototype.openCreateFriendGamePopup=function(){var e=this;this.playFriendPopup?this.playFriendPopup.show():(this.showOverlayLoader(),i.cyberGame.loadPrefab("prefab/CreateFriendPopup",!0).then(function(t){cc.isValid(e.node)?(e.hideOverlayLoader(),e.node.addChild(t),e.playFriendPopup=t.getComponent(u.default),e.playFriendPopup.homeScene=e,e.playFriendPopup.show()):t.destroy()}).catch(function(){e.hideOverlayLoader()}))},t.prototype.showChatPopup=function(){var e=this;i.cyberGame.audio.playButton(),this.lobbyChat?this.lobbyChat.show():(this.showOverlayLoader(),i.cyberGame.loadPrefab("prefab/LobbyChat",!0).then(function(t){cc.isValid(e.node)?(e.lobbyChat=t.getComponent(p.default),e.hideOverlayLoader(),e.node.addChild(t),e.lobbyChat.show(),e.updateChatBadge(!1)):t.destroy()}).catch(function(){e.hideOverlayLoader()}))},t.prototype.showIAPPopup=function(){var e=this;i.cyberGame.audio.playButton(),i.cyberGame.iap.isReady()&&(this.showOverlayLoader(),i.cyberGame.iap.getPurchasesAsync(function(){e.loadPrefabThenCreateNode("prefab/IAPPopup")}))},t.prototype.showFriendPopup=function(){var e=this;this.showOverlayLoader(),i.cyberGame.getConnectedPlayersAsync().then(function(t){i.cyberGame.loadPrefab("prefab/FriendGiftPopup",!0).then(function(o){cc.isValid(e.node)?(o.getComponent(d.default).friends=t.players,o.getComponent(d.default).invMap=t.invitation,e.hideOverlayLoader(),e.node.addChild(o)):o.destroy()}).catch(function(){e.hideOverlayLoader()})}).catch(function(){e.hideOverlayLoader()})},t.prototype.showRedeemPopup=function(){this.loadPrefabThenCreateNode("prefab/RedeemPopup")},t.prototype.showLeaderboardPopup=function(){this.loadPrefabThenCreateNode("prefab/LeaderboardPopup")},t.prototype.showSpin=function(){this.loadPrefabThenCreateNode("prefab/SpinWheel")},t.prototype.showAdsPopup=function(){this.loadPrefabThenCreateNode("prefab/VideoPopup")},t.prototype.showInvitePopup=function(){this.loadPrefabThenCreateNode("prefab/InvitePopup")},t.prototype.showTutorialPopup=function(){this.loadPrefabThenCreateNode("prefab/TutorialPopup")},t.prototype.showSettingPopup=function(){var e=this;this.showOverlayLoader(),i.cyberGame.loadPrefab("prefab/SettingPopup",!0).then(function(t){cc.isValid(e.node)?(t.getComponent(l.default).setScene(e),e.hideOverlayLoader(),e.node.addChild(t)):t.destroy()}).catch(function(){e.hideOverlayLoader()})},t.prototype.openLobbyScene=function(){var e=this;this.lobbyOpenning||(this.lobbyOpenning=!0,this.showOverlayLoader(),i.cyberGame.loadPrefab("prefab/LobbyGame",!0).then(function(t){cc.isValid(e.node)?(e.hideOverlayLoader(),e.node.addChild(t),e.lobbyOpenning=!1):t.destroy()}).catch(function(){e.hideOverlayLoader(),e.lobbyOpenning=!1}))},t.prototype.loadPrefabThenCreateNode=function(e){var t=this;this.showOverlayLoader(),i.cyberGame.loadPrefab(e,!0).then(function(e){cc.isValid(t.node)?(t.hideOverlayLoader(),t.node.addChild(e)):e.destroy()}).catch(function(){t.hideOverlayLoader()})},t.prototype.showOverlayLoader=function(){this.overlayLoader||(this.overlayLoader=i.cyberGame.createOverlay(),this.node.addChild(this.overlayLoader))},t.prototype.hideOverlayLoader=function(){this.overlayLoader&&(this.overlayLoader.getComponent(s.default).close(),this.overlayLoader=null)},t.prototype.playButtonAudio=function(){i.cyberGame.audio.playButton()},a([g(h.default)],t.prototype,"chatButton",void 0),a([m],t)}(cc.Component);o.default=b,cc._RF.pop()},{"../CyberGame":"CyberGame","../chat/ChatButton":"ChatButton","../chat/LobbyChat":"LobbyChat","../component/OverlayLoader":"OverlayLoader","../controllers/AdapterManager":"AdapterManager","../controllers/InterstitialManager":"InterstitialManager","../popup/FriendGiftPopup":"FriendGiftPopup","../popup/PlayFriendPopup":"PlayFriendPopup","../popup/SettingPopup":"SettingPopup"}],IAPManager:[function(e,t,o){"use strict";cc._RF.push(t,"0730dl2XaJLbqPU3GvGZyU6","IAPManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../CyberGame"),r=e("../entities/PromotionEntry"),a=function(){function e(){this.iapSupported=!1,this.inited=!1,this.testMode=!1,this.firstPurchased=!0,this.promotionEntry=null,this.catalog=new Map,this.purchases=new Map}return e.getInstance=function(){return this.instance},e.prototype.isIAPSupported=function(){return this.iapSupported},e.prototype.isReady=function(){return this.inited},e.prototype.isFirstPurchased=function(){return this.firstPurchased},e.prototype.handlePromotion=function(e){this.promotionEntry=new r.default(e)},e.prototype.getPromotion=function(){return this.promotionEntry},e.prototype.onReady=function(){var e=this;return new Promise(function(t){FBInstant.payments.onReady(function(){e.iapSupported||(n.cyberGame.socket.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,e.onExtensionResponse,e),e.iapSupported=!0,e.updateCatalog()),t()})})},e.prototype.init=function(){var e=this;return new Promise(function(t,o){e.inited&&o(new Error("IAPManager is already inited")),e.canBuyFirstDeal().then(function(t){t&&(e.firstPurchased=!1),e.inited||(e.inited=!0)}),t()})},e.prototype.canBuyFirstDeal=function(){return new Promise(function(e){FBInstant.payments.getPurchasesAsync().then(function(t){if(t&&t.length>0)for(var o=0;o<t.length;o++)if("first_purchase"==t[o].productID)return void e(!1);e(!0)}).catch(function(t){console.log("getPurchasesAsync",t),e(!1)})})},e.prototype.purchaseAsync=function(e,t){var o=this;if(this.purchases.has(e)){var r=this.purchases.get(e);this.restorePurchase(r)}else FBInstant.payments.purchaseAsync({productID:e,developerPayload:t||"Cyber"}).then(function(e){o.testMode||o.verifyPayment(e)}).catch(function(e){cc.game.emit(n.cyberGame.event.IAPEvent.PURCHASE_PRODUCT,{error:!0,errorMsg:e.message})})},e.prototype.restorePurchase=function(e){this.testMode||this.verifyPayment(e)},e.prototype.onExtensionResponse=function(e){"fbinstant.verifyPayment"==e.cmd?this.handleVerifyPayment(e):"payment.verify"==e.cmd&&this.handleVerifyPayment(e)},e.prototype.handleVerifyPayment=function(e){var t=this,o=e.params.containsKey("productID")?e.params.getUtfString("productID"):"",r=e.params.getBool("success");if(r){var a={error:!1,coin:e.params.getLong("coin")};"first_purchase"==o&&(a.avatarId=e.params.getInt("avatarId"),a.productID=o,this.firstPurchased=!0),cc.game.emit(n.cyberGame.event.IAPEvent.PURCHASE_PRODUCT,a)}else cc.game.emit(n.cyberGame.event.IAPEvent.PURCHASE_PRODUCT,{error:!0,errorMsg:e.params.getUtfString("errorMsg")});if(r||e.params.containsKey("errorCode")&&6==e.params.getInt("errorCode")){if("first_purchase"==o)return;e.params.containsKey("purchaseToken")&&FBInstant.payments.consumePurchaseAsync(e.params.getUtfString("purchaseToken")).then(function(){t.purchases.clear(),cc.game.emit(n.cyberGame.event.IAPEvent.CONSUME_PURCHASE),"xmas_1_99"==o&&(CyberGlobals.noel_1_99=(new Date).getFullYear(),FBInstant.player.setDataAsync({noel_1_99:CyberGlobals.noel_1_99})),console.log("consumePurchaseAsync resolved")}).catch(function(e){cc.game.emit(n.cyberGame.event.IAPEvent.CONSUME_PURCHASE),console.log("consumePurchaseAsync error",e)})}},e.prototype.getPurchasesAsync=function(e){var t=this;FBInstant.payments.getPurchasesAsync().then(function(o){if(t.purchases.clear(),o&&o.length>0)for(var n=0;n<o.length;n++){var r=o[n];t.purchases.set(r.productID,r)}e(t.purchases)}).catch(function(){e(t.purchases)})},e.prototype.verifyPayment=function(e){if(n.cyberGame.socket.isConnected){var t=new SFS2X.SFSObject;t.putUtfString("signedRequest",e.signedRequest),n.cyberGame.socket.send(new SFS2X.ExtensionRequest("payment.verify",t))}},e.prototype.updateCatalog=function(){var e=this;FBInstant.payments.getCatalogAsync().then(function(t){if(t.length>0)for(var o=0;o<t.length;o++)e.catalog.set(t[o].productID,t[o])})},e.prototype.getProductInfo=function(e){return this.catalog.get(e)},e.prototype.getPurchase=function(e){return this.purchases.get(e)},e.prototype.enableTestMode=function(){this.testMode=!0},e.instance=new e,e}();o.default=a,cc._RF.pop()},{"../CyberGame":"CyberGame","../entities/PromotionEntry":"PromotionEntry"}],IAPPopup:[function(e,t,o){"use strict";cc._RF.push(t,"5a371rVr/BFtIr4tv0vkNUj","IAPPopup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=e("../component/OverlayLoader"),c=e("../component/ShopItem"),u=cc._decorator,l=u.ccclass,p=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.avatarScrollView=null,t.avatarRowPrefab=null,t.avatarAtlas=null,t.shopItems=[],t.overlayLoader=null,t.defaultBoxId=31,t.map=new Map,t}return r(t,e),t.prototype.start=function(){for(var e=0;e<this.shopItems.length;e++){var t=this.shopItems[e],o=i.cyberGame.iap.getProductInfo(t.productId);o?(null!=i.cyberGame.iap.getPurchase(t.productId)?t.updatePrice("Restore"):t.updatePrice(o.price),t.buyButton.node.on("click",this.onBuyClick,this)):t.node.active=!1}var n=this.node.getChildByName("profile");n.getChildByName("playerName").getComponent(cc.Label).string=FBInstant.player.getName(),n.getChildByName("profilegold").getChildByName("coin").getComponent(cc.Label).string=i.cyberGame.utils.shortenLargeNumber(i.cyberGame.coin(),2),i.cyberGame.loadAvatar(FBInstant.player.getPhoto(),n.getChildByName("avatar"),100)},t.prototype.onEnable=function(){i.cyberGame.socket.addEventListener(SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdate,this),cc.game.on(i.cyberGame.event.IAPEvent.PURCHASE_PRODUCT,this.onPurchaseProduct,this),cc.game.on(i.cyberGame.event.IAPEvent.CONSUME_PURCHASE,this.onConsumePurchase,this),cc.game.emit(i.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!0,!0)},t.prototype.onDisable=function(){i.cyberGame.socket.removeEventListener(SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdate),cc.game.off(i.cyberGame.event.IAPEvent.PURCHASE_PRODUCT,this.onPurchaseProduct,this),cc.game.off(i.cyberGame.event.IAPEvent.CONSUME_PURCHASE,this.onConsumePurchase,this),cc.game.emit(i.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!1,!0)},t.prototype.onUserVariablesUpdate=function(e){if(e.user.isItMe&&-1!=e.changedVars.indexOf("coin")){var t=e.user.getVariable("coin").value;this.node.getChildByName("profile").getChildByName("profilegold").getChildByName("coin").getComponent(cc.Label).string=i.cyberGame.utils.shortenLargeNumber(t,2)}},t.prototype.onBuyClick=function(e){i.cyberGame.audio.playButton(),this.overlayLoader=i.cyberGame.createOverlay(),this.node.addChild(this.overlayLoader);var t=e.node.parent.getComponent(c.default).productId;i.cyberGame.iap.purchaseAsync(t,"Kaeng")},t.prototype.onPurchaseProduct=function(e){if(this.overlayLoader&&this.overlayLoader.getComponent(s.default).close(),e.error)i.cyberGame.openCommonPopup({content:e.errorMsg});else{var t=i.cyberGame.text("PAYMENT_SUCCESS",i.cyberGame.utils.formatCoinWithCommas(e.coin));i.cyberGame.openCommonPopup({content:t})}},t.prototype.onConsumePurchase=function(){var e=this;i.cyberGame.iap.getPurchasesAsync(function(){try{for(var t=0;t<e.shopItems.length;t++){var o=e.shopItems[t],n=i.cyberGame.iap.getProductInfo(o.productId);n&&(null!=i.cyberGame.iap.getPurchase(o.productId)?o.updatePrice("Restore"):o.updatePrice(n.price))}}catch(r){console.log(r)}})},t.prototype.closePopup=function(){i.cyberGame.audio.playButton(),this.node.destroy()},a([p(cc.ScrollView)],t.prototype,"avatarScrollView",void 0),a([p(cc.Prefab)],t.prototype,"avatarRowPrefab",void 0),a([p(cc.SpriteAtlas)],t.prototype,"avatarAtlas",void 0),a([p({type:[c.default]})],t.prototype,"shopItems",void 0),a([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../CyberGame":"CyberGame","../component/OverlayLoader":"OverlayLoader","../component/ShopItem":"ShopItem"}],InGameChat:[function(e,t,o){"use strict";cc._RF.push(t,"5d65f7NRNRIzpdINZ8nzDY6","InGameChat");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../main/CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.msgView=null,t.buttonView=null,t.inputText=null,t.msgFont=null,t}return r(t,e),t.prototype.addMessage=function(e,t){var o=new cc.Node;o.setAnchorPoint(0,.5),o.x=-this.msgView.content.getContentSize().width/2;var n=o.addComponent(cc.RichText);n.string="<color=#c45e00>"+e.trim()+":</c> <color=#b1b1b1>"+t+"</color>",n.font=this.msgFont,n.fontSize=20,n.lineHeight=25,this.msgView.content.addChild(o),this.msgView.content.childrenCount>60&&this.msgView.content.removeChild(this.msgView.content.children[0],!0)},t.prototype.send=function(e){i.cyberGame.socket.send(new SFS2X.PublicMessageRequest(e,null,i.cyberGame.socket.lastJoinedRoom)),this.closePopup()},t.prototype.onSend=function(){i.cyberGame.audio.playButton();var e=this.inputText.string.trim();0==e.length&&(this.inputText.string=""),e.length>0&&(this.send(e),this.inputText.string="")},t.prototype.onQuickButtonClick=function(e){i.cyberGame.audio.playButton();var t=e.currentTarget.getChildByName("txt").getComponent(cc.Label).string;t.length>0&&this.send(t)},t.prototype.show=function(){this.node.active=!0,this.buttonView.scrollToTop()},t.prototype.closePopup=function(){this.node.active=!1},a([u(cc.ScrollView)],t.prototype,"msgView",void 0),a([u(cc.ScrollView)],t.prototype,"buttonView",void 0),a([u(cc.EditBox)],t.prototype,"inputText",void 0),a([u(cc.Font)],t.prototype,"msgFont",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../main/CyberGame":"CyberGame"}],InitGameHandler:[function(e,t,o){"use strict";cc._RF.push(t,"ab862gInpVMLrG3Z1eiQL4s","InitGameHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../main/CyberGame"),i=e("../view/GameScene"),s=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.execute=function(){var e=this;cc.Label.clearCharCache(),cc.director.loadScene("game",function(t,o){t||(e.game.screen=o.getChildByName("Canvas").getComponent(i.default),e.game.screen.setGame(e.game),e.game.screen.node.once(a.cyberGame.event.GameEvent.GAMESCENE_LAUNCHED,function(){e.game.screenReady=!0,e.game.releaseCurrentQueue()}),e.game.screen.node.on(a.cyberGame.event.GameEvent.QUEUE_COMPLETE,function(){e.game.releaseCurrentQueue()}),a.cyberGame.storage.put("currentScene","game"),a.cyberGame.audio.pauseMusic())})},t}(e("./AbstractHandler").default);o.default=s,cc._RF.pop()},{"../../main/CyberGame":"CyberGame","../view/GameScene":"GameScene","./AbstractHandler":"AbstractHandler"}],InterstitialManager:[function(e,t,o){"use strict";cc._RF.push(t,"f845aQzvolAyJlpi+xlrFOf","InterstitialManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../CyberGame"),r=null,a=function(){function e(){this.inited=!1,this.adInstance=null,this.ready=!1,this.loading=!1,this.blocked=!1,this.interstitialCounter=0,this.lastShowingTime=0,this.maxShow=1e5,this.interstitialDate=null,this.inited=!1,this.adInstance=null,this.ready=!1,this.loading=!1,this.blocked=!1,this.interstitialCounter=0,this.lastShowingTime=0}return Object.defineProperty(e,"instance",{get:function(){return r||(r=new e),r},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this;n.cyberGame.isAdRemoved()||(this.inited?this.load():FBInstant.player.getDataAsync(["interstitialDate","interstitialCounter","lastShowingTime"]).then(function(e){if(!t.inited){t.inited=!0,t.interstitialDate=(n=new Date,new Date(n.getTime()-6e4*n.getTimezoneOffset()).toISOString().split("T")[0]);var o=!1;e.lastShowingTime&&(t.lastShowingTime=parseInt(e.lastShowingTime)),e.interstitialDate?(e.interstitialCounter&&(t.interstitialCounter=parseInt(e.interstitialCounter)),e.interstitialDate!=t.interstitialDate&&(t.interstitialCounter=0,o=!0)):o=!0,o&&FBInstant.player.setDataAsync({interstitialDate:t.interstitialDate,interstitialCounter:t.interstitialCounter}),t.load()}var n}).catch(function(){setTimeout(function(){e.instance.init()},5e3)}))},e.prototype.load=function(){this.interstitialCounter>=this.maxShow||this.ready||this.loading||(this.loading=!0,this.loadNormalInterstitial())},e.prototype.loadNormalInterstitial=function(){var e=this;FBInstant.getInterstitialAdAsync(CyberGlobals.adConfig.interstitialId).then(function(t){return e.adInstance=t,e.adInstance.loadAsync()}).then(function(){e.loading=!1,e.ready=!0}).catch(function(t){e.handleLoadError(t,2),console.log("loadNormalInterstitial error",t)})},e.prototype.handleLoadError=function(e,t){var o=this;setTimeout(function(){null!=o.adInstance&&o.handleAdsNoFill(t)},3e4)},e.prototype.handleAdsNoFill=function(e){var t=this;e>3?this.blocked=!0:this.adInstance.loadAsync().then(function(){t.loading=!1,t.ready=!0}).catch(function(o){t.handleLoadError(o,e+1)})},e.prototype.canShow=function(){return this.ready},e.prototype.show=function(){var e=this;this.interstitialCounter>=this.maxShow||this.ready&&this.adInstance.showAsync().then(function(){e.adInstance=null,e.ready=!1,e.interstitialCounter=e.interstitialCounter+1,e.lastShowingTime=(new Date).getTime(),FBInstant.player.setDataAsync({interstitialCounter:e.interstitialCounter,lastShowingTime:e.lastShowingTime}),n.cyberGame.audio.resumeMusic()}).catch(function(){n.cyberGame.audio.resumeMusic(),e.adInstance=null,e.ready=!1})},e.prototype.showAsync=function(){var e=this;return new Promise(function(t){e.adInstance.showAsync().then(function(){e.adInstance=null,e.ready=!1,e.interstitialCounter=e.interstitialCounter+1,e.lastShowingTime=(new Date).getTime(),FBInstant.player.setDataAsync({interstitialCounter:e.interstitialCounter,lastShowingTime:e.lastShowingTime}),n.cyberGame.audio.resumeMusic(),t()}).catch(function(){e.adInstance=null,e.ready=!1,n.cyberGame.audio.resumeMusic(),t()})})},e}();o.default=a,cc._RF.pop()},{"../CyberGame":"CyberGame"}],InviteButton:[function(e,t,o){"use strict";cc._RF.push(t,"4c945NBcahL6Ld1JKKB2lc6","InviteButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../main/CyberGame"),s=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){this.node.once("click",this.onInvite,this)},t.prototype.onInvite=function(){var e=this;i.cyberGame.audio.playButton(),cc.resources.load("images/shareimage",cc.Texture2D,function(t,o){if(t)e.node.once("click",e.onInvite,e);else{o.packable=!1;var n=document.createElement("canvas"),r=n.getContext("2d");n.width=960,n.height=544,r.drawImage(o.getHtmlElementObj(),0,0,960,544),FBInstant.inviteAsync({image:n.toDataURL(),text:'"'+FBInstant.player.getName()+'" invited you to play',data:{guserid:i.cyberGame.player.guserid}}).then(function(){e.node.once("click",e.onInvite,e)}).catch(function(){e.node.once("click",e.onInvite,e)})}})},a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../../../main/CyberGame":"CyberGame"}],InvitePopup:[function(e,t,o){"use strict";cc._RF.push(t,"1743fYQ2XhJyIi4SI0VWJ3E","InvitePopup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inviteButton=null,t}return r(t,e),t.prototype.start=function(){this.inviteButton.node.once("click",this.onInvite,this)},t.prototype.onEnable=function(){var e=this.node.getChildByName("invite_popup_bg");e.setScale(.8),cc.tween(e).to(.8,{scale:1},{easing:"elasticOut"}).start()},t.prototype.onInvite=function(){var e=this;i.cyberGame.audio.playButton(),cc.resources.load("images/shareimage",cc.Texture2D,function(t,o){if(t)e.inviteButton.node.once("click",e.onInvite,e);else{var n=document.createElement("canvas"),r=n.getContext("2d");n.width=960,n.height=544,r.drawImage(o.getHtmlElementObj(),0,0,960,544),FBInstant.inviteAsync({image:n.toDataURL(),text:'"'+FBInstant.player.getName()+'" invited you to play',data:{guserid:i.cyberGame.player.guserid}}).then(function(){e.inviteButton.node.once("click",e.onInvite,e)})}})},t.prototype.closePopup=function(){i.cyberGame.audio.playButton(),this.node.destroy()},a([u(cc.Button)],t.prototype,"inviteButton",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../CyberGame":"CyberGame"}],KhaengHandler:[function(e,t,o){"use strict";cc._RF.push(t,"001a1zK2vVGW5yUe5VxmB2P","KhaengHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=e("../constants/GameState"),i=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.execute=function(e){var t=this;if(this.game.inited&&this.game.gameState==a.GameState.PLAYING&&!e.containsKey("error")){var o=e.getUtfString("guserid");if(this.game.getUser(o)){this.game.khaengId=o,this.screen.actionButtonLayer.hide(),this.screen.seatManager.hideTimers();var n=this.screen.seatManager.getSeatByGuserid(o);this.game.isMyTurn()&&n.cardControl.unChoose(),this.screen.deskLayer.khaengPopup.show(n.index,function(){t.game.releaseCurrentQueue()})}else this.game.releaseCurrentQueue()}else this.game.releaseCurrentQueue()},t}(e("./AbstractHandler").default);o.default=i,cc._RF.pop()},{"../constants/GameState":"GameState","./AbstractHandler":"AbstractHandler"}],KhaengPopup:[function(e,t,o){"use strict";cc._RF.push(t,"c4c8cspQJlB+aA8+6K4LXDv","KhaengPopup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../main/CyberGame"),s=cc._decorator,c=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wlSpine=null,t}return r(t,e),t.prototype.start=function(){},t.prototype.show=function(e,t){i.cyberGame.audio.playSound("kshow");var o=this.getPosCfg(e),n=this.node.getChildByName("so_diem");n.scale=o.scale,n.x=o.x,n.y=o.y;var r=n.getComponent("sp.Skeleton");r.setAnimation(0,"animation",!1),n.active=!0,r.setCompleteListener(function(){t(),r.clearTrack(0),n.active=!1})},t.prototype.showWin=function(e,t,o){var n=this,r=this.getWLPosCfg(e),a=this.node.getChildByName("kwin");a.scale=r.scale,a.x=r.x,a.y=r.y,e>0&&(4==t?a.x=e<3?r.x-13:r.x+13:3==t&&(a.x=e<3?r.x-26:r.x+26));var i=a.getComponent("sp.Skeleton");this.wlSpine=i,i.setAnimation(0,"animation_win_min",!1),a.active=!0,i.setCompleteListener(function(){o(),n.hideWinLose()})},t.prototype.showLose=function(e,t,o){var n=this,r=this.getWLPosCfg(e),a=this.node.getChildByName("klose");a.scale=r.scale,a.x=r.x,a.y=r.y+20,e>0&&(4==t?a.x=e<3?r.x-13:r.x+13:3==t&&(a.x=e<3?r.x-26:r.x+26));var i=a.getComponent(sp.Skeleton);this.wlSpine=i,i.setAnimation(1,"animation_thua_min",!1),a.active=!0,i.setCompleteListener(function(){o(),n.hideWinLose()})},t.prototype.hideWinLose=function(){null!=this.wlSpine&&(this.wlSpine.clearTrack(0),this.wlSpine.node.active=!1,this.wlSpine=null)},t.prototype.getPosCfg=function(e){return 0==e?{x:-17,y:14,scale:.7}:1==e?{x:-366.681,y:63.163,scale:.3}:2==e?{x:-302.672,y:274.727,scale:.3}:3==e?{x:284.672,y:274.727,scale:.3}:4==e?{x:351.681,y:63.163,scale:.3}:void 0},t.prototype.getWLPosCfg=function(e){return 0==e?{x:0,y:-51,scale:1}:1==e?{x:-317.219,y:-32.704,scale:.7}:2==e?{x:-252.506,y:183.343,scale:.7}:3==e?{x:243.506,y:183.343,scale:.7}:4==e?{x:305.219,y:-32.704,scale:.7}:void 0},t.prototype.hide=function(){this.node.getChildByName("bg").active=!1},a([c],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../../../main/CyberGame":"CyberGame"}],LeaderboardPopup:[function(e,t,o){"use strict";cc._RF.push(t,"ad234SGBEVJWpVq0mnwpUX/","LeaderboardPopup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i,s=e("../CyberGame"),c=e("../component/OverlayLoader"),u=cc._decorator,l=u.ccclass,p=u.property;(function(e){e.INCOME="income",e.RANK="rank"})(i||(i={}));var d=null,h=0,y=0,f=!1,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listView=null,t.entryPrefab=null,t.incomeButton=null,t.rankButton=null,t.r1SF=null,t.r2SF=null,t.r3SF=null,t.coinSF=null,t.winSF=null,t.currentTab=i.INCOME,t.overlayLoader=null,t}return r(t,e),t.prototype.start=function(){if(null==d?((d=new Map).set(i.INCOME,[]),d.set(i.RANK,[])):(y>0&&this.isRequestingNewEntriesAllowed(y)&&(d.get(i.INCOME).length=0),h>0&&this.isRequestingNewEntriesAllowed(h)&&(d.get(i.RANK).length=0)),f=!1,this.showOverlayLoader(),this.getLeaderboardAsync(this.currentTab,!0),"th"==s.cyberGame.lang.code){var e=this.node.getChildByName("leaderboard_popup_bg").getChildByName("title");e.y=e.y+15}},t.prototype.onEnable=function(){s.cyberGame.socket.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponse,this),cc.game.emit(s.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!0)},t.prototype.onDisable=function(){s.cyberGame.socket.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponse),cc.game.emit(s.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!1)},t.prototype.isRequestingNewEntriesAllowed=function(e){return Date.now()-e>=12e4},t.prototype.getLeaderboardAsync=function(e,t){var o=d.get(e);if(0!=o.length&&t)this.hideOverlayLoader(),this.showEntries(0);else if(!f&&o.length<50){f=!0;var n=new SFS2X.SFSObject;e==i.RANK?s.cyberGame.socket.send(new SFS2X.ExtensionRequest("leaderboard.getTopWinner",n)):e==i.INCOME&&s.cyberGame.socket.send(new SFS2X.ExtensionRequest("leaderboard.getTopIncome",n))}},t.prototype.onExtensionResponse=function(e){if(e.params.containsKey("entries")){var t=e.params.getSFSArray("entries");if(t.size()>0){for(var o="leaderboard.getTopIncome"==e.cmd?i.INCOME:i.RANK,n=d.get(o).length,r=0;r<t.size();r++){var a=t.getSFSObject(r);d.get(o).push({guserid:a.getLong("guserid"),name:a.getUtfString("name"),avatar:a.containsKey("avatar")?a.getUtfString("avatar"):null,rank:n+r+1,score:a.containsKey("game_win")?a.getInt("game_win"):a.getLong("coin_win")})}o==this.currentTab&&this.showEntries(n),"leaderboard.getTopWinner"==e.cmd?h=Date.now():"leaderboard.getTopIncome"==e.cmd&&(y=Date.now()),f=!1}this.hideOverlayLoader()}},t.prototype.showEntries=function(){var e=d.get(this.currentTab);if(0!=e.length){for(var t=0,o=0;o<e.length;o++){var n=e[o],r=cc.instantiate(this.entryPrefab);r.setPosition(0,t),this.setRank(r,n.rank),this.setNameAndAvatar(r,n.name,n.avatar),this.setEntryScore(r,n.score),this.listView.content.addChild(r),t-=66}t=-t,this.listView.content.setContentSize(706,t)}},t.prototype.setEntryScore=function(e,t){e.getChildByName("iconVal").getComponent(cc.Sprite).spriteFrame=this.currentTab==i.INCOME?this.coinSF:this.winSF;var o=this.currentTab==i.INCOME?s.cyberGame.utils.shortenLargeNumber(t,0):String(t);e.getChildByName("textVal").getComponent(cc.Label).string=o},t.prototype.setNameAndAvatar=function(e,t,o){try{t&&(e.getChildByName("playerName").active=!0,e.getChildByName("playerName").getComponent(cc.Label).string=t),s.cyberGame.loadAvatar(o,e.getChildByName("avatar"),54)}catch(n){console.log(n)}},t.prototype.setRank=function(e,t){if(t<4){e.getChildByName("icon").active=!0;var o=null;1==t?o=this.r1SF:2==t?o=this.r2SF:3==t&&(o=this.r3SF),e.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=o}else e.getChildByName("rank").active=!0,e.getChildByName("rank").getComponent(cc.Label).string=String(t)},t.prototype.onTabClick=function(e,t){var o=this;s.cyberGame.audio.playButton(),t!=this.currentTab&&(this.currentTab=t,t==i.INCOME?(this.incomeButton.node.getChildByName("income_button").active=!0,this.incomeButton.node.getChildByName("income_button_inactive").active=!1,this.rankButton.node.getChildByName("topwin_button").active=!1,this.rankButton.node.getChildByName("topwin_button_inactive").active=!0):t==i.RANK&&(this.incomeButton.node.getChildByName("income_button").active=!1,this.incomeButton.node.getChildByName("income_button_inactive").active=!0,this.rankButton.node.getChildByName("topwin_button").active=!0,this.rankButton.node.getChildByName("topwin_button_inactive").active=!1),this.listView.content.removeAllChildren(),this.showOverlayLoader(),this.scheduleOnce(function(){f&&(f=!1),o.getLeaderboardAsync(o.currentTab,!0)},.3))},t.prototype.showOverlayLoader=function(){this.overlayLoader||(this.overlayLoader=s.cyberGame.createOverlay(),this.node.addChild(this.overlayLoader))},t.prototype.hideOverlayLoader=function(){this.overlayLoader&&(this.overlayLoader.getComponent(c.default).close(),this.overlayLoader=null)},t.prototype.closePopup=function(){s.cyberGame.audio.playButton(),this.node.destroy()},a([p(cc.ScrollView)],t.prototype,"listView",void 0),a([p(cc.Prefab)],t.prototype,"entryPrefab",void 0),a([p(cc.Button)],t.prototype,"incomeButton",void 0),a([p(cc.Button)],t.prototype,"rankButton",void 0),a([p(cc.SpriteFrame)],t.prototype,"r1SF",void 0),a([p(cc.SpriteFrame)],t.prototype,"r2SF",void 0),a([p(cc.SpriteFrame)],t.prototype,"r3SF",void 0),a([p(cc.SpriteFrame)],t.prototype,"coinSF",void 0),a([p(cc.SpriteFrame)],t.prototype,"winSF",void 0),a([l],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../CyberGame":"CyberGame","../component/OverlayLoader":"OverlayLoader"}],LightingCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"62858hpt3pBTp7bEf5hMrHz","LightingCtrl");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){this.spine=this.getComponent(sp.Skeleton),this.spine.setAnimation(0,this.animName,!1)},t.prototype.show=function(e,t,o,n){this.node.x=e,this.node.y=t,this.node.angle=o,this.animName=n,this.node.active=!0},a([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],LightingLayer:[function(e,t,o){"use strict";cc._RF.push(t,"b2ffeersYlECrx5PTbTgjxu","LightingLayer");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../player/SetPositionHelper"),s=e("./FollowText"),c=e("./LightingCtrl"),u=cc._decorator,l=u.ccclass,p=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lightingPrefab=null,t.followPrefab=null,t.followTextPool=new cc.NodePool,t}return r(t,e),t.prototype.start=function(){var e=this;cc.resources.load("gameprefab/FollowText",cc.Prefab,function(t,o){if(!t&&cc.isValid(e.node)){e.followPrefab=o;var n=e.createTextNode();e.followTextPool.put(n)}})},t.prototype.getFollowTextNode=function(){return this.followTextPool.size()>0?this.followTextPool.get():this.createTextNode()},t.prototype.createTextNode=function(){var e=cc.instantiate(this.followPrefab);return e.getComponent(s.default).followTextPool=this.followTextPool,e},t.prototype.show=function(e,t,o){var n=i.default.getPosition(e,t);if(n){var r=n.min?"animation_min":"animation";r+=o?"2":"1";var a=cc.instantiate(this.lightingPrefab);return a.parent=this.node,a.getComponent(c.default).show(n.x,n.y,n.a,r),a}return null},t.prototype.showTextAtAvatar=function(e){if(this.followPrefab){var t=this.getFollowTextNode(),o=e.node.x-2.44,n=e.node.y-26.555;t.parent=this.node.getChildByName("text"),t.getComponent(s.default).show(o,n)}},a([p(cc.Prefab)],t.prototype,"lightingPrefab",void 0),a([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../player/SetPositionHelper":"SetPositionHelper","./FollowText":"FollowText","./LightingCtrl":"LightingCtrl"}],LoadSpine:[function(e,t,o){"use strict";cc._RF.push(t,"3b5917e1Q9N6ZvWTJjp6N4v","LoadSpine");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spineNode=null,t.imgNode=null,t.spinePath="",t.animName="",t}return r(t,e),t.prototype.start=function(){var e=this;"th"==i.cyberGame.lang.code&&cc.resources.load(this.spinePath,sp.SkeletonData,function(t,o){if(t)console.log(t);else if(cc.isValid(e.node)){e.spineNode.active=!0;var n=e.spineNode.getComponent("sp.Skeleton");n.skeletonData=o,n.setAnimation(0,e.animName,!0),e.imgNode.destroy()}})},a([u(cc.Node)],t.prototype,"spineNode",void 0),a([u(cc.Node)],t.prototype,"imgNode",void 0),a([u],t.prototype,"spinePath",void 0),a([u],t.prototype,"animName",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../CyberGame":"CyberGame"}],LobbyChat:[function(e,t,o){"use strict";cc._RF.push(t,"09e21jyHTBCrIWV+S394RtQ","LobbyChat");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=e("./ChatContent"),c=cc._decorator,u=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollView=null,t.inputText=null,t.chatRowPrefab=null,t.chatRowMyPrefab=null,t.lastSentId="",t}return r(t,e),t.prototype.start=function(){var e=i.cyberGame.chat.messages();if(0==this.lastSentId.length&&e.length>0){for(var t=0;t<e.length;t++)this.updatePublicMessage(e[t],!0);this.scrollView.content.getComponent(cc.Layout).updateLayout(),this.scrollView.scrollToBottom(.5)}},t.prototype.onEnable=function(){cc.game.emit(i.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!0)},t.prototype.onDisable=function(){cc.game.emit(i.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!1)},t.prototype.updatePublicMessage=function(e,t){var o=e.guserid!=i.cyberGame.player.playerId?cc.instantiate(this.chatRowPrefab):cc.instantiate(this.chatRowMyPrefab),n=o.getComponent(s.default);n.setMsg(e.content),this.lastSentId!=e.guserid?(n.setPlayerName(e.name),n.setAvatar(e.avatar)):n.isOnlyMsgEnabled=!0,this.scrollView.content.addChild(o),this.scrollView.content.childrenCount>50&&this.scrollView.content.removeChild(this.scrollView.content.children[0],!0),t||this.scrollView.scrollToBottom(),this.lastSentId=e.guserid},t.prototype.playAudio=function(){i.cyberGame.audio.playButton()},t.prototype.onSend=function(){var e=this.inputText.string;e.length>0&&(i.cyberGame.chat.send(e),this.inputText.string="")},t.prototype.show=function(){this.node.active=!0},t.prototype.closePopup=function(){this.playAudio(),this.node.active=!1},a([l(cc.ScrollView)],t.prototype,"scrollView",void 0),a([l(cc.EditBox)],t.prototype,"inputText",void 0),a([l(cc.Prefab)],t.prototype,"chatRowPrefab",void 0),a([l(cc.Prefab)],t.prototype,"chatRowMyPrefab",void 0),a([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../CyberGame":"CyberGame","./ChatContent":"ChatContent"}],LobbyController:[function(e,t,o){"use strict";cc._RF.push(t,"e99eaKwNDtPyrS8tbEhumo6","LobbyController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../CyberGame"),r=function(){function e(){this.minBet=5e3,this.miniumMoneyCondition=5}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.sendRequest=function(e){var t=this;n.cyberGame.isGameAssetReady()?e():setTimeout(function(){t.sendRequest(e)},100)},e.prototype.canPlay=function(e){var t=void 0===e||null==e?this.minBet:e;return n.cyberGame.coin()>=t*this.miniumMoneyCondition},e.prototype.sendFindGameRequest=function(){this.sendRequest(function(){n.cyberGame.socket.send(new SFS2X.ExtensionRequest("findGame"))})},e.prototype.sendFindGameRequestExcludeId=function(e){this.sendRequest(function(){var t=new SFS2X.SFSObject;t.putInt("id",e),n.cyberGame.socket.send(new SFS2X.ExtensionRequest("findGame",t))})},e.prototype.sendCreateFriendGameRequest=function(e){this.sendRequest(function(){var t=new SFS2X.SFSObject;t.putLong("bet",e),t.putBool("friendMode",!0),n.cyberGame.socket.send(new SFS2X.ExtensionRequest("createGame",t))})},e.prototype.joinRoom=function(e){this.sendRequest(function(){try{var t=new SFS2X.SFSObject;t.putInt("roomId",e),n.cyberGame.socket.send(new SFS2X.ExtensionRequest("joinGame",t))}catch(o){console.log("LobbyController.joinRoom",o)}})},e.prototype.resumeRoom=function(e){this.sendRequest(function(){try{var t=new SFS2X.SFSObject;t.putInt("roomId",e),n.cyberGame.socket.send(new SFS2X.ExtensionRequest("resumeGame",t))}catch(o){console.log("LobbyController.resumeGame",o)}})},e.prototype.joinPrivateRoom=function(e){this.sendRequest(function(){var t=new SFS2X.SFSObject;t.putInt("roomId",e),n.cyberGame.socket.send(new SFS2X.ExtensionRequest("joinFriendGame",t))})},e.instance=null,e}();o.default=r,cc._RF.pop()},{"../CyberGame":"CyberGame"}],LobbyCreateGamePopup:[function(e,t,o){"use strict";cc._RF.push(t,"d594euLfKtN04uLci1bcdZT","LobbyCreateGamePopup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.betSlider=null,t.betText=null,t.currentBet=5e3,t.ratioMap=[{value:5e3},{value:1e4},{value:2e4},{value:5e4},{value:1e5},{value:2e5},{value:3e5},{value:5e5},{value:1e6},{value:2e6},{value:5e6}],t}return r(t,e),t.prototype.start=function(){},t.prototype.onSlider=function(){var e=Math.round(100*this.betSlider.progress/10);this.currentBet=this.ratioMap[e].value,this.betText.string=i.cyberGame.utils.shortenLargeNumber(this.ratioMap[e].value,0)},t.prototype.closeCreateGamePopup=function(){i.cyberGame.audio.playButton()},t.prototype.closePopup=function(){i.cyberGame.audio.playButton(),this.hide()},t.prototype.openPopup=function(){i.cyberGame.audio.playButton(),this.node.active=!0;var e=this.node.getChildByName("creategame_popup_bg");e.setScale(.8),cc.tween(e).to(.8,{scale:1},{easing:"elasticOut"}).start()},t.prototype.hide=function(){this.node.active=!1},a([u(cc.Slider)],t.prototype,"betSlider",void 0),a([u(cc.Label)],t.prototype,"betText",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../CyberGame":"CyberGame"}],LobbyScreen:[function(e,t,o){"use strict";cc._RF.push(t,"f120adAck1HFJdZTVoD/nZo","LobbyScreen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=e("../component/RoomItem"),c=e("../component/OverlayLoader"),u=e("../popup/LobbyCreateGamePopup"),l=e("../component/LobbyTabs"),p=e("../../game/view/component/Notification"),d=cc._decorator,h=d.ccclass,y=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.roomListView=null,t.createGamePopup=null,t.roomItemPrefab=null,t.homeButton=null,t.avatar=null,t.profileName=null,t.profileCoin=null,t.lobbyTabs=null,t.notification=null,t.overlayLoader=null,t.refreshAtLeastOnce=!1,t}return r(t,e),t.prototype.start=function(){var e=this;this.updateLobbyNodes(!1),this.homeButton.node.once("click",function(){i.cyberGame.storage.put("currentLobby",1),i.cyberGame.audio.playButton(),e.node.destroy()}),i.cyberGame.storage.put("currentLobby",2),i.cyberGame.loadAvatar(FBInstant.player.getPhoto(),this.avatar,102),this.profileName.string=FBInstant.player.getName(),this.profileCoin.string=i.cyberGame.utils.shortenLargeNumber(i.cyberGame.coin(),2),this.scheduleOnce(function(){e.sendSubscribeRequest(i.cyberGame.storage.get("currentLobbyGroup"))},.3),this.lobbyTabs.node.on(i.cyberGame.event.ON_LOBBY_TAB_CHANGE,this.onTabChange,this),this.lobbyTabs.setActiveTab(i.cyberGame.storage.get("currentLobbyGroup"))},t.prototype.onEnable=function(){i.cyberGame.socket.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponse,this),cc.game.emit(i.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!0,!0)},t.prototype.onDisable=function(){i.cyberGame.socket.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponse),cc.game.emit(i.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!1,!0)},t.prototype.onTabChange=function(e){var t=this;this.roomListView.content.removeAllChildren(),this.showOverlayLoader(),this.scheduleOnce(function(){i.cyberGame.storage.put("currentLobbyGroup",e),t.sendSubscribeRequest(e)},.3)},t.prototype.sendSubscribeRequest=function(e){var t=new SFS2X.SFSObject;t.putUtfString("gameGroup",e),i.cyberGame.socket.send(new SFS2X.ExtensionRequest("getRoomList",t))},t.prototype.refreshRoomList=function(e){if(e.length>0){for(var t=0;t<e.length;t++)(o=e[t]).userCount<5&&((n=cc.instantiate(this.roomItemPrefab)).getComponent(s.default).init(this,o),this.roomListView.content.addChild(n));for(t=0;t<e.length;t++){var o,n;5==(o=e[t]).userCount&&((n=cc.instantiate(this.roomItemPrefab)).getComponent(s.default).init(this,o),this.roomListView.content.addChild(n))}this.roomListView.scrollToTop(.1)}},t.prototype.onExtensionResponse=function(e){"joinGameError"==e.cmd?this.handleJoinRoomError(e.params):"createGameError"==e.cmd?this.hideOverlayLoader():"getRoomList"==e.cmd&&this.updateRoomList(e.params)},t.prototype.updateRoomList=function(e){this.refreshAtLeastOnce?this.hideOverlayLoader():(this.refreshAtLeastOnce=!0,this.node.getChildByName("loadingText").active=!1,this.updateLobbyNodes(!0));var t=[];if(e.containsKey("roomList")){var o=e.getSFSArray("roomList");if(o.size()>0){for(var n=0;n<o.size();n++){var r=o.getSFSObject(n),a={id:r.getInt("id"),userCount:r.getInt("userCount"),bet:r.getLong("bet")};0==a.userCount&&(a.userCount=1),t.push(a)}t.length>1&&(t=this.shuffleArray(t))}}this.refreshRoomList(t)},t.prototype.handleJoinRoomError=function(e){if(this.hideOverlayLoader(),1==e.getInt("errorCode")){var t=e.getLong("bet"),o=i.cyberGame.text("YOU_NEED_AT_LEAST",i.cyberGame.utils.shortenLargeNumber(i.cyberGame.lobbyCtrl.miniumMoneyCondition*t,0));this.showNoti(o)}else this.showNoti(i.cyberGame.text("ROOM_FULL"))},t.prototype.onCreateGame=function(){i.cyberGame.audio.playButton();var e=this.createGamePopup.currentBet;if(i.cyberGame.lobbyCtrl.canPlay(e))this.createGamePopup.hide(),this.showOverlayLoader(),i.cyberGame.lobbyCtrl.sendRequest(function(){var t=new SFS2X.SFSObject;t.putLong("bet",e),i.cyberGame.socket.send(new SFS2X.ExtensionRequest("createGame",t))});else{var t=i.cyberGame.text("YOU_NEED_AT_LEAST",i.cyberGame.utils.shortenLargeNumber(i.cyberGame.lobbyCtrl.miniumMoneyCondition*e,2));this.showNoti(t)}},t.prototype.onQuickPlayRequest=function(){if(i.cyberGame.audio.playButton(),i.cyberGame.lobbyCtrl.canPlay(5e3))this.showOverlayLoader(),i.cyberGame.lobbyCtrl.sendFindGameRequest();else{var e=i.cyberGame.text("YOU_NEED_AT_LEAST",i.cyberGame.utils.shortenLargeNumber(5e3*i.cyberGame.lobbyCtrl.miniumMoneyCondition,0));i.cyberGame.openCommonPopup({content:e})}},t.prototype.updateLobbyNodes=function(e){this.roomListView.node.active=e,this.node.getChildByName("buttons").active=e,this.node.getChildByName("scroll_bg").active=e,this.node.getChildByName("header_titles").active=e,this.node.getChildByName("bottom").active=e,this.node.getChildByName("title").active=e,this.homeButton.node.active=e},t.prototype.showOverlayLoader=function(){this.overlayLoader||(this.overlayLoader=i.cyberGame.createOverlay(),this.node.addChild(this.overlayLoader))},t.prototype.hideOverlayLoader=function(){this.overlayLoader&&(this.overlayLoader.getComponent(c.default).close(),this.overlayLoader=null)},t.prototype.showNoti=function(e){1==this.notification.node.active&&(this.notification.unscheduleAllCallbacks(),this.notification.hide()),this.notification.show(e)},t.prototype.shuffleArray=function(e){var t,o,n;for(n=e.length-1;n>0;n--)t=Math.floor(Math.random()*(n+1)),o=e[n],e[n]=e[t],e[t]=o;return e},a([y(cc.ScrollView)],t.prototype,"roomListView",void 0),a([y(u.default)],t.prototype,"createGamePopup",void 0),a([y(cc.Prefab)],t.prototype,"roomItemPrefab",void 0),a([y(cc.Button)],t.prototype,"homeButton",void 0),a([y(cc.Node)],t.prototype,"avatar",void 0),a([y(cc.Label)],t.prototype,"profileName",void 0),a([y(cc.Label)],t.prototype,"profileCoin",void 0),a([y(l.default)],t.prototype,"lobbyTabs",void 0),a([y(p.default)],t.prototype,"notification",void 0),a([h],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../game/view/component/Notification":"Notification","../CyberGame":"CyberGame","../component/LobbyTabs":"LobbyTabs","../component/OverlayLoader":"OverlayLoader","../component/RoomItem":"RoomItem","../popup/LobbyCreateGamePopup":"LobbyCreateGamePopup"}],LobbyTabs:[function(e,t,o){"use strict";cc._RF.push(t,"0aa8dp2Ri9Fe4HVGRhHYUZV","LobbyTabs");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentTab="beginner",t.tabs=[],t}return r(t,e),t.prototype.start=function(){if("en"==i.cyberGame.lang.code){for(var e=0,t=0;t<this.tabs.length;t++){var o=this.tabs[t],n=o.getChildByName("txt");o.setContentSize(n.width+60,88),e+=o.width}this.node.setContentSize(e,88)}},t.prototype.setActiveTab=function(e){this.currentTab=e,this.node.getChildByName(e).getChildByName("activeTab").active=!0,this.node.getChildByName(e).getChildByName("txt").active=!1},t.prototype.onTabClick=function(e,t){this.currentTab!=t&&(i.cyberGame.audio.playButton(),this.node.getChildByName(this.currentTab).getChildByName("txt").active=!0,this.node.getChildByName(this.currentTab).getChildByName("activeTab").active=!1,this.setActiveTab(t),this.node.emit(i.cyberGame.event.ON_LOBBY_TAB_CHANGE,t))},a([u({type:[cc.Node]})],t.prototype,"tabs",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../CyberGame":"CyberGame"}],LocalizedNode:[function(e,t,o){"use strict";cc._RF.push(t,"09f44Rga1BFf6fY9F8IYDCN","LocalizedNode");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.th=null,t}return r(t,e),t.prototype.start=function(){"th"==i.cyberGame.lang.code&&null!=this.th&&(this.node.getComponent(cc.Sprite).spriteFrame=this.th)},a([u(cc.SpriteFrame)],t.prototype,"th",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../CyberGame":"CyberGame"}],LocalizedRichText:[function(e,t,o){"use strict";cc._RF.push(t,"3ca13MGyjhBuZfrVA5Yb/1T","LocalizedRichText");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.langKey="",t}return r(t,e),t.prototype.start=function(){this.langKey&&this.langKey.length>0&&(this.node.getComponent(cc.RichText).string=i.cyberGame.text(this.langKey))},a([u()],t.prototype,"langKey",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../CyberGame":"CyberGame"}],LocalizedTxt:[function(e,t,o){"use strict";cc._RF.push(t,"c70aedQQfRH5J9x6BH4HuIn","LocalizedTxt");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.langKey="",t}return r(t,e),t.prototype.start=function(){this.langKey&&this.langKey.length>0&&(this.node.getComponent(cc.Label).string=i.cyberGame.text(this.langKey))},a([u()],t.prototype,"langKey",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../CyberGame":"CyberGame"}],Menu:[function(e,t,o){"use strict";cc._RF.push(t,"2bcdbcRqp9DsJWg3Hxk3pGG","Menu");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../main/CyberGame"),s=e("../../SocketControl"),c=cc._decorator,u=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.soundOn=null,t.quitRegistered=!1,t.rulePreloaded=!1,t.ruleClicked=!1,t}return r(t,e),t.prototype.init=function(e){this.gameScene=e},t.prototype.onEnable=function(){this.soundOn.getChildByName("off").active=!i.cyberGame.audio.soundEnabled,this.rulePreloaded||(cc.resources.preload("gameprefab/Rule"+i.cyberGame.lang.code),this.rulePreloaded=!0)},t.prototype.onSoundOn=function(){i.cyberGame.audio.soundEnabled=!i.cyberGame.audio.soundEnabled,this.soundOn.getChildByName("off").active=!i.cyberGame.audio.soundEnabled},t.prototype.onRule=function(){var e=this;i.cyberGame.audio.playButton(),this.hidePopup(),this.ruleClicked||(this.ruleClicked=!0,cc.resources.load("gameprefab/Rule"+i.cyberGame.lang.code,cc.Prefab,function(t,o){t?console.log(t):(e.gameScene.node.addChild(cc.instantiate(o)),e.ruleClicked=!1)}))},t.prototype.onSwitchRoom=function(){i.cyberGame.audio.playButton(),this.quitRegistered=!this.quitRegistered,this.hidePopup(),this.gameScene.onSwitchRoom()},t.prototype.onLeaveRoom=function(){i.cyberGame.audio.playButton(),this.quitRegistered=!this.quitRegistered,this.hidePopup(),s.default.instance.switchedTable=!1,this.gameScene.onLeaveRoom()},t.prototype.hidePopup=function(){this.node.active=!1},a([l(cc.Node)],t.prototype,"soundOn",void 0),a([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../main/CyberGame":"CyberGame","../../SocketControl":"SocketControl"}],MoneyEntry:[function(e,t,o){"use strict";cc._RF.push(t,"065ecAaEvhHGop0TTt3lgSO","MoneyEntry");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../main/CyberGame"),s=e("./TextManager"),c=cc._decorator,u=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textManager=null,t.chars=[],t.startY=0,t}return r(t,e),t.prototype.showLose=function(e){this.hide();var t=0,o=i.cyberGame.utils.shortenLargeNumber(e,2)+"";o=o.toLowerCase();for(var n=0;n<o.length;n++){var r=o.charAt(n),a=null,s=this.textManager.getCharNode();s.setPosition(0,0),"."==r?(s.y=-9,a=this.textManager.arrOfLoseTextSF[10]):a="-"==r?this.textManager.arrOfLoseTextSF[13]:"k"==r?this.textManager.arrOfLoseTextSF[11]:"m"==r?this.textManager.arrOfLoseTextSF[12]:this.textManager.arrOfLoseTextSF[parseInt(r)],t+=a.getRect().width,s.getComponent(cc.Sprite).spriteFrame=a,this.node.addChild(s),this.chars.push(s)}this.node.setContentSize(t,25),this.node.active=!0},t.prototype.showWin=function(e){this.hide();var t=0,o="+"+i.cyberGame.utils.shortenLargeNumber(e,2);o=o.toLowerCase();for(var n=0;n<o.length;n++){var r=o.charAt(n),a=null,s=this.textManager.getCharNode();s.setPosition(0,0),"."==r?(s.y=-9,a=this.textManager.arrOfWinTextSF[10]):a="+"==r?this.textManager.arrOfWinTextSF[13]:"k"==r?this.textManager.arrOfWinTextSF[11]:"m"==r?this.textManager.arrOfWinTextSF[12]:this.textManager.arrOfWinTextSF[parseInt(r)],t+=a.getRect().width,s.getComponent(cc.Sprite).spriteFrame=a,this.node.addChild(s),this.chars.push(s)}this.node.setContentSize(t,27),this.node.active=!0},t.prototype.hide=function(){if(this.chars.length>0){for(var e=0;e<this.chars.length;e++)this.textManager.charPool.put(this.chars[e]);this.chars.length=0}this.node.active=!1},a([l(s.default)],t.prototype,"textManager",void 0),a([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../main/CyberGame":"CyberGame","./TextManager":"TextManager"}],Notification:[function(e,t,o){"use strict";cc._RF.push(t,"ae845SlL51AJ68Zx5lKKHGL","Notification");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tween=null,t}return r(t,e),t.prototype.show=function(e){this.node.getChildByName("txt").getComponent(cc.Label).string=e,this.node.active=!0},t.prototype.onEnable=function(){var e=this,t=this.node.y;this.node.y=t+75,this.tween=cc.tween(this.node).to(.2,{y:t}).call(function(){e.tween=null}).start(),this.scheduleOnce(function(){e.hide()},2)},t.prototype.hide=function(){this.node.active=!1,this.tween&&this.tween.stop(),this.node.y=0},a([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],OppResultEntry:[function(e,t,o){"use strict";cc._RF.push(t,"7d138RF49dM5o5CUy4uO8ZL","OppResultEntry");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../main/CyberGame"),s=e("../component/MoneyEntry"),c=e("./Avatar"),u=cc._decorator,l=u.ccclass,p=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerName=null,t.coin=null,t.avatar=null,t}return r(t,e),t.prototype.setName=function(e){this.playerName.getComponent(cc.Label).string=i.cyberGame.utils.formatName(e,12,!1)},t.prototype.setCoin=function(e){e>0?this.coin.getComponent(s.default).showWin(e):this.coin.getComponent(s.default).showLose(e)},t.prototype.setAvatar=function(e){this.avatar.getComponent(cc.Sprite).spriteFrame=e,this.avatar.node.setContentSize(82,82)},t.prototype.hide=function(){this.coin.getComponent(s.default).hide(),this.node.active=!1},a([p(cc.Label)],t.prototype,"playerName",void 0),a([p(cc.Node)],t.prototype,"coin",void 0),a([p(c.default)],t.prototype,"avatar",void 0),a([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../main/CyberGame":"CyberGame","../component/MoneyEntry":"MoneyEntry","./Avatar":"Avatar"}],OptInPopup:[function(e,t,o){"use strict";cc._RF.push(t,"74f72HKTVZEbZUG4hpTcDpN","OptInPopup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){},t.prototype.onConfirmClick=function(){this.closePopup(),FBInstant.player.subscribeBotAsync().then().catch(function(e){console.log(e)})},t.prototype.closePopup=function(){this.node.destroy()},a([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],OptimizeScrollView:[function(e,t,o){"use strict";cc._RF.push(t,"6feb4+iIhZNw4VsfIfwV67Q","OptimizeScrollView");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollView=null,t}return r(t,e),t.prototype.start=function(){this.event_update_opacity()},t.prototype.onDisable=function(){this.scrollView.content.off(cc.Node.EventType.CHILD_REMOVED,this.event_update_opacity,this),this.scrollView.content.off(cc.Node.EventType.CHILD_REORDER,this.event_update_opacity,this)},t.prototype.onEnable=function(){this.scrollView.content.on(cc.Node.EventType.CHILD_REMOVED,this.event_update_opacity,this),this.scrollView.content.on(cc.Node.EventType.CHILD_REORDER,this.event_update_opacity,this)},t.prototype.handleScrollEvent=function(){this.event_update_opacity()},t.prototype._get_bounding_box_to_world=function(e){var t=e._contentSize.width,o=e._contentSize.height,n=cc.rect(-e._anchorPoint.x*t,-e._anchorPoint.y*o,t,o);return e._calculWorldMatrix(),n.transformMat4(n,e._worldMatrix),n},t.prototype._check_collision=function(e){var t=this._get_bounding_box_to_world(this.scrollView.content.parent),o=this._get_bounding_box_to_world(e);return t.width+=.5*t.width,t.height+=.5*t.height,t.x-=.25*t.width,t.y-=.25*t.height,t.intersects(o)},t.prototype.event_update_opacity=function(){var e=this;this.scrollView.content.children.forEach(function(t){t.opacity=e._check_collision(t)?255:0})},a([c(cc.ScrollView)],t.prototype,"scrollView",void 0),a([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],OverlayLoader:[function(e,t,o){"use strict";cc._RF.push(t,"4d9b7zwuh5O35puAIoTClZ6","OverlayLoader");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.preloadIcon=null,t.tt=null,t}return r(t,e),t.prototype.start=function(){this.createRotatorTween()},t.prototype.createRotatorTween=function(){var e=this;this.preloadIcon.angle=0,this.tt=cc.tween(this.preloadIcon).to(5,{angle:1800}).call(function(){e.createRotatorTween()}).start()},t.prototype.close=function(){null!=this.tt&&this.tt.stop(),this.node.destroy()},a([c(cc.Node)],t.prototype,"preloadIcon",void 0),a([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],PersistNode:[function(e,t,o){"use strict";cc._RF.push(t,"21309RkHSxOXpDE32h649HA","PersistNode");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./OverlayLoader"),s=e("../CyberGame"),c=e("../scenes/ConnectingScene"),u=cc._decorator.ccclass,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.overlayLoader=null,t.connecting=!1,t}return r(t,e),t.prototype.addConnectionLostEvent=function(){s.cyberGame.socket.addEventListener(SFS2X.SFSEvent.CONNECTION_LOST,this.onConnectionLost,this)},t.prototype.onConnectionLost=function(){s.cyberGame.storage.get("isHomeSceneStarted")&&(this.connecting=!1,this.node.getChildByName("DisconnectPopup").active=!0,"connect"!=cc.director.getScene().name&&cc.director.preloadScene("connect"))},t.prototype.onConnect=function(){var e=this;this.connecting||(this.connecting=!0,s.cyberGame.audio.playButton(),this.node.getChildByName("DisconnectPopup").active=!1,"connect"!=cc.director.getScene().name?(this.showOverlayLoader(),cc.director.loadScene("connect",function(t){t||e.hideOverlayLoader()})):cc.director.getScene().getChildByName("Canvas").getComponent(c.default).connect())},t.prototype.showOverlayLoader=function(){this.overlayLoader||(this.overlayLoader=s.cyberGame.createOverlay(),this.node.addChild(this.overlayLoader))},t.prototype.hideOverlayLoader=function(){this.overlayLoader&&(this.overlayLoader.getComponent(i.default).close(),this.overlayLoader=null)},a([u],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../CyberGame":"CyberGame","../scenes/ConnectingScene":"ConnectingScene","./OverlayLoader":"OverlayLoader"}],PlayFriendPopup:[function(e,t,o){"use strict";cc._RF.push(t,"68650YoU95LMJiJIDxUi2t9","PlayFriendPopup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.roomCode=null,t.createGameTab=null,t.joinGameTab=null,t.betSlider=null,t.betText=null,t.homeScene=null,t.currentBet=5e3,t.ratioMap=[{value:5e3},{value:1e4},{value:2e4},{value:5e4},{value:1e5},{value:2e5},{value:3e5},{value:5e5},{value:1e6},{value:2e6},{value:5e6}],t}return r(t,e),t.prototype.onEnable=function(){cc.game.emit(i.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!0),this.roomCode.string=i.cyberGame.text("ENTER_ROOM_CODE");var e=this.node.getChildByName("bg_popup_huge");e.setScale(.8),cc.tween(e).to(.8,{scale:1},{easing:"elasticOut"}).start()},t.prototype.onDisable=function(){cc.game.emit(i.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!1)},t.prototype.onSlider=function(){var e=Math.round(100*this.betSlider.progress/10);this.currentBet=this.ratioMap[e].value,this.betText.string=i.cyberGame.utils.shortenLargeNumber(this.ratioMap[e].value,0)},t.prototype.onCreateGameTab=function(){i.cyberGame.audio.playButton(),this.createGameTab.getChildByName("cg_active_left_tab").active=!0,this.createGameTab.getChildByName("cg_left_tab").active=!1,this.joinGameTab.getChildByName("cg_right_tab").active=!0,this.joinGameTab.getChildByName("cg_active_right_tab").active=!1,this.node.getChildByName("bg_popup_huge").getChildByName("findRoom").active=!1,this.node.getChildByName("bg_popup_huge").getChildByName("createForm").active=!0,this.node.getChildByName("bg_popup_huge").getChildByName("button_taophong").active=!0,this.node.getChildByName("bg_popup_huge").getChildByName("button_vaophong").active=!1},t.prototype.onJoinGameTab=function(){i.cyberGame.audio.playButton(),this.roomCode.string=i.cyberGame.text("ENTER_ROOM_CODE"),this.createGameTab.getChildByName("cg_active_left_tab").active=!1,this.createGameTab.getChildByName("cg_left_tab").active=!0,this.joinGameTab.getChildByName("cg_right_tab").active=!1,this.joinGameTab.getChildByName("cg_active_right_tab").active=!0,this.node.getChildByName("bg_popup_huge").getChildByName("findRoom").active=!0,this.node.getChildByName("bg_popup_huge").getChildByName("createForm").active=!1,this.node.getChildByName("bg_popup_huge").getChildByName("button_taophong").active=!1,this.node.getChildByName("bg_popup_huge").getChildByName("button_vaophong").active=!0},t.prototype.onNumberClick=function(e,t){i.cyberGame.audio.playButton(),this.roomCode.string==i.cyberGame.text("ENTER_ROOM_CODE")&&(this.roomCode.string=""),this.roomCode.string.length>8||(this.roomCode.string=this.roomCode.string+String(t))},t.prototype.onBackNum=function(){if(i.cyberGame.audio.playButton(),this.roomCode.string!=i.cyberGame.text("ENTER_ROOM_CODE")&&this.roomCode.string.length>0){var e=this.roomCode.string;this.roomCode.string=e.substring(0,e.length-1)}},t.prototype.closePopup=function(){i.cyberGame.audio.playButton(),this.node.active=!1},t.prototype.show=function(){this.node.active=!0},t.prototype.onCreateRoomRequest=function(){i.cyberGame.audio.playButton(),this.homeScene.onCreateGameRequest()},t.prototype.onJoinRoomRequest=function(){i.cyberGame.audio.playButton();var e=this.roomCode.string;if(e.length>0&&e.length<10&&e!=i.cyberGame.text("ENTER_ROOM_CODE")){var t=parseInt(e);this.homeScene.onJoinFriengGameRequest(t)}},a([u(cc.Label)],t.prototype,"roomCode",void 0),a([u(cc.Node)],t.prototype,"createGameTab",void 0),a([u(cc.Node)],t.prototype,"joinGameTab",void 0),a([u(cc.Slider)],t.prototype,"betSlider",void 0),a([u(cc.Label)],t.prototype,"betText",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../CyberGame":"CyberGame"}],PlayManager:[function(e,t,o){"use strict";cc._RF.push(t,"f84f6q7LBFEULjCKCI9ka6R","PlayManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){this.game=null,this.game=e,this.players=new Map}return e.prototype.add=function(e){if(this.has(e.guserid))throw new Error("User id "+e.guserid+" is already added");this.players.set(e.guserid,e)},e.prototype.has=function(e){return this.players.has(e)},e.prototype.isPlayer=function(e){return e?this.has(e):this.has(this.myId)},e.prototype.getPlayer=function(e){return this.has(e)?this.players.get(e):null},e.prototype.getCurrentPlayer=function(){return this.getPlayer(this.myId)},e.prototype.clear=function(){this.players.clear()},Object.defineProperty(e.prototype,"myId",{get:function(){return this.game.mySelf.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.players.size},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.players.clear()},e}();o.default=n,cc._RF.pop()},{}],PlayerInfoPopup:[function(e,t,o){"use strict";cc._RF.push(t,"d2016Cc/0VLzZc7DPnZyBFH","PlayerInfoPopup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../main/CyberGame"),s=e("../../SocketControl"),c=cc._decorator,u=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerName=null,t.playerCoin=null,t.playerAvatar=null,t.lastSent=Date.now(),t.playerIdMap=new Map,t.noAvatar=null,t.avatarPath=null,t}return r(t,e),t.prototype.onEnable=function(){var e=this;null==this.noAvatar?this.noAvatar=this.playerAvatar.spriteFrame:this.playerAvatar.spriteFrame=this.noAvatar,this.avatarPath&&cc.assetManager.loadRemote(this.avatarPath,{ext:".jpg"},function(t,o){!t&&cc.isValid(e.node)&&(o.packable=!1,e.playerAvatar.spriteFrame=new cc.SpriteFrame(o),e.playerAvatar.node.setContentSize(180,180))})},t.prototype.showEmoPopup=function(e,t,o){this.node.getChildByName("bg").getChildByName("emoGrid").active=!0,this.node.getChildByName("bg").getChildByName("grid").active=!1,this.playerName.string=e,this.playerCoin.string=i.cyberGame.utils.formatCoinWithCommas(t),this.avatarPath=o,this.node.active=!0},t.prototype.showGiftPopup=function(e){this.guserid=e.guserid,this.node.getChildByName("bg").getChildByName("emoGrid").active=!1,this.node.getChildByName("bg").getChildByName("grid").active=!0,this.playerName.string=e.displayName,this.playerCoin.string=i.cyberGame.utils.formatCoinWithCommas(e.coin),this.avatarPath=e.avatar,this.node.active=!0},t.prototype.onEmoClick=function(e,t){if(!(Date.now()-this.lastSent<3e3)){var o=new SFS2X.SFSObject;o.putInt("id",0),o.putUtfString("emoCode",t),s.default.instance.sendGift(o),this.lastSent=Date.now(),this.hidePopup()}},t.prototype.onGiftClick=function(e,t){if(!(this.playerIdMap.has(this.guserid)&&(new Date).getTime()-this.playerIdMap.get(this.guserid)<3e3)){var o=new SFS2X.SFSObject;o.putInt("id",parseInt(t)),o.putUtfString("recipient",this.guserid),s.default.instance.sendGift(o),this.playerIdMap.set(this.guserid,(new Date).getTime()),this.hidePopup()}},t.prototype.hidePopup=function(){this.node.active=!1},a([l(cc.Label)],t.prototype,"playerName",void 0),a([l(cc.Label)],t.prototype,"playerCoin",void 0),a([l(cc.Sprite)],t.prototype,"playerAvatar",void 0),a([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../main/CyberGame":"CyberGame","../../SocketControl":"SocketControl"}],PlayerInfo:[function(e,t,o){"use strict";cc._RF.push(t,"9fcd60CMVlJJI9m8Rudmnt+","PlayerInfo");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerChildName=void 0;var i,s=e("../../../main/CyberGame"),c=e("../component/MoneyEntry"),u=e("../component/ProgressBar"),l=e("./Avatar"),p=e("../card/CardControl"),d=e("../card/CardSize"),h=e("../component/PointText"),y=cc._decorator,f=y.ccclass,m=y.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.index=0,t.playerName=null,t.playerCoin=null,t.avatar=null,t.avatarShop=null,t.point=null,t.money=null,t.win=null,t.chat=null,t.lights=[],t.user=null,t}return r(t,e),t.prototype.start=function(){this.cardControl=new p.default(this),this.money&&(this.index>0&&(this.money.y=this.node.y+80,1==this.index||2==this.index?this.money.x=this.node.x+50+this.money.getContentSize().width/2:3==this.index||4==this.index?this.money.x=this.node.x-50-this.money.getContentSize().width/2:(this.money.x=this.node.x+80+this.money.getContentSize().width/2,this.money.y=this.node.y+65)),this.money.getChildByName("txt").y=3),this.updateData(null)},t.prototype.updateData=function(e){this.user=e,null!=e?(this.enablePlayerNodes(),this.updateCoin(e.coin),this.updateDisplayName(e.displayName),this.unHighLight(),null!=e.avatar&&this.avatar.loadAvatar(e.avatar),0!=this.index&&this.hideInviteButton()):(this.playerName.node.active=!1,this.playerCoin.node.active=!1,this.avatar.hide(),this.avatarShop&&this.avatarShop.childrenCount>0&&this.avatarShop.children.forEach(function(e){e.destroy()}),this.node.children.forEach(function(e){e.active=!1}),0!=this.index&&(this.showInviteButton(),this.highLight()))},t.prototype.hideNameAndCoin=function(){this.playerCoin.node.active=!1,this.playerName.node.active=!1},t.prototype.showMyPointV2=function(){if(this.cards.length>0){var e=this.cards[this.cards.length-1].node.x+d.CardSize.PLAYER_WIDTH+30;this.point.x=0,this.point.y=-(276-d.CardSize.PLAYER_HEIGHT/2),this.point.setScale(.6),this.point.active=!0,this.point.getChildByName("txt").getComponent(h.default).show(this.cardControl.doGetPointFromCards()),cc.tween(this.point).to(.8,{scale:1,x:e},{easing:"backOut"}).start()}},t.prototype.showMyPoint=function(){this.cards.length>0&&(this.point.x=this.cards[this.cards.length-1].node.x+d.CardSize.PLAYER_WIDTH+30,this.point.y=-(276-d.CardSize.PLAYER_HEIGHT/2),this.point.setScale(.2),this.point.active=!0,this.point.getChildByName("txt").getComponent(h.default).show(this.cardControl.doGetPointFromCards()),cc.tween(this.point).to(.5,{scale:1},{easing:"backOut"}).start())},t.prototype.updateMyPoint=function(){this.point.getChildByName("txt").getComponent(h.default).show(this.cardControl.doGetPointFromCards())},t.prototype.moveMyPointTo=function(e){var t=e+d.CardSize.PLAYER_WIDTH+30;cc.tween(this.point).to(.5,{x:t},{easing:"backOut"}).start()},t.prototype.showOppPoint=function(e){this.point.getChildByName("txt").getComponent(h.default).show(e),this.point.setScale(.5),this.point.active=!0;var t=this.point.x;this.point.x=this.index<3?this.cardControl.positions[0].x:this.cardControl.positions[5].x,cc.tween(this.point).to(1,{x:t,scale:.8},{easing:"backOut"}).call(function(){}).start()},t.prototype.showMoney=function(e,t){this.unschedule(this.hideMoney),e>0?(this.money.getChildByName("win_bg").active=!0,this.money.getChildByName("lose_bg").active=!1,this.money.getChildByName("txt").getComponent(c.default).showWin(e)):(this.money.getChildByName("win_bg").active=!1,this.money.getChildByName("lose_bg").active=!0,this.money.getChildByName("txt").getComponent(c.default).showLose(e)),this.money.active=!0,this.money.setScale(.2),cc.tween(this.money).to(.3,{scale:1},{easing:"backOut"}).start(),t&&this.scheduleOnce(this.hideMoney,t)},t.prototype.hideMoney=function(){this.money.getChildByName("txt").getComponent(c.default).hide(),this.money.active=!1},t.prototype.startTimer=function(e){this.node.getChildByName("ProgressBar").getComponent(u.default).play(e)},t.prototype.hideTimer=function(){this.node.getChildByName("ProgressBar").getComponent(u.default).stop()},t.prototype.updateCoin=function(e){this.playerCoin.string=String(s.cyberGame.utils.shortenLargeNumber(e,2))},t.prototype.updateDisplayName=function(e){this.playerName.string=s.cyberGame.utils.formatName(e,12,!1)},t.prototype.unHighLight=function(){this.node.opacity=128,this.avatar.node.opacity=128,this.playerName.node.opacity=128,this.playerCoin.node.opacity=128},t.prototype.highLight=function(){this.node.opacity=255,this.avatar.node.opacity=255,this.playerName.node.opacity=255,this.playerCoin.node.opacity=255},t.prototype.showWin=function(){this.win.node.x=this.node.x,this.win.node.y=this.node.y,this.win.node.active=!0,this.win.clearTracks(),this.win.setAnimation(0,"th"==s.cyberGame.lang.code?"win3":"win",!0)},t.prototype.hideWin=function(){this.win.clearTrack(0),this.win.node.active=!1},t.prototype.showLose=function(){var e=this.node.getChildByName(i.ACITON_LOSE);e.active=!0,e.scale=1,this.tweenLoseDec()},t.prototype.hideLose=function(){this.node.getChildByName(i.ACITON_LOSE).active=!1},t.prototype.tweenLoseDec=function(){var e=this,t=this.node.getChildByName(i.ACITON_LOSE);1==t.active&&cc.tween(t).to(1,{scale:.85}).call(function(){e.tweenLoseInc()}).start()},t.prototype.tweenLoseInc=function(){var e=this,t=this.node.getChildByName(i.ACITON_LOSE);1==t.active&&cc.tween(t).to(1,{scale:1}).call(function(){e.tweenLoseDec()}).start()},t.prototype.showDealer=function(){this.node.getChildByName(i.DEALER_ICON).active=!0},t.prototype.hideDealer=function(){this.node.getChildByName(i.DEALER_ICON).active=!1},t.prototype.showInviteButton=function(){var e=this.node.getChildByName(i.INVITE_BUTTON);e&&(e.active=!0)},t.prototype.hideInviteButton=function(){var e=this.node.getChildByName(i.INVITE_BUTTON);e&&(e.active=!1)},t.prototype.showChat=function(e){this.hideChat(),this.unschedule(this.hideChat),this.chat.getChildByName("chatBubble").getChildByName("txt").getComponent(cc.Label).string=e,this.chat.active=!0,this.scheduleOnce(this.hideChat,3)},t.prototype.hideChat=function(){this.chat.active=!1},t.prototype.enablePlayerNodes=function(){this.avatar.show(),this.playerName.node.active=!0,this.playerCoin.node.active=!0,this.node.getChildByName(i.NAME_CONTAINER).active=!0,this.node.getChildByName(i.AVATAR_BORDER).active=!0},Object.defineProperty(t.prototype,"cards",{get:function(){return this.cardControl.cards},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.hideWin(),this.hideLose(),this.hideDealer(),this.hideMoney(),this.hideInviteButton(),this.cardControl.reset()},a([m()],t.prototype,"index",void 0),a([m(cc.Label)],t.prototype,"playerName",void 0),a([m(cc.Label)],t.prototype,"playerCoin",void 0),a([m(l.default)],t.prototype,"avatar",void 0),a([m(cc.Node)],t.prototype,"avatarShop",void 0),a([m(cc.Node)],t.prototype,"point",void 0),a([m(cc.Node)],t.prototype,"money",void 0),a([m(sp.Skeleton)],t.prototype,"win",void 0),a([m(cc.Node)],t.prototype,"chat",void 0),a([f],t)}(cc.Component);o.default=g,function(e){e.INVITE_BUTTON="icon_invite",e.AVATAR_BORDER="avatar_back",e.NAME_CONTAINER="name_container",e.DEALER_ICON="dealer_icon",e.ACITON_LOSE="avatar_lose"}(i=o.PlayerChildName||(o.PlayerChildName={})),cc._RF.pop()},{"../../../main/CyberGame":"CyberGame","../card/CardControl":"CardControl","../card/CardSize":"CardSize","../component/MoneyEntry":"MoneyEntry","../component/PointText":"PointText","../component/ProgressBar":"ProgressBar","./Avatar":"Avatar"}],Player:[function(e,t,o){"use strict";cc._RF.push(t,"42639oGxPBPm4/y22pglp7d","Player"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./../constants/GameInfo"),r=e("../constants/Variable"),a=function(){function e(e){null!=e&&(this.guserid=e.name,this.displayName=e.getVariable(r.UserVariable.DISPLAYNAME).value,this.level=e.getVariable(r.UserVariable.LEVEL).value,this.exp=e.getVariable(r.UserVariable.EXP).value,this.coin=e.getVariable(r.UserVariable.COIN).value,this.avatar=e.getVariable(r.UserVariable.AVATAR).value,"images/no_avatar"==this.avatar&&(this.avatar=null),this.isItMe=e.isItMe,this.avatarId=e.containsVariable("avatarId")?e.getVariable("avatarId").value:0),this.cards=[]}return e.newInstance=function(t){var o=new e(null);return o.guserid=t.getUtfString("guserid"),o.displayName=t.containsKey("displayName")?t.getUtfString("displayName"):"",o.coin=t.containsKey("coin")?t.getLong("coin"):0,o.avatar=t.containsKey("avatar")?t.getUtfString("avatar"):null,"images/no_avatar"==o.avatar&&(o.avatar=null),o.level=1,o.exp=0,o.isItMe=!1,o.avatarId=0,o},e.newTutInstance=function(){return new e(null)},e.prototype.addCard=function(e){if(!(this.cards.length<n.GameInfo.TOTAL_CARDS_FOR_EACH_PLAYER))throw new Error("cards size can not greater than"+n.GameInfo.TOTAL_CARDS_FOR_EACH_PLAYER);this.cards.push(e)},e.prototype.removeCards=function(e){for(var t=0;t<e.length;t++)if(this.isItMe){for(var o=0;o<this.cards.length;o++)if(e[t]==this.cards[o].id){this.cards.splice(o,1);break}}else this.cards.pop()},e.prototype.removeAllCards=function(){Array.isArray(this.cards)&&(this.cards.length=0)},Object.defineProperty(e.prototype,"cards",{get:function(){return this._cards},set:function(e){if(!Array.isArray(e))throw new Error("Player.cards - input was not an instance of native array");this._cards=e},enumerable:!1,configurable:!0}),e}();o.default=a,cc._RF.pop()},{"../constants/Variable":"Variable","./../constants/GameInfo":"GameInfo"}],PointText:[function(e,t,o){"use strict";cc._RF.push(t,"aea648WwGtNhqkRUAQgBp9R","PointText");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./TextManager"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textManager=null,t.chars=[],t}return r(t,e),t.prototype.show=function(e){if(this.chars.length>0){for(var t=0;t<this.chars.length;t++)this.textManager.charPool.put(this.chars[t]);this.chars.length=0}var o=0,n=e.toString();for(t=0;t<n.length;t++){var r=n.charAt(t),a=null,i=this.textManager.getCharNode();i.setPosition(0,0),o+=(a=this.textManager.arrOfPointSF[parseInt(r)]).getRect().width,i.getComponent(cc.Sprite).spriteFrame=a,this.node.addChild(i),this.chars.push(i)}this.node.setContentSize(o,27)},t.prototype.hide=function(){if(this.chars.length>0){for(var e=0;e<this.chars.length;e++)this.textManager.charPool.put(this.chars[e]);this.chars.length=0}},a([u(i.default)],t.prototype,"textManager",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./TextManager":"TextManager"}],Popup:[function(e,t,o){"use strict";cc._RF.push(t,"64d9foOr+FJAr7BawUKXv1T","Popup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.popupContent=null,t.actionButton=null,t.options=null,t}return r(t,e),t.prototype.start=function(){this.popupContent.string=this.options.content,!0===this.options.hideOverlay&&(this.node.getChildByName("overlay").active=!1),this.createTransition()},t.prototype.createTransition=function(){var e=this,t=this.node.getChildByName("wrapper"),o=t.y;t.y=t.y+200,cc.tween(t).to(.5,{position:cc.v2(t.x,o)},{easing:"backOut"}).call(function(){e.actionButton.node.once("click",e.onAction,e)}).start()},t.prototype.onAction=function(){this.closePopup()},t.prototype.onEnable=function(){},t.prototype.init=function(e){this.options=e},t.prototype.closePopup=function(){i.cyberGame.audio.playButton(),this.node.destroy()},a([u(cc.Label)],t.prototype,"popupContent",void 0),a([u(cc.Button)],t.prototype,"actionButton",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../CyberGame":"CyberGame"}],PositionHelper:[function(e,t,o){"use strict";cc._RF.push(t,"8afa6OLGltPKLN4XCNh5VWM","PositionHelper"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../card/CardSize"),r=e("../../constants/GameInfo"),a=function(){function e(){}return e.setWhiteWinPos=function(e,t){e.x<0?(t.x=e.x+25+t.width/2,t.y=e.y+35):(t.x=e.x-30-t.width/2,t.y=e.y+35)},e.createCardPositions=function(e){0==e.index?this.createCurrentPosition(e.positions):1===e.index?this.createLeftPosition(e.seat.node,e.positions):2===e.index?this.createTopPosition(e.seat.node,e.positions):3===e.index&&this.createRightPosition(e.seat.node,e.positions)},e.createCurrentPosition=function(e){for(var t=n.CardSize.PLAYER_WIDTH,o=n.CardSize.PLAYER_HEIGHT,a=Math.PI/3,i=r.GameInfo.TOTAL_CARDS_FOR_EACH_PLAYER,s=(Math.PI-2*a)/(i-1),c=0;c<i;c++){var u=a+c*s;e[c]={x:300*Math.cos(u)-t/2,y:300*Math.sin(u)-o/2-360,rotation:0,isUsed:!1}}},e.createLeftPosition=function(e,t){for(var o=n.CardSize.OPP_WIDTH,a=e.x+55+o/2+12,i=0;i<r.GameInfo.TOTAL_CARDS_FOR_EACH_PLAYER;i++)t[i]={x:a,y:e.y,rotation:90,isUsed:!1}},e.createRightPosition=function(e,t){for(var o=n.CardSize.OPP_WIDTH,a=e.x-55-10-(60+o),i=0;i<r.GameInfo.TOTAL_CARDS_FOR_EACH_PLAYER;i++)t[i]={x:a+200,y:e.y,rotation:90,isUsed:!1}},e.createTopPosition=function(e,t){for(var o=n.CardSize.OPP_WIDTH,a=e.x+55+o/2+18,i=0;i<=r.GameInfo.TOTAL_CARDS_FOR_EACH_PLAYER;i++)t[i]={x:a,y:e.y,rotation:90,isUsed:!1}},e.getDumpPosition=function(e,t){switch(e){case 0:return this.getDumpPosition0(t);case 1:return this.getDumpPosition1(t);case 2:return this.getDumpPosition2(t);case 3:return this.getDumpPosition3(t);case 4:return this.getDumpPosition4(t)}return null},e.getDumpPosition0=function(e){var t=[];return 1==e?t.push({x:0,y:0,a:0}):2==e?(t.push({x:3,y:0,a:6}),t.push({x:0,y:0,a:-3})):3==e?(t.push({x:8,y:4,a:13}),t.push({x:0,y:5,a:3}),t.push({x:-6,y:0,a:-11})):4==e&&(t.push({x:14,y:0,a:11}),t.push({x:6,y:3,a:6}),t.push({x:-2,y:1,a:-2}),t.push({x:-12,y:-4,a:-13})),t},e.getDumpPosition1=function(e){var t=n.CardSize.TABLE_WIDTH,o=n.CardSize.TABLE_HEIGHT,r=[],a=0;return 1==e?r.push({x:0,y:0,a:-11}):2==e?(a=t/2-10,r.push({x:10,y:0,a:8}),r.push({x:0,y:0,a:-11})):3==e?(a=t-16,r.push({x:22,y:4,a:13}),r.push({x:10,y:5,a:3}),r.push({x:0,y:0,a:-11})):4==e&&(a=t+t/2-22,r.push({x:26,y:4,a:13}),r.push({x:18,y:7,a:6}),r.push({x:10,y:5,a:-2}),r.push({x:0,y:0,a:-13})),{x:-115-a,y:130-o/2-15,angles:r}},e.getDumpPosition2=function(e){var t=n.CardSize.TABLE_WIDTH,o=n.CardSize.TABLE_HEIGHT,r=[],a=0;return 1==e?r.push({x:0,y:0,a:11}):2==e?(a=t/2-10,r.push({x:10,y:0,a:8}),r.push({x:0,y:0,a:-11})):3==e?(a=t-16,r.push({x:22,y:4,a:13}),r.push({x:10,y:5,a:3}),r.push({x:0,y:0,a:-11})):4==e&&(a=t+t/2-22,r.push({x:26,y:4,a:13}),r.push({x:18,y:7,a:6}),r.push({x:10,y:5,a:-2}),r.push({x:0,y:0,a:-13})),{x:-115-a,y:130+o-30,angles:r}},e.getDumpPosition3=function(e){var t=n.CardSize.TABLE_WIDTH,o=n.CardSize.TABLE_HEIGHT,r=[],a=0;return 1==e?r.push({x:0,y:0,a:-11}):2==e?(a=t/2-20,r.push({x:10,y:0,a:8}),r.push({x:0,y:0,a:-11})):3==e?(a=t-36,r.push({x:22,y:4,a:13}),r.push({x:10,y:5,a:3}),r.push({x:0,y:0,a:-11})):4==e&&(a=t+t/2-51,r.push({x:26,y:4,a:13}),r.push({x:18,y:7,a:6}),r.push({x:10,y:5,a:-2}),r.push({x:0,y:0,a:-13})),{x:115+a,y:130+o-30,angles:r}},e.getDumpPosition4=function(e){var t=n.CardSize.TABLE_WIDTH,o=n.CardSize.TABLE_HEIGHT,r=[],a=0;return 1==e?r.push({x:0,y:0,a:11}):2==e?(a=t/2-20,r.push({x:10,y:0,a:8}),r.push({x:0,y:0,a:-11})):3==e?(a=t-36,r.push({x:22,y:4,a:13}),r.push({x:10,y:5,a:3}),r.push({x:0,y:0,a:-11})):4==e&&(a=t+t/2-51,r.push({x:26,y:4,a:13}),r.push({x:18,y:7,a:6}),r.push({x:10,y:5,a:-2}),r.push({x:0,y:0,a:-13})),{x:115+a,y:130-o/2-15,angles:r}},e}();o.default=a,cc._RF.pop()},{"../../constants/GameInfo":"GameInfo","../card/CardSize":"CardSize"}],PreloadNode:[function(e,t,o){"use strict";cc._RF.push(t,"582f5LfvSJJJZFJOl0rgyJJ","PreloadNode");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){},a([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],ProgressBar:[function(e,t,o){"use strict";cc._RF.push(t,"86376WRqk1DDrtdeYcKUohQ","ProgressBar");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator.ccclass,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.duration=0,t.interVal=null,t.r=0,t}return r(t,e),t.prototype.onLoad=function(){this.r=50},t.prototype.onDestroy=function(){this.pause()},Object.defineProperty(t.prototype,"dot",{get:function(){return this.node.getChildByName("dot")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressBar",{get:function(){return this.node.getComponent(cc.ProgressBar)},enumerable:!1,configurable:!0}),t.prototype.setPercent=function(e){e/=100,this.progressBar.progress=e;var t=360*(1-e)*Math.PI/180,o=this.r*Math.sin(t),n=this.r*Math.cos(t);this.dot&&(this.dot.x=o,this.dot.y=n)},t.prototype.reset=function(){this.setPercent(0),this.dot&&(this.dot.active=!1)},t.prototype.pause=function(){this.interVal&&clearInterval(this.interVal),this.unscheduleAllCallbacks()},t.prototype.stop=function(){this.node.active&&(this.pause(),this.reset(),this.node.active=!1)},t.prototype.setDuration=function(e){return this.node.active=!0,this.duration=e,this},t.prototype.play=function(e){var t=this;this.duration=e,this.node.active=!0,this.setPercent(100),this.dot&&(this.dot.active=!0);var o=0;this.schedule(function(e){try{if((o+=e)>=t.duration)return void t.stop();var n=(t.duration-o)/t.duration;t.setPercent(100*n)}catch(r){console.log(r)}},.05)},a([i],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],PromotionEntry:[function(e,t,o){"use strict";cc._RF.push(t,"aa39eCOvoVPZYMoYV7G2xQ4","PromotionEntry"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.duration=0,this.isP100=!1,this.isP50=!1,this.createdDate=Date.now(),this.duration=e.getLong("duration"),this.promoMap=new Map;var o=0,n=0,r=["0_99","1_99","2_99","4_99","9_99"];r.forEach(function(r){if(e.containsKey(r)){var a=e.getInt(r);t.promoMap.set(r,a),100==a?o++:50==a&&n++}}),o==r.length&&(this.isP100=!0),n==r.length&&(this.isP50=!0),this.isNoel()&&cc.resources.preload("prefab/NoelPopup")}return e.prototype.getDuration=function(){if(this.isP100||this.isP50){var e=Date.now()-this.createdDate;return this.duration-e}return 0},e.prototype.getPromoMap=function(){return this.promoMap},e.prototype.getPromoPercent=function(e){return this.promoMap.has(e)?this.promoMap.get(e):0},e.prototype.getPrefabName=function(){return this.isNoel()?"prefab/NoelPopup":this.isP100?"prefab/FlashSale":"prefab/AmazingSale"},e.prototype.isNoel=function(){var e=new Date,t=e.getDate();return 12==e.getMonth()+1&&t>=22&&t<=26},e}();o.default=n,cc._RF.pop()},{}],Queue:[function(e,t,o){"use strict";cc._RF.push(t,"dfc22iaQ1FPeIH68vpbcn5R","Queue"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){void 0===e&&(e=1/0),this.capacity=e,this.storage=[]}return e.prototype.enqueue=function(e){if(this.size()===this.capacity)throw Error("Queue has reached max capacity, you cannot add more items");this.storage.push(e)},e.prototype.dequeue=function(){return this.storage.shift()},e.prototype.size=function(){return this.storage.length},e.prototype.isEmpty=function(){return 0==this.size()},e.prototype.clear=function(){this.storage.length=0},e}();o.default=n,cc._RF.pop()},{}],QuitGameHandler:[function(e,t,o){"use strict";cc._RF.push(t,"ca6eaYqCYtA16AK3U0Az8KJ","QuitGameHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.execute=function(){this.screen.hideOverlayLoader(),this.game.releaseCurrentQueue()},t}(e("./AbstractHandler").default);o.default=a,cc._RF.pop()},{"./AbstractHandler":"AbstractHandler"}],ReadyHandler:[function(e,t,o){"use strict";cc._RF.push(t,"cf180P+D7tD0r+IDw1G8pHA","ReadyHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.execute=function(e){if(!e.containsKey("error")){var t=e.getUtfString("guserid"),o=this.game.getUser(t);o&&(o.ready=!0,this.screen.seatManager.highLightPlayer(o))}this.game.releaseCurrentQueue()},t}(e("./AbstractHandler").default);o.default=a,cc._RF.pop()},{"./AbstractHandler":"AbstractHandler"}],RedeemPopup:[function(e,t,o){"use strict";cc._RF.push(t,"8f860y72YlNI6RYCghVsoVY","RedeemPopup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../component/OverlayLoader"),s=e("../CyberGame"),c=cc._decorator,u=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.codeInput=null,t.overlayLoader=null,t}return r(t,e),t.prototype.start=function(){if("th"==s.cyberGame.lang.code){var e=this.node.getChildByName("bg").getChildByName("title");e.y=e.y+9,this.codeInput.placeholderLabel.string="\u0e04\u0e25\u0e34\u0e01\u0e17\u0e35\u0e48\u0e19\u0e35\u0e48\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e40\u0e02\u0e49\u0e32\u0e2a\u0e39\u0e48"}},t.prototype.onExtensionResponse=function(e){if("gift.code"==e.cmd){this.hideOverlayLoader();var t=e.params.containsKey("msg")?e.params.getUtfString("msg"):null;null==t&&(t="th"==s.cyberGame.lang.code?"\u0e23\u0e2b\u0e31\u0e2a\u0e44\u0e21\u0e48\u0e16\u0e39\u0e01\u0e15\u0e49\u0e2d\u0e07":"Invalid code!",s.cyberGame.openCommonPopup({content:t})),this.closePopup()}},t.prototype.closePopup=function(){this.node.destroy()},t.prototype.onRedeem=function(){s.cyberGame.audio.playButton();var e=this.codeInput.string;if(0!=e.length)if(e.length<8)s.cyberGame.openCommonPopup({content:"th"==s.cyberGame.lang.code?"\u0e23\u0e2b\u0e31\u0e2a\u0e44\u0e21\u0e48\u0e16\u0e39\u0e01\u0e15\u0e49\u0e2d\u0e07":"Invalid code!"});else{this.node.getChildByName("bg").active=!1,this.node.getChildByName("overlay").active=!1,this.showOverlayLoader();var t=new SFS2X.SFSObject;t.putUtfString("code",e),s.cyberGame.socket.send(new SFS2X.ExtensionRequest("gift.code",t))}},t.prototype.onEnable=function(){s.cyberGame.socket.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponse,this);var e=this.node.getChildByName("bg");e.setScale(.8),cc.tween(e).to(.8,{scale:1},{easing:"elasticOut"}).start()},t.prototype.onDisable=function(){s.cyberGame.socket.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponse)},t.prototype.showOverlayLoader=function(){this.overlayLoader||(this.overlayLoader=s.cyberGame.createOverlay(),this.node.addChild(this.overlayLoader))},t.prototype.hideOverlayLoader=function(){this.overlayLoader&&(this.overlayLoader.getComponent(i.default).close(),this.overlayLoader=null)},a([l(cc.EditBox)],t.prototype,"codeInput",void 0),a([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../CyberGame":"CyberGame","../component/OverlayLoader":"OverlayLoader"}],RequestParameter:[function(e,t,o){"use strict";cc._RF.push(t,"dbd79kJow1P2I/QStmd9CqV","RequestParameter"),Object.defineProperty(o,"__esModule",{value:!0});o.default=function(e,t){this.cmd=e,this.params=t},cc._RF.pop()},{}],ResultData:[function(e,t,o){"use strict";cc._RF.push(t,"d5cf2AFSsRFcITtaSUtpdaz","ResultData"),Object.defineProperty(o,"__esModule",{value:!0}),o.ResultData=void 0;var n=e("../constants/WinType"),r=e("../util/CardUtil");o.ResultData=function(e,t){this.players=[],this.my=null,this.winType=e.getInt("winType"),this.winType==n.WinType.WHITE_WIN?this.whiteWinType=e.getInt("whiteWinType"):this.whiteWinType=0;for(var o=e.getSFSArray("playerList"),a=0;a<o.size();a++){var i=o.getSFSObject(a),s={guserid:i.getUtfString("guserid"),cards:i.getIntArray("cards"),point:i.getInt("point"),win:i.getBool("win"),isItMe:!1,playing:!1,coin:i.getLong("money"),total:i.getLong("total")};t==s.guserid&&(s.isItMe=!0,this.my=s),s.cards.length>0&&r.default.sortCardsByRank(s.cards),s.win&&(this.winType==n.WinType.KNOCK||this.winType==n.WinType.BIG_WIN?this.knockEntry=s:this.whiteWinType>0&&(this.whiteWinEntry=s)),this.players.push(s)}},cc._RF.pop()},{"../constants/WinType":"WinType","../util/CardUtil":"CardUtil"}],ResultPopup:[function(e,t,o){"use strict";cc._RF.push(t,"2c30avVT9tE57A51LZQP7E4","ResultPopup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../main/CyberGame"),s=e("../../SocketControl"),c=e("../player/Avatar"),u=e("../player/OppResultEntry"),l=e("./MoneyEntry"),p=cc._decorator,d=p.ccclass,h=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.winSF=null,t.loseSF=null,t.currentCoin=null,t.currentAvatar=null,t.players=[],t.playerPoints=[],t}return r(t,e),t.prototype.start=function(){this.hide(),this.playerPoints.push({x:-137,y:-108}),this.playerPoints.push({x:-137,y:-206}),this.playerPoints.push({x:171,y:-108}),this.playerPoints.push({x:171,y:-206})},t.prototype.init=function(e){this.gameScene=e,this.currentCoin.getComponent(l.default).textManager=this.gameScene.textManager;for(var t=0;t<this.players.length;t++)this.players[t].coin.getComponent(l.default).textManager=this.gameScene.textManager},t.prototype.updateData=function(e){var t=this.gameScene.seatManager.my.avatar.node.getComponent(cc.Sprite).spriteFrame;this.currentAvatar.getComponent(cc.Sprite).spriteFrame=t,this.currentAvatar.node.setContentSize(93,93);var o=this.node.getChildByName("bg"),n=o.getChildByName("my");n.y=-3,e.my.total>0?(this.currentCoin.getComponent(l.default).showWin(e.my.total),o.getComponent(cc.Sprite).spriteFrame=this.winSF,o.getChildByName("win_title").active=!0,o.getChildByName("lose_title").active=!1,o.getChildByName("win_line").active=!0,o.getChildByName("lose_line").active=!1,n.getChildByName("win_coin").active=!0,n.getChildByName("lose_coin").active=!1,i.cyberGame.audio.playWinSound()):(this.currentCoin.getComponent(l.default).showLose(e.my.total),o.getComponent(cc.Sprite).spriteFrame=this.loseSF,o.getChildByName("win_title").active=!1,o.getChildByName("lose_title").active=!0,o.getChildByName("win_line").active=!1,o.getChildByName("lose_line").active=!0,n.getChildByName("win_coin").active=!1,n.getChildByName("lose_coin").active=!0,i.cyberGame.audio.playLoseSound());for(var r=0,a=0;a<e.players.length;a++){var s=e.players[a],c=this.gameScene.seatManager.getSeatByGuserid(s.guserid);if(null!=c&&c.index>0){var u=this.players[r];u.setName(c.user.displayName),u.setAvatar(c.avatar.node.getComponent(cc.Sprite).spriteFrame),u.setCoin(s.total),u.node.active=!0,u.node.x=this.playerPoints[r].x,u.node.y=this.playerPoints[r].y,r++}}2==e.players.length?(n.y=-30,this.players[0].node.x=0,this.players[0].node.y=-160):3==e.players.length&&(n.y=-30,this.players[0].node.y=-160,this.players[1].node.y=-160,this.players[1].node.x=171)},t.prototype.show=function(){this.node.getChildByName("overlay").active=!0,this.node.getChildByName("bg").active=!0},t.prototype.hide=function(){this.node.getChildByName("overlay").active=!1,this.node.getChildByName("bg").active=!1,this.currentCoin.getComponent(l.default).hide();for(var e=0;e<this.players.length;e++)this.players[e].hide()},t.prototype.onContinue=function(){i.cyberGame.audio.playButton(),this.hide()},t.prototype.onQuitGame=function(){i.cyberGame.audio.playButton(),this.hide(),s.default.instance.switchedTable=!1,this.gameScene.onForceLeaveRoom()},a([h(cc.SpriteFrame)],t.prototype,"winSF",void 0),a([h(cc.SpriteFrame)],t.prototype,"loseSF",void 0),a([h(cc.Node)],t.prototype,"currentCoin",void 0),a([h(c.default)],t.prototype,"currentAvatar",void 0),a([h({type:[u.default]})],t.prototype,"players",void 0),a([d],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../main/CyberGame":"CyberGame","../../SocketControl":"SocketControl","../player/Avatar":"Avatar","../player/OppResultEntry":"OppResultEntry","./MoneyEntry":"MoneyEntry"}],RoomItem:[function(e,t,o){"use strict";cc._RF.push(t,"19b7em5cohOxoD7dn03rjUI","RoomItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.betText=null,t.miniBetText=null,t.roomId=null,t.joinButton=null,t.betSF=[],t.playerCount=[],t.roomOptions=null,t.lobbyScreen=null,t}return r(t,e),t.prototype.start=function(){null!=this.roomOptions&&this.updateData(this.roomOptions)},t.prototype.init=function(e,t){this.lobbyScreen=e,this.roomOptions=t},t.prototype.updateData=function(e){this.roomId.string=e.id+"";var t=i.cyberGame.utils.shortenLargeNumber(e.bet,0)+"";t=t.toLowerCase();for(var o=0;o<this.betSF.length;o++)if(this.betSF[o].name==t){this.betText.spriteFrame=this.betSF[o];break}var n=i.cyberGame.utils.shortenLargeNumber(5*e.bet,1)+"";for("2.5m"==(n=n.toLowerCase())?n="2_5m":"1.5m"==n&&(n="1_5m"),o=0;o<this.betSF.length;o++)if(this.betSF[o].name==n){this.miniBetText.spriteFrame=this.betSF[o];break}if(e.userCount>1){var r=this.playerCount[0].spriteFrame;for(o=1;o<e.userCount;o++)this.playerCount[o].spriteFrame=r}5==e.userCount?(this.joinButton.node.active=!1,this.node.getChildByName("buttons").getChildByName("button_full").active=!0):this.joinButton.node.on("click",this.sendJoinRoomRequest,this)},t.prototype.sendJoinRoomRequest=function(){if(i.cyberGame.audio.playButton(),i.cyberGame.lobbyCtrl.canPlay(this.roomOptions.bet))this.lobbyScreen.showOverlayLoader(),i.cyberGame.lobbyCtrl.joinRoom(this.roomOptions.id);else{var e=i.cyberGame.text("YOU_NEED_AT_LEAST",i.cyberGame.utils.shortenLargeNumber(i.cyberGame.lobbyCtrl.miniumMoneyCondition*this.roomOptions.bet,2));this.lobbyScreen.showNoti(e)}},a([u(cc.Sprite)],t.prototype,"betText",void 0),a([u(cc.Sprite)],t.prototype,"miniBetText",void 0),a([u(cc.Label)],t.prototype,"roomId",void 0),a([u(cc.Button)],t.prototype,"joinButton",void 0),a([u({type:[cc.SpriteFrame]})],t.prototype,"betSF",void 0),a([u({type:[cc.Sprite]})],t.prototype,"playerCount",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../CyberGame":"CyberGame"}],SeatManager:[function(e,t,o){"use strict";cc._RF.push(t,"ac02do7vuJJmbHV7SMlTg7a","SeatManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./PlayerInfo"),s=e("./PositionHelper"),c=e("../component/WhiteWinDialog"),u=cc._decorator,l=u.ccclass,p=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.players=[],t.giftNode=null,t.whiteWin=null,t}return r(t,e),t.prototype.init=function(e){this.gameScene=e},t.prototype.showWhiteWin=function(e,t,o){if(e.index>0){this.whiteWin.node.setScale(.8),s.default.setWhiteWinPos(e.node,this.whiteWin.node);var n=e.cardControl.updateCardIds(o);this.whiteWin.getComponent(c.default).show(t,n)}else this.whiteWin.node.setScale(1),this.whiteWin.node.x=0,this.whiteWin.node.y=this.whiteWin.node.height/2-276+20,this.whiteWin.getComponent(c.default).showForCurrentUser(t,this.my)},t.prototype.allocate=function(){var e=this;this.gameScene.actionButtonLayer.hide(),this.whiteWin.hide(),this.players.forEach(function(e){e.reset(),e.updateData(null)}),this.gameScene.game.userList.forEach(function(t){if(t.positionIndex>=0){var o=e.getSeatAt(t.positionIndex);o.updateData(t),o.user.ready&&o.highLight()}})},t.prototype.getSize=function(){var e=0;return this.players.forEach(function(t){null!=t.user&&e++}),e},t.prototype.prepareForDealcard=function(){for(var e=0;e<this.players.length;e++){var t=this.players[e];null==t.user?t.hideInviteButton():t.user.playing||t.unHighLight()}},t.prototype.prepareForSwitchTable=function(){this.players.forEach(function(e){e.hideNameAndCoin()})},t.prototype.removeLastDumpCards=function(){for(var e=0;e<this.players.length;e++){var t=this.players[e];if(null!=t.user&&t.user.playing&&(t.cardControl.removeLastDumpCards(),t.lights.length>0)){for(var o=0;o<t.lights.length;o++)t.lights[o].destroy();t.lights.length=0}}},t.prototype.resetCardControls=function(){this.players.forEach(function(e){e.cardControl.reset()})},t.prototype.getSeatAt=function(e){return this.players[e]},t.prototype.getSeatByGuserid=function(e){for(var t=0;t<this.players.length;t++){var o=this.players[t];if(null!=o.user&&o.user.guserid==e)return o}return null},t.prototype.updateDealer=function(e){var t=this.getSeatByGuserid(e);t&&t.showDealer()},t.prototype.highLightPlayer=function(e){for(var t=0;t<this.players.length;t++){var o=this.players[t];if(o.user==e){o.highLight();break}}},t.prototype.hideTimers=function(){this.players.forEach(function(e){null!=e.user&&e.hideTimer()})},t.prototype.hideInviteButtons=function(){for(var e=0;e<this.players.length;e++){var t=this.players[e];null==t.user&&t.hideInviteButton()}},t.prototype.onAvatarClick=function(e,t){var o=this.getSeatAt(t);o.user&&this.gameScene.playerInfoPopup.showGiftPopup(o.user)},Object.defineProperty(t.prototype,"my",{get:function(){return this.getSeatAt(0)},enumerable:!1,configurable:!0}),a([p({type:[i.default]})],t.prototype,"players",void 0),a([p(cc.Node)],t.prototype,"giftNode",void 0),a([p(c.default)],t.prototype,"whiteWin",void 0),a([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../component/WhiteWinDialog":"WhiteWinDialog","./PlayerInfo":"PlayerInfo","./PositionHelper":"PositionHelper"}],SetPositionHelper:[function(e,t,o){"use strict";cc._RF.push(t,"09561ZPtstJ7aczqyFz+oVi","SetPositionHelper"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.getPosition=function(e,t){return this["pos"+e+t]},Object.defineProperty(e,"pos10",{get:function(){return{x:-119.041,y:38.683,a:-55,min:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos20",{get:function(){return{x:-123.162,y:200.688,a:-120,min:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos30",{get:function(){return{x:117.698,y:212.809,a:130,min:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos40",{get:function(){return{x:132.698,y:54.925,a:62,min:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos01",{get:function(){return{x:2.251,y:139.813,a:125,min:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos21",{get:function(){return{x:-123.162,y:209.688,a:185,min:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos31",{get:function(){return{x:113.698,y:198.809,a:210}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos41",{get:function(){return{x:133.248,y:72.355,a:182}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos02",{get:function(){return{x:12.251,y:112.813,a:60,min:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos12",{get:function(){return{x:-109.041,y:46.683,a:0,min:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos32",{get:function(){return{x:137.698,y:210.668,a:185}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos42",{get:function(){return{x:113.248,y:72.355,a:152}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos03",{get:function(){return{x:-5.749,y:112.813,a:-60,min:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos13",{get:function(){return{x:-102.896,y:55.492,a:30}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos23",{get:function(){return{x:-131.084,y:189.597,a:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos43",{get:function(){return{x:121.698,y:48.925,a:0,min:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos04",{get:function(){return{x:-5.749,y:133.813,a:-120,min:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos14",{get:function(){return{x:-128.896,y:55.492,a:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos24",{get:function(){return{x:-106.963,y:189.597,a:-30}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pos34",{get:function(){return{x:106.698,y:206.668,a:-172,min:!0}},enumerable:!1,configurable:!0}),e}();o.default=n,cc._RF.pop()},{}],SettingPopup:[function(e,t,o){"use strict";cc._RF.push(t,"9e02acJquRLnYyTtNT3Lg+A","SettingPopup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.soundToggle=null,t.musicToggle=null,t.redeemButton=null,t.enButton=null,t.thButton=null,t.homeScene=null,t}return r(t,e),t.prototype.setScene=function(e){this.homeScene=e},t.prototype.start=function(){i.cyberGame.audio.soundEnabled?this.soundToggle.check():this.soundToggle.uncheck(),i.cyberGame.audio.musicEnabled?this.musicToggle.check():this.musicToggle.uncheck(),this.redeemButton.node.on("click",this.onRedeem,this)},t.prototype.onEnable=function(){cc.game.emit(i.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!0),"en"==i.cyberGame.lang.code?(this.enButton.node.opacity=255,this.thButton.node.opacity=100,this.thButton.node.once("click",this.onLangChange,this)):(this.enButton.node.opacity=100,this.thButton.node.opacity=255,this.enButton.node.once("click",this.onLangChange,this));var e=this.node.getChildByName("wrapper");e.setScale(.8),cc.tween(e).to(.8,{scale:1},{easing:"elasticOut"}).start()},t.prototype.onDisable=function(){cc.game.emit(i.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!1),FBInstant.player.setDataAsync({m:i.cyberGame.audio.musicEnabled,s:i.cyberGame.audio.soundEnabled})},t.prototype.onRedeem=function(){this.closePopup(),this.homeScene.showRedeemPopup()},t.prototype.onSoundToggle=function(e){i.cyberGame.audio.soundEnabled=e.isChecked,i.cyberGame.audio.playButton()},t.prototype.onMusicToggle=function(e){i.cyberGame.audio.musicEnabled=e.isChecked,i.cyberGame.audio.playButton(),i.cyberGame.audio.musicEnabled?i.cyberGame.audio.loadThenPlayMusic():i.cyberGame.audio.stopMusic()},t.prototype.closePopup=function(){i.cyberGame.audio.playButton(),this.node.destroy()},t.prototype.onLangChange=function(){var e=i.cyberGame.createOverlay();this.node.addChild(e),this.scheduleOnce(function(){i.cyberGame.setLocale("en"==i.cyberGame.lang.code?"th_TH":"en_US"),FBInstant.player.setDataAsync({gameLocale:i.cyberGame.lang.locale}),cc.director.loadScene("home")},.1)},a([u(cc.Toggle)],t.prototype,"soundToggle",void 0),a([u(cc.Toggle)],t.prototype,"musicToggle",void 0),a([u(cc.Button)],t.prototype,"redeemButton",void 0),a([u(cc.Button)],t.prototype,"enButton",void 0),a([u(cc.Button)],t.prototype,"thButton",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../CyberGame":"CyberGame"}],ShopItem:[function(e,t,o){"use strict";cc._RF.push(t,"512fcZBf1NODb1pijUFmP/q","ShopItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buyButton=null,t.p50SF=null,t.productId="",t.coin=0,t}return r(t,e),t.prototype.start=function(){var e=i.cyberGame.iap.getPromotion();if(e&&e.getDuration()>0){var t=e.getPromoPercent(this.productId);if(100==t||50==t){var o=Math.round(this.coin*t/100);this.node.getChildByName("coin").getComponent(cc.Label).string=i.cyberGame.utils.formatCoinWithCommas(this.coin+o),50==t&&(this.node.getChildByName("percent").getComponent(cc.Sprite).spriteFrame=this.p50SF),this.node.getChildByName("percent").active=!0,this.node.getChildByName("discount").active=!0,this.node.getChildByName("discount").getComponent(cc.Label).string=i.cyberGame.utils.formatCoinWithCommas(this.coin),"2_99"==this.productId?this.node.getChildByName("coinIcon").y=-2:"4_99"==this.productId?(this.node.getChildByName("coinIcon").y=-2,this.node.getChildByName("coin").x=5):"9_99"==this.productId&&(this.node.getChildByName("coin").x=5,this.node.getChildByName("coinIcon").y=-6)}else this.node.getChildByName("coin").getComponent(cc.Label).string=i.cyberGame.utils.formatCoinWithCommas(this.coin)}else this.node.getChildByName("coin").getComponent(cc.Label).string=i.cyberGame.utils.formatCoinWithCommas(this.coin)},t.prototype.updatePrice=function(e){this.buyButton.node.getChildByName("money").getComponent(cc.Label).string=e},a([u(cc.Button)],t.prototype,"buyButton",void 0),a([u(cc.SpriteFrame)],t.prototype,"p50SF",void 0),a([u],t.prototype,"productId",void 0),a([u],t.prototype,"coin",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../CyberGame":"CyberGame"}],SocketControl:[function(e,t,o){"use strict";cc._RF.push(t,"846e8Ogg61IR7LJugaFk5Yg","SocketControl"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../main/controllers/InterstitialManager"),r=e("../main/CyberGame"),a=e("./constants/GameConfig"),i=e("./constants/GameRequest"),s=e("./Game"),c=function(){function e(){this.joinedRoom=!1,this.switchedTable=!1,this.lastJoinedId=0,this.game=null}return Object.defineProperty(e,"instance",{get:function(){return this._INSTANCE},enumerable:!1,configurable:!0}),e.prototype.initialize=function(){r.cyberGame.socket.addEventListener(SFS2X.SFSEvent.CONNECTION_LOST,this.onConnectionLost,this),r.cyberGame.socket.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponse,this),r.cyberGame.socket.addEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onRoomJoin,this),r.cyberGame.socket.addEventListener(SFS2X.SFSEvent.USER_ENTER_ROOM,this.onUserEnterRoom,this),r.cyberGame.socket.addEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.onUserExitRoom,this),r.cyberGame.socket.addEventListener(SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdate,this)},e.prototype.onExtensionResponse=function(e){try{this.game&&e.room&&this.game.room.id==e.room.id&&this.game.handleServerResponse(e.cmd,e.params)}catch(t){console.log("onExtensionResponse exception: ",t)}},e.prototype.onRoomJoin=function(e){try{this.game=new s.default(e.room),this.game.initialize(),this.joinedRoom=!0,this.switchedTable=!1,this.lastJoinedId=e.room.id,n.default.instance.init(),CyberGlobals.gameConfig.isPreviewMode&&((new SFS2X.SFSObject).putInt("size",3),1==a.GameConfig.disableReconnect&&r.cyberGame.socket.send(new SFS2X.ExtensionRequest("disableReconnect",null,this.game.room)))}catch(t){console.log(t)}},e.prototype.onUserEnterRoom=function(e){if(this.game&&this.game.room.id==e.room.id)try{this.game.handleUserEnterRoom(e.user)}catch(t){console.error("onUserEnterRoom",t)}},e.prototype.onUserExitRoom=function(e){var t=this;if(this.game&&this.game.room.id==e.room.id)if(e.user.isItMe){this.joinedRoom=!1;var o=!1;this.game.playing&&this.game.playerManager.has(e.user.name)||(o=!0),o&&(r.cyberGame.storage.put("lastJoinedRoomId",-1),this.switchedTable&&r.cyberGame.lobbyCtrl.canPlay(5e3)?(this.game.screen.prepareForSwitchTable(),this.destroy(),r.cyberGame.storage.get("interstitialShowingAllowed")?(r.cyberGame.storage.put("interstitialShowingAllowed",!1),n.default.instance.canShow()?(r.cyberGame.audio.stopAllEffects(),n.default.instance.showAsync().then(function(){r.cyberGame.lobbyCtrl.sendFindGameRequestExcludeId(t.lastJoinedId)})):r.cyberGame.lobbyCtrl.sendFindGameRequestExcludeId(this.lastJoinedId)):r.cyberGame.lobbyCtrl.sendFindGameRequestExcludeId(this.lastJoinedId)):(this.destroy(),cc.director.loadScene("home",function(e){e||r.cyberGame.audio.playSound("leaveRoom")})))}else CyberGlobals.gameConfig.isPreviewMode&&console.log("user "+e.user.name+" exit room")},e.prototype.onUserVariablesUpdate=function(e){this.game&&this.game.room.containsUser(e.user)&&-1!=e.changedVars.indexOf("coin")&&this.game.handleUserVariablesUpdate(e)},e.prototype.getCoin=function(){try{return r.cyberGame.socket.mySelf.getVariable("coin").value}catch(e){return 0}},e.prototype.ready=function(){try{if(this.joinedRoom)return r.cyberGame.socket.send(new SFS2X.ExtensionRequest(i.GameRequest.READY,null,this.game.room))}catch(e){console.log("send ready exception",e)}return!1},e.prototype.getPlayingInfoRequest=function(){try{if(this.joinedRoom)return r.cyberGame.socket.send(new SFS2X.ExtensionRequest(i.GameRequest.GET_PLAYING_INFO,null,this.game.room))}catch(e){console.log("send getPlayingInfoRequest exception",e)}return!1},e.prototype.startGame=function(){try{return r.cyberGame.socket.send(new SFS2X.ExtensionRequest("startGame",null,this.game.room))}catch(e){console.log("send start game exception",e)}return!1},e.prototype.sendDrawRequest=function(){return!!this.joinedRoom&&(r.cyberGame.socket.send(new SFS2X.ExtensionRequest(i.GameRequest.DRAW_CARD,null,this.game.room)),!0)},e.prototype.sendDumpCardRequest=function(e){if(this.joinedRoom){var t=new SFS2X.SFSObject;return t.putIntArray("cards",e),r.cyberGame.socket.send(new SFS2X.ExtensionRequest(i.GameRequest.DUMP_CARD,t,this.game.room)),!0}return!1},e.prototype.sendFollowCardRequest=function(e){if(this.joinedRoom){var t=new SFS2X.SFSObject;return t.putIntArray("cards",e),r.cyberGame.socket.send(new SFS2X.ExtensionRequest(i.GameRequest.FOLLOW_CARD,t,this.game.room)),!0}return!1},e.prototype.sendKhaengRequest=function(){return!!this.joinedRoom&&(r.cyberGame.socket.send(new SFS2X.ExtensionRequest(i.GameRequest.KHAENG,null,this.game.room)),!0)},e.prototype.leaveGame=function(){this.joinedRoom&&r.cyberGame.socket.lastJoinedRoom?r.cyberGame.socket.send(new SFS2X.ExtensionRequest(i.GameRequest.QUIT_GAME,null,this.game.room)):(this.destroy(),r.cyberGame.audio.playSound("leaveRoom"),r.cyberGame.storage.put("lastJoinedRoomId",-1),cc.director.loadScene("home",function(e){e||r.cyberGame.audio.playSound("leaveRoom")}))},e.prototype.sendGift=function(e){try{if(this.joinedRoom)return r.cyberGame.socket.send(new SFS2X.ExtensionRequest(i.GameRequest.SEND_GIFT,e,this.game.room))}catch(t){console.log("send gift cmd exception: ",t)}return!1},e.prototype.onConnectionLost=function(){r.cyberGame.storage.put("lastJoinedRoomId",-1),this.destroy()},e.prototype.destroy=function(){this.game&&this.game.destroy(),this.game=null,this.joinedRoom=!1},e._INSTANCE=new e,e}();o.default=c,cc._RF.pop()},{"../main/CyberGame":"CyberGame","../main/controllers/InterstitialManager":"InterstitialManager","./Game":"Game","./constants/GameConfig":"GameConfig","./constants/GameRequest":"GameRequest"}],SpinPopup:[function(e,t,o){"use strict";cc._RF.push(t,"9e017kBRLhIJrygCiYZCeGH","SpinPopup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../CyberGame"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spinMain=null,t.spinButton=null,t.collectButton=null,t.spinValue=2e4,t.spinCoin=0,t.watched=!1,t}return r(t,e),t.prototype.start=function(){var e=0,t=i.cyberGame.storage.get("collectTime");if(t<10800)if(i.cyberGame.ad.ready&&i.cyberGame.ad.spinCounter<2&&10800-t>500)e=2;else{var o=this.spinButton.getChildByName("spinTime");o.active=!0,o.getComponent(cc.Label).string=this.formatTime(10800-t)}else e=1;1==e?this.enableSpinButton():2==e&&(cc.game.once(i.cyberGame.event.AdsEvent.REWARD,this.onAdReward,this),this.spinButton.getChildByName("ads_icon").active=!0,this.spinButton.getComponent(cc.Button).node.once("click",function(){i.cyberGame.ad.show(i.cyberGame.ad.SPIN_POSITION)}));var n=this.node.getChildByName("spin_wrap");n.setScale(.6),cc.tween(n).to(1,{scale:1},{easing:"elasticOut"}).start()},t.prototype.onEnable=function(){i.cyberGame.socket.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponse,this),cc.game.emit(i.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!0)},t.prototype.onDisable=function(){i.cyberGame.socket.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponse),cc.game.emit(i.cyberGame.event.ON_POPUP_VISIBILITY_CHANGE,!1)},t.prototype.onExtensionResponse=function(e){"luckywheels.spin"==e.cmd&&(e.params.containsKey("ad")?i.cyberGame.ad.increaseSpinCounter():(i.cyberGame.storage.put("collectTime",0),i.cyberGame.socket.initHeartBeat()),this.spinValue=e.params.getInt("value"),this.spinCoin=e.params.getLong("coin"),this.playSpin())},t.prototype.onAdReward=function(e){e.type==i.cyberGame.ad.SPIN_POSITION&&(this.watched=!0,this.spinButton.getChildByName("ads_icon").active=!1,this.enableSpinButton())},t.prototype.enableSpinButton=function(){var e=this;this.spinButton.getChildByName("spin_text").active=!0,this.spinButton.getComponent(cc.Button).node.once("click",function(){e.sendSpinRequest()})},t.prototype.sendSpinRequest=function(){if(this.node.getChildByName("icon_close").active=!1,this.watched){var e=new SFS2X.SFSObject;e.putBool("ad",!0),i.cyberGame.socket.send(new SFS2X.ExtensionRequest("luckywheels.spin",e))}else i.cyberGame.socket.send(new SFS2X.ExtensionRequest("luckywheels.spin"))},t.prototype.playSpin=function(){var e=this;this.spinMain.angle=0,this.spinButton.getComponent(cc.Button).interactable=!1,this.node.getChildByName("spin_wrap").getChildByName("spinAnim").getComponent(cc.Animation).play();var t=24*-[2e4,1e5,5e4,2e4,2e5,5e4,2e4,5e5,1e5,2e4,5e4,1e5,2e4,5e4,3e5].indexOf(this.spinValue);cc.tween(this.spinMain).to(5,{angle:1800-t},{easing:"cubicOut"}).call(function(){cc.director.getScheduler().setTimeScale(1),e.node.getChildByName("spin_wrap").getChildByName("spinArrowAnim").getComponent(cc.Animation).play(),e.showResult()}).start(),i.cyberGame.audio.soundEnabled&&this.getComponent(cc.AudioSource).play()},t.prototype.showResult=function(){this.node.getChildByName("bg_claim").active=!0,this.node.getChildByName("bg_claim").getChildByName("successText").getComponent(cc.Label).string=i.cyberGame.text("YOU_GOT_CHIP",i.cyberGame.utils.shortenLargeNumber(this.spinCoin,0)),this.collectButton.getComponent(cc.Button).node.once("click",this.collectCoin,this)},t.prototype.collectCoin=function(){this.closePopup(),i.cyberGame.socket.send(new SFS2X.ExtensionRequest("profile.refreshCoin")),i.cyberGame.openCommonPopup({content:i.cyberGame.text("YOU_GOT_CHIP",i.cyberGame.utils.shortenLargeNumber(this.spinCoin,0))})},t.prototype.formatTime=function(e){var t="0"+Math.floor(e/60/60),o="0"+Math.floor((e-3600*parseInt(t))/60);return t.substr(-2)+" : "+o.substr(-2)},t.prototype.closePopup=function(){i.cyberGame.audio.playButton(),this.node.destroy()},a([u(cc.Node)],t.prototype,"spinMain",void 0),a([u(cc.Node)],t.prototype,"spinButton",void 0),a([u(cc.Node)],t.prototype,"collectButton",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../CyberGame":"CyberGame"}],SplashDevScreen:[function(e,t,o){"use strict";cc._RF.push(t,"ddb3aFle6FE2oe1DYPafqcq","SplashDevScreen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../controllers/AdapterManager"),s=e("../CyberGame"),c=e("../component/PersistNode"),u=cc._decorator,l=u.ccclass,p=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.descText=null,t.loadingText=null,t.totalLoaded=0,t.nextScene="game",t.startedAfterGetData=!1,t}return r(t,e),t.prototype.onLoad=function(){i.default.inst.autoFitCanvas(this.node),this.node.on(s.cyberGame.event.ON_LOAD_HOME_RES,this.onLoadHomeScene,this)},t.prototype.start=function(){var e=this;cc.director.preloadScene(this.nextScene,function(t,o){e.loadingText.string=(t/o*100>>0)+"% Loaded"},function(t){t||e.node.emit(s.cyberGame.event.ON_LOAD_HOME_RES,{name:"HomeScene"})}),s.cyberGame.loadPrefab("prefab/CommonPopup").then(function(t){s.cyberGame.setCommonPopupPrefab(t),e.node.emit(s.cyberGame.event.ON_LOAD_HOME_RES,{name:"CommonPopup"})}),s.cyberGame.loadPrefab("prefab/LoadingLayer").then(function(t){s.cyberGame.setOverlayPrefab(t),e.node.emit(s.cyberGame.event.ON_LOAD_HOME_RES,{name:"OverlayLoaded"})}),s.cyberGame.loadPrefab("prefab/PersistNode",!0).then(function(t){s.cyberGame.setPersistNode(t),cc.game.addPersistRootNode(t),e.node.emit(s.cyberGame.event.ON_LOAD_HOME_RES,{name:"PersistNode"})}),s.cyberGame.storage.put("currentScene","splash")},t.prototype.onLoadHomeScene=function(e){var t=this;this.totalLoaded++,4==this.totalLoaded&&(s.cyberGame.setGameAssetReady(!0),s.cyberGame.audio.preloadGameAudios(),CyberGlobals.getDataAsyncResolved?this.verifyData():this.schedule(function(){CyberGlobals.getDataAsyncResolved&&(t.unscheduleAllCallbacks(),t.verifyData())},.2),this.node.off(s.cyberGame.event.ON_LOAD_HOME_RES,this.onLoadHomeScene,this)),CyberGlobals.gameConfig.debugLoadingProgress&&console.log(e.name+" loaded success")},t.prototype.verifyData=function(){this.startedAfterGetData||(this.startedAfterGetData=!0,s.cyberGame.audio.musicEnabled=CyberGlobals.gameConfig.musicEnabled,s.cyberGame.audio.soundEnabled=CyberGlobals.gameConfig.soundEnabled,s.cyberGame.audio.musicEnabled&&s.cyberGame.audio.loadThenPlayMusic(),this.runHomeScene())},t.prototype.runHomeScene=function(){var e=this;s.cyberGame.socket.isConnectionReady()?(cc.director.loadScene(this.nextScene,this.onHomeSceneLaunched),this.joinGame()):this.schedule(function(){s.cyberGame.socket.isConnectionReady()&&(e.unscheduleAllCallbacks(),e.joinGame(),cc.director.loadScene(e.nextScene,e.onHomeSceneLaunched))},.1)},t.prototype.joinGame=function(){s.cyberGame.storage.get("lastJoinedRoomId")&&-1!=s.cyberGame.storage.get("lastJoinedRoomId")?s.cyberGame.lobbyCtrl.resumeRoom(s.cyberGame.storage.get("lastJoinedRoomId")):s.cyberGame.lobbyCtrl.sendFindGameRequest()},t.prototype.onHomeSceneLaunched=function(){s.cyberGame.getPersistNode().getComponent(c.default).addConnectionLostEvent()},a([p(cc.Label)],t.prototype,"descText",void 0),a([p(cc.Label)],t.prototype,"loadingText",void 0),a([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../CyberGame":"CyberGame","../component/PersistNode":"PersistNode","../controllers/AdapterManager":"AdapterManager"}],SplashScreen:[function(e,t,o){"use strict";cc._RF.push(t,"b6d481flE1HJ5vMVRK0qX/b","SplashScreen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../controllers/AdapterManager"),s=e("../CyberGame"),c=e("../component/PersistNode"),u=cc._decorator,l=u.ccclass,p=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.descText=null,t.loadingText=null,t.totalLoaded=0,t.nextScene="home",t.startedAfterGetData=!1,t.runPreloadRss=!1,t}return r(t,e),t.prototype.onLoad=function(){i.default.inst.autoFitCanvas(this.node),this.node.on(s.cyberGame.event.ON_LOAD_HOME_RES,this.onLoadHomeScene,this)},t.prototype.start=function(){var e=this;cc.director.preloadScene(this.nextScene,function(t,o){e.loadingText.string=(t/o*100>>0)+"% Loaded"},function(t){t||e.node.emit(s.cyberGame.event.ON_LOAD_HOME_RES,{name:"HomeScene"})}),s.cyberGame.loadPrefab("prefab/CommonPopup").then(function(t){s.cyberGame.setCommonPopupPrefab(t),e.node.emit(s.cyberGame.event.ON_LOAD_HOME_RES,{name:"CommonPopup"})}),s.cyberGame.loadPrefab("prefab/LoadingLayer").then(function(t){s.cyberGame.setOverlayPrefab(t),e.node.emit(s.cyberGame.event.ON_LOAD_HOME_RES,{name:"OverlayLoaded"})}),s.cyberGame.loadPrefab("prefab/PersistNode",!0).then(function(t){s.cyberGame.setPersistNode(t),cc.game.addPersistRootNode(t),e.node.emit(s.cyberGame.event.ON_LOAD_HOME_RES,{name:"PersistNode"})}),s.cyberGame.storage.put("currentScene","splash")},t.prototype.onLoadHomeScene=function(e){var t=this;if(this.totalLoaded++,4==this.totalLoaded){if(CyberGlobals.getDataAsyncResolved)this.verifyData();else{try{-1!=FBInstant.getLocale().indexOf("th")&&this.preloadResources()}catch(o){console.log("locale error at splash")}this.schedule(function(){CyberGlobals.getDataAsyncResolved&&(t.unscheduleAllCallbacks(),t.verifyData())},.1)}this.node.off(s.cyberGame.event.ON_LOAD_HOME_RES,this.onLoadHomeScene,this)}CyberGlobals.gameConfig.debugLoadingProgress&&console.log(e.name+" loaded success")},t.prototype.verifyData=function(){this.startedAfterGetData||(this.startedAfterGetData=!0,CyberGlobals.tutorialPlayed?(this.preloadResources(),this.runHomeScene()):this.loadThenPlayTutorial(),s.cyberGame.audio.musicEnabled=CyberGlobals.gameConfig.musicEnabled,s.cyberGame.audio.soundEnabled=CyberGlobals.gameConfig.soundEnabled,s.cyberGame.audio.musicEnabled&&s.cyberGame.audio.loadThenPlayMusic())},t.prototype.runHomeScene=function(){var e=this;s.cyberGame.socket.isConnectionReady()?cc.director.loadScene(this.nextScene,this.onHomeSceneLaunched):this.schedule(function(){s.cyberGame.socket.isConnectionReady()&&(e.unscheduleAllCallbacks(),cc.director.loadScene(e.nextScene,e.onHomeSceneLaunched))},.1)},t.prototype.onHomeSceneLaunched=function(){s.cyberGame.getPersistNode().getComponent(c.default).addConnectionLostEvent()},t.prototype.preloadResources=function(){if(!this.runPreloadRss){this.runPreloadRss=!0,s.cyberGame.audio.loadButtonAudio(),cc.director.preloadScene("game",function(e,t){if(CyberGlobals.gameConfig.debugLoadingProgress){var o=(e/t*100>>0)+"% Loaded";console.log("GameScene progress: "+o)}},function(){s.cyberGame.setGameAssetReady(!0),cc.resources.preload("gameprefab/FollowText"),cc.resources.preload("gameprefab/resultDialog"),cc.resources.preload("gameprefab/InvitePopup"),s.cyberGame.audio.preloadGameAudios(),CyberGlobals.gameConfig.debugLoadingProgress&&console.log("game scene preload succes"),console.log("preload game scene done")});var e=["InvitePopup","LobbyGame","CreateFriendPopup","SpinWheel","VideoPopup"],t=0;e.forEach(function(o){cc.resources.preload("prefab/"+o,cc.Prefab,function(){++t==e.length&&(cc.resources.preload("images/shareimage"),console.log("preload prefabs done")),CyberGlobals.gameConfig.debugLoadingProgress&&console.log(o+" prefab loaded success")})})}},t.prototype.loadThenPlayTutorial=function(){var e=this;s.cyberGame.audio.loadButtonAudio(),s.cyberGame.loadPrefab("prefab/TutorialPopup",!0).then(function(t){t.parent=e.node}).catch(function(){e.preloadResources(),e.runHomeScene()}),cc.resources.preload("prefab/TutLan"),cc.director.preloadScene("tutorial",function(e,t){if(CyberGlobals.gameConfig.debugLoadingProgress){var o=(e/t*100>>0)+"% Loaded";console.log("tutorial scene progress: "+o)}},function(){s.cyberGame.audio.preloadGameAudios()})},a([p(cc.Label)],t.prototype,"descText",void 0),a([p(cc.Label)],t.prototype,"loadingText",void 0),a([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../CyberGame":"CyberGame","../component/PersistNode":"PersistNode","../controllers/AdapterManager":"AdapterManager"}],StartCountDown:[function(e,t,o){"use strict";cc._RF.push(t,"783c0B/MjBPrqVJMYmUTHcl","StartCountDown");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numFrames=[],t.numText=null,t.delay=5e3,t.running=!1,t}return r(t,e),t.prototype.start=function(){this.counter=this.delay,this.setText(Math.round(this.counter/1e3)),this.fadeIn(),this.schedule(this.onCounter,1),this.running=!0},t.prototype.onCounter=function(){this.counter=this.counter-1e3;var e=Math.round(this.counter/1e3);e>0?(this.setText(e),this.fadeIn()):(this.running=!1,cc.game.emit("START_COUNT_DOWN_FINISH"),this.stopCounter())},t.prototype.stopCounter=function(){this.unschedule(this.onCounter),this.node.destroy()},t.prototype.setText=function(e){e>0&&e<6&&(this.numText.getComponent(cc.Sprite).spriteFrame=this.numFrames[e-1])},t.prototype.fadeIn=function(){this.numText.node.opacity=0,this.numText.node.setScale(.2),cc.tween(this.numText.node).parallel(cc.tween().to(.6,{opacity:255}),cc.tween().to(.8,{scale:1.1},{easing:"elasticOut"})).start()},a([c({type:[cc.SpriteFrame]})],t.prototype,"numFrames",void 0),a([c(cc.Sprite)],t.prototype,"numText",void 0),a([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],Storage:[function(e,t,o){"use strict";cc._RF.push(t,"32d783MN0JInY25VlALQMWb","Storage"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.items=new Map,this.put("currentLobbyGroup","beginner"),this.put("canShowFlashSale",!0)}return e.prototype.put=function(e,t){this.items.set(e,t)},e.prototype.get=function(e){return this.items.get(e)},e}();o.default=n,cc._RF.pop()},{}],TextManager:[function(e,t,o){"use strict";cc._RF.push(t,"59d2f2aU+tMXYUbft72eTPo","TextManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.arrOfLoseTextSF=[],t.arrOfWinTextSF=[],t.arrOfPointSF=[],t.charPool=new cc.NodePool,t}return r(t,e),t.prototype.start=function(){for(var e=0;e<10;++e){var t=new cc.Node;t.addComponent(cc.Sprite),this.charPool.put(t)}},t.prototype.getCharNode=function(){if(this.charPool.size()>0)return this.charPool.get();var e=new cc.Node;return e.addComponent(cc.Sprite),e},a([c({type:[cc.SpriteFrame]})],t.prototype,"arrOfLoseTextSF",void 0),a([c({type:[cc.SpriteFrame]})],t.prototype,"arrOfWinTextSF",void 0),a([c({type:[cc.SpriteFrame]})],t.prototype,"arrOfPointSF",void 0),a([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],TutActionButtons:[function(e,t,o){"use strict";cc._RF.push(t,"5b128FUG/FKwYxuhWPku04p","TutActionButtons");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../util/CardUtil"),s=e("./HandEffect"),c=cc._decorator,u=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.drawButton=null,t.khaengButton=null,t.blockButton=null,t.dumpButton=null,t.drawId=-1,t.canKaeng=!1,t}return r(t,e),t.prototype.init=function(e){this.gameScene=e},t.prototype.start=function(){},t.prototype.onDump=function(){var e=this.gameScene.seatManager.my.cardControl.getChooseCards();if(e.length>0){if(e.length>1&&!i.default.isSameRankCardGroup(e))return;this.gameScene.handleDump(e)}},t.prototype.onBlock=function(){var e=this.gameScene.seatManager.my.cardControl.getChooseCards();if(e.length>0){if(e.push(this.gameScene.lastDumpCard),!i.default.isSameRankCardGroup(e))return;this.gameScene.handBlock(this.gameScene.seatManager.my.cardControl.getChooseCards())}},t.prototype.onKhaeng=function(){this.canKaeng&&this.gameScene.updateKaeng()},t.prototype.onDraw=function(){-1!=this.drawId&&(this.hide(),this.gameScene.onDrawClick(this.drawId),this.drawId=-1)},t.prototype.centerDraw=function(){this.showKhaeng(),this.showDraw(),this.khaengButton.node.x=-this.khaengButton.node.width/2-12,this.drawButton.node.x=this.khaengButton.node.x+this.khaengButton.node.width+12,this.canKaeng?this.showKhaengHand():this.showDrawHand()},t.prototype.centerBlock=function(){this.showKhaeng(),this.showDraw(),this.showBlock(),this.khaengButton.node.x=-this.khaengButton.node.width-12,this.drawButton.node.x=this.khaengButton.node.x+this.khaengButton.node.width+12,this.blockButton.node.x=this.drawButton.node.x+this.drawButton.node.width+12},t.prototype.showButtonWithEffect=function(e){e.setScale(.5),cc.tween(e).to(.5,{scale:.9},{easing:"backOut"}).start()},t.prototype.showDraw=function(){this.drawButton.node.active=!0,this.showButtonWithEffect(this.drawButton.node)},t.prototype.showDrawHand=function(){var e=this;this.scheduleOnce(function(){e.drawButton.node.getChildByName("hand").getComponent(s.default).show()},.5)},t.prototype.hideDraw=function(){this.drawButton.node.active=!1,this.drawButton.node.getChildByName("hand").getComponent(s.default).hide()},t.prototype.showKhaeng=function(){this.khaengButton.node.active=!0,this.showButtonWithEffect(this.khaengButton.node)},t.prototype.showKhaengHand=function(){var e=this;this.scheduleOnce(function(){e.khaengButton.node.getChildByName("hand").getComponent(s.default).show()},.5)},t.prototype.hideKhaeng=function(){this.khaengButton.node.active=!1,this.khaengButton.node.getChildByName("hand").getComponent(s.default).hide()},t.prototype.showBlock=function(){var e=this;this.blockButton.node.active=!0,this.showButtonWithEffect(this.blockButton.node),this.scheduleOnce(function(){e.blockButton.node.getChildByName("hand").getComponent(s.default).show()},.5)},t.prototype.hideBlock=function(){this.blockButton.node.active=!1,this.blockButton.node.getChildByName("hand").getComponent(s.default).hide()},t.prototype.showDump=function(){var e=this;this.dumpButton.node.active=!0,this.showButtonWithEffect(this.dumpButton.node),this.scheduleOnce(function(){e.dumpButton.node.getChildByName("hand").getComponent(s.default).show()},.5)},t.prototype.hideDump=function(){this.dumpButton.node.active=!1,this.dumpButton.node.getChildByName("hand").getComponent(s.default).hide()},t.prototype.hide=function(){this.hideBlock(),this.hideDraw(),this.hideKhaeng(),this.hideDump()},a([l(cc.Button)],t.prototype,"drawButton",void 0),a([l(cc.Button)],t.prototype,"khaengButton",void 0),a([l(cc.Button)],t.prototype,"blockButton",void 0),a([l(cc.Button)],t.prototype,"dumpButton",void 0),a([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../util/CardUtil":"CardUtil","./HandEffect":"HandEffect"}],TutLan:[function(e,t,o){"use strict";cc._RF.push(t,"c470dVCA2NGGJ581sjKY1CD","TutLan");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../main/CyberGame"),s=cc._decorator,c=s.ccclass,u=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){this.showStep(1)},t.prototype.showStep=function(e){var t=this,o=this.node.getChildByName("step"+e);o.active=!0,o.opacity=120,cc.tween(o).to(.7,{opacity:255}).call(function(){}).start();var n=o.getChildByName("girl");n.scale=.9,cc.tween(n).to(.3,{scale:1}).call(function(){}).start(),1==e?this.scheduleOnce(function(){t.node.getChildByName("next_button").active=!0},1.5):this.scheduleOnce(function(){t.node.getChildByName("next_button2").active=!0},1.5)},t.prototype.hideStep=function(e){this.node.getChildByName("step"+e).active=!1},t.prototype.nextStep=function(){i.cyberGame.audio.playButton(),this.node.getChildByName("next_button").active=!1,this.hideStep(1),this.showStep(2)},t.prototype.goToTutScene=function(){i.cyberGame.audio.playButton(),this.node.getChildByName("next_button2").active=!1,cc.director.loadScene("tutorial")},a([c],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../../../main/CyberGame":"CyberGame"}],TutSeatManager:[function(e,t,o){"use strict";cc._RF.push(t,"fc7e5c26lBMCoz7Rg/wtZur","TutSeatManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../entities/CardEntity"),s=e("../../entities/Player"),c=e("../player/PlayerInfo"),u=cc._decorator,l=u.ccclass,p=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.players=[],t.userList=[],t}return r(t,e),t.prototype.init=function(e){this.gameScene=e;var t=s.default.newTutInstance();t.guserid="1",t.displayName=FBInstant.player.getName(),t.avatar=FBInstant.player.getPhoto(),t.coin=5e5,t.positionIndex=0,t.playing=!0,t.isItMe=!0;for(var o=[13,29,5,9,12],n=0;n<o.length;n++){var r=i.default.getInstance(o[n]);t.addCard(r)}this.userList.push(t);var a=s.default.newTutInstance();a.guserid="2",a.displayName="Peter",a.coin=35e5,a.isItMe=!1,a.positionIndex=4,a.numCard=5,a.cards=[-1,-1,-1,-1,-1],a.playing=!0,this.userList.push(a)},t.prototype.allocate=function(){var e=this;this.userList.forEach(function(t){if(t.positionIndex>=0){var o=e.getSeatAt(t.positionIndex);o.updateData(t),o.highLight()}})},t.prototype.removeLastDumpCards=function(){for(var e=0;e<this.players.length;e++){var t=this.players[e];if(null!=t.user&&t.user.playing&&(t.cardControl.removeLastDumpCards(),t.lights.length>0)){for(var o=0;o<t.lights.length;o++)t.lights[o].destroy();t.lights.length=0}}},t.prototype.getSeatAt=function(e){return 0==e?this.players[0]:this.players[1]},t.prototype.getSeatByGuserid=function(e){for(var t=0;t<this.players.length;t++){var o=this.players[t];if(null!=o.user&&o.user.guserid==e)return o}return null},t.prototype.hideTimers=function(){this.players.forEach(function(e){null!=e.user&&e.hideTimer()})},Object.defineProperty(t.prototype,"my",{get:function(){return this.getSeatAt(0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"opp",{get:function(){return this.players[1]},enumerable:!1,configurable:!0}),a([p({type:[c.default]})],t.prototype,"players",void 0),a([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../entities/CardEntity":"CardEntity","../../entities/Player":"Player","../player/PlayerInfo":"PlayerInfo"}],TutorialPopup:[function(e,t,o){"use strict";cc._RF.push(t,"b0ab01FINhBjJIJECV3nnQ0","TutorialPopup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../component/OverlayLoader"),s=e("../CyberGame"),c=cc._decorator.ccclass,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tutLanNode=null,t.overlayLoader=null,t.clickedAtLeastOnce=!1,t}return r(t,e),t.prototype.start=function(){this.loadTutLan(),s.cyberGame.storage.get("isHomeSceneStarted")||(this.node.getChildByName("icon_close").active=!1)},t.prototype.loadTutLan=function(){var e=this;s.cyberGame.loadPrefab("prefab/TutLan",!0).then(function(t){e.tutLanNode=t,s.cyberGame.storage.get("isHomeSceneStarted")&&cc.director.preloadScene("tutorial")}).catch(function(){setTimeout(function(){e.loadTutLan()},1e3)})},t.prototype.onEnable=function(){this.node.opacity=100,cc.tween(this.node).to(.4,{opacity:255}).start(),this.scaleEffect(this.desc1),this.scaleEffect(this.desc2),this.scaleEffect(this.desc3),this.hand.scale=1,this.tweenLoseDec()},t.prototype.scaleEffect=function(e){e.scale=.7,cc.tween(e).to(.3,{scale:1}).start()},t.prototype.tweenLoseDec=function(){var e=this,t=this.hand;1==t.active&&cc.tween(t).to(1,{scale:.85}).call(function(){e.tweenLoseInc()}).start()},t.prototype.tweenLoseInc=function(){var e=this,t=this.hand;1==t.active&&cc.tween(t).to(1,{scale:1.05}).call(function(){e.tweenLoseDec()}).start()},t.prototype.closePopup=function(){s.cyberGame.audio.playButton(),this.node.destroy()},t.prototype.playTutorial=function(){var e=this;s.cyberGame.audio.playButton(),this.clickedAtLeastOnce||(this.clickedAtLeastOnce=!0,null!=this.tutLanNode?(this.tutLanNode.parent=this.node.parent,this.node.destroy()):(this.showOverlayLoader(),this.schedule(function(){null!=e.tutLanNode&&(e.tutLanNode.parent=e.node.parent,e.unscheduleAllCallbacks(),e.hideOverlayLoader(),e.node.destroy())},.1)))},t.prototype.showOverlayLoader=function(){this.overlayLoader||(this.overlayLoader=s.cyberGame.createOverlay(),this.node.addChild(this.overlayLoader))},t.prototype.hideOverlayLoader=function(){this.overlayLoader&&(this.overlayLoader.getComponent(i.default).close(),this.overlayLoader=null)},Object.defineProperty(t.prototype,"desc1",{get:function(){return this.node.getChildByName("bg").getChildByName("group1")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"desc2",{get:function(){return this.node.getChildByName("bg").getChildByName("group2")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"desc3",{get:function(){return this.node.getChildByName("bg").getChildByName("group3")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hand",{get:function(){return this.node.getChildByName("bg").getChildByName("hand")},enumerable:!1,configurable:!0}),a([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../CyberGame":"CyberGame","../component/OverlayLoader":"OverlayLoader"}],TutorialScene:[function(e,t,o){"use strict";cc._RF.push(t,"1c01f9HRpZMT6aMDIAnPf74","TutorialScene");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../main/component/PersistNode"),s=e("../../main/controllers/AdapterManager"),c=e("../../main/CyberGame"),u=e("../constants/GameInfo"),l=e("../entities/CardEntity"),p=e("../util/CardUtil"),d=e("./card/CardManagerV2"),h=e("./component/KhaengPopup"),y=e("./component/LightingLayer"),f=e("./tutorials/TutActionButtons"),m=e("./tutorials/TutSeatManager"),g=cc._decorator,b=g.ccclass,v=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.seatManager=null,t.cardManager=null,t.actionButtonLayer=null,t.lightingLayer=null,t.khaengPopup=null,t.currentTurn="1",t.lastDumpCard=-1,t.lastDumpId=null,t.khaengId=null,t.noc=[],t.endGameProcess=!1,t.homeClicked=!1,t}return r(t,e),t.prototype.onLoad=function(){s.default.inst.autoFitCanvas(this.node)},t.prototype.start=function(){var e=this;this.seatManager.init(this),this.cardManager.init(this),this.actionButtonLayer.init(this),this.lastDumpCard=-1,this.lastDumpId=null,this.currentTurn="1",this.endGameProcess=!1,this.homeClicked=!1,this.noc=[42,35,38,39,24],setTimeout(function(){e.updatePlayers(),c.cyberGame.storage.get("isHomeSceneStarted")||e.preloadResources()},200)},t.prototype.updatePlayers=function(){var e=this;this.seatManager.allocate(),this.node.once(c.cyberGame.event.GameEvent.CARD_DIVIDED,function(){e.actionButtonLayer.drawId=e.noc.splice(0,1)[0],e.updateCurrentTurn(e.currentTurn),e.seatManager.my.showMyPoint(),e.showStep(3)}),this.cardManager.divideTutCard([13,29,5,9,12])},t.prototype.showStep=function(e){var t=this.node.getChildByName("boards").getChildByName("step"+e);t.active=!0,t.opacity=120,cc.tween(t).to(.7,{opacity:255}).call(function(){}).start();var o=t.getChildByName("girl");o.scale=.9,cc.tween(o).to(.3,{scale:1}).call(function(){}).start()},t.prototype.hideStep=function(e){this.node.getChildByName("boards").getChildByName("step"+e).active=!1},t.prototype.updateCurrentTurn=function(e){this.seatManager.hideTimers();var t=this.seatManager.getSeatByGuserid(e);if(t.startTimer(u.GameInfo.TIME_COUNTDOWN_EACH_TURN),this.isMyTurn()){t.cardControl.unChoose();var o=p.default.doGetFollowCards(t.user.cards,this.lastDumpCard);-1!=this.lastDumpCard&&o.length>0?this.lastDumpId!=e?(t.cardControl.chooseCards(o,!0),this.actionButtonLayer.centerBlock(),this.showStep(5)):this.actionButtonLayer.centerDraw():(this.actionButtonLayer.centerDraw(),38==this.lastDumpCard&&this.showStep(6)),c.cyberGame.audio.playSound("myturn")}else this.actionButtonLayer.hide(),this.scheduleOnce(this.botPlay,1.2)},t.prototype.botPlay=function(){this.onDrawClick(-1)},t.prototype.onDrawClick=function(e){var t,o=this;if(42==e?this.hideStep(3):39==e&&this.hideStep(6),this.isMyTurn()){var n=l.default.getInstance(e);this.seatManager.my.user.addCard(n),t=this.seatManager.my}else this.seatManager.opp.user.cards.push(e),t=this.seatManager.opp;t.cardControl.hideOverlay(),t.cardControl.unChoose(),this.cardManager.addCard(t,e),t.user.isItMe?(t.cardControl.sortCards(),this.node.once(c.cyberGame.event.GameEvent.ADD_CARD_FINISH,function(){42==e&&o.showStep(4),o.actionButtonLayer.showDump(),t.updateMyPoint();var n=p.default.doGetBestDump(t.user.cards);n.length>0&&(t.cardControl.chooseCards(n),2==n.length&&o.showStep(7))})):this.scheduleOnce(function(){var e=o.noc.splice(0,1);o.handleDump(e)},2)},t.prototype.handleDump=function(e){this.hideStep(4),this.hideStep(7),this.lastDumpCard=e[0],this.lastDumpId=this.currentTurn;var t=this.isMyTurn()?this.seatManager.my:this.seatManager.opp;if(t.user.removeCards(e),t.cardControl.removeLastDumpCards(),t.lights.length>0){for(var o=0;o<t.lights.length;o++)t.lights[o].destroy();t.lights.length=0}t.user.isItMe?(this.actionButtonLayer.hide(),t.cardControl.unChoose(),t.cardControl.dumpCards(e),t.updateMyPoint(),t.cardControl.addOverlay(),t.cardControl.disableClick()):t.cardControl.dumpOppCards(e),c.cyberGame.audio.playSound("chiabai"),this.isMyTurn()?this.currentTurn="2":this.currentTurn="1",38==e[0]?this.actionButtonLayer.drawId=this.noc.splice(0,1)[0]:24==e[0]&&(this.actionButtonLayer.canKaeng=!0,this.showStep(8)),this.updateCurrentTurn(this.currentTurn)},t.prototype.handBlock=function(e){var t=this;this.hideStep(5);var o=this.isMyTurn()?this.seatManager.my:this.seatManager.opp;if(o.user.removeCards(e),o.cardControl.removeLastDumpCards(),c.cyberGame.audio.playSound("chiabai"),o.lights.length>0){for(var n=0;n<o.lights.length;n++)o.lights[n].destroy();o.lights.length=0}o.user.isItMe?(this.actionButtonLayer.hide(),o.cardControl.dumpCards(e),o.updateMyPoint()):o.cardControl.dumpOppCards(e),this.scheduleOnce(function(){o.showMoney(5e4,3);var e=t.seatManager.getSeatByGuserid(t.lastDumpId);e.showMoney(-5e4,3);var n=!1;if(e.lights.length>0){for(var r=0;r<e.lights.length;r++)e.lights[r].destroy();e.lights.length=0,n=!0}var a=t.lightingLayer.show(o.index,e.index,n);a&&(e.lights.push(a),c.cyberGame.audio.playLight())},.3),this.scheduleOnce(function(){t.isMyTurn()?t.currentTurn="2":t.currentTurn="1",t.updateCurrentTurn(t.currentTurn)},2)},t.prototype.updateKaeng=function(){var e=this;this.endGameProcess||(this.hideStep(8),this.endGameProcess=!0,this.actionButtonLayer.hide(),this.seatManager.hideTimers(),this.khaengPopup.show(0,function(){e.seatManager.removeLastDumpCards(),cc.game.once("ON_OPEN_CARD_FINISH",function(){e.seatManager.opp.cardControl.openOppCards([1,28,30,31,11]),e.scheduleOnce(function(){c.cyberGame.audio.playSound("opencards")},.4),e.scheduleOnce(function(){var t=e.seatManager.my;e.khaengPopup.showWin(t.index,t.cards.length,function(){e.scheduleOnce(function(){e.showMoney()},.1)}),c.cyberGame.audio.playKeangWin()},1)}),e.seatManager.my.cardControl.openCards(),e.scheduleOnce(function(){c.cyberGame.audio.playSound("opencards")},.4)}))},t.prototype.showMoney=function(){var e=this;c.cyberGame.audio.playMoneyEffect(),this.seatManager.my.showMoney(1e5),this.seatManager.opp.showMoney(-1e5),this.scheduleOnce(function(){e.showWinLoseIcon()},1)},t.prototype.showWinLoseIcon=function(){var e=this;this.seatManager.my.showWin(),this.seatManager.opp.showLose(),this.scheduleOnce(function(){e.node.getChildByName("resultPopup").active=!0},2)},t.prototype.isMyTurn=function(){return"1"==this.currentTurn},t.prototype.goToHomeScene=function(){var e=this;if(!this.homeClicked){this.homeClicked=!0,this.node.getChildByName("resultPopup").active=!1;var t=c.cyberGame.createOverlay();this.node.addChild(t),this.scheduleOnce(function(){c.cyberGame.storage.get("isHomeSceneStarted")?cc.director.loadScene("home"):(FBInstant.player.setDataAsync({tutorialPlayedV1:!0}),c.cyberGame.socket.isConnectionReady()?cc.director.loadScene("home",e.onHomeSceneLaunched):e.schedule(function(){c.cyberGame.socket.isConnectionReady()&&(e.unscheduleAllCallbacks(),cc.director.loadScene("home",e.onHomeSceneLaunched))},.1))},.2)}},t.prototype.onHomeSceneLaunched=function(){c.cyberGame.getPersistNode().getComponent(i.default).addConnectionLostEvent()},t.prototype.preloadResources=function(){var e=["InvitePopup","FriendGiftPopup","CreateFriendPopup","SpinWheel","VideoPopup","prefab/LobbyGame"],t=0;e.forEach(function(o){cc.resources.preload("prefab/"+o,cc.Prefab,function(){++t==e.length&&cc.director.preloadScene("game",function(e,t){if(CyberGlobals.gameConfig.debugLoadingProgress){var o=(e/t*100>>0)+"% Loaded";console.log("GameScene progress: "+o)}},function(){c.cyberGame.setGameAssetReady(!0),CyberGlobals.gameConfig.debugLoadingProgress&&console.log("game scene preload succes")}),CyberGlobals.gameConfig.debugLoadingProgress&&console.log(o+" prefab loaded success")})})},a([v(m.default)],t.prototype,"seatManager",void 0),a([v(d.default)],t.prototype,"cardManager",void 0),a([v(f.default)],t.prototype,"actionButtonLayer",void 0),a([v(y.default)],t.prototype,"lightingLayer",void 0),a([v(h.default)],t.prototype,"khaengPopup",void 0),a([b],t)}(cc.Component);o.default=_,cc._RF.pop()},{"../../main/CyberGame":"CyberGame","../../main/component/PersistNode":"PersistNode","../../main/controllers/AdapterManager":"AdapterManager","../constants/GameInfo":"GameInfo","../entities/CardEntity":"CardEntity","../util/CardUtil":"CardUtil","./card/CardManagerV2":"CardManagerV2","./component/KhaengPopup":"KhaengPopup","./component/LightingLayer":"LightingLayer","./tutorials/TutActionButtons":"TutActionButtons","./tutorials/TutSeatManager":"TutSeatManager"}],UpdatePositionHandler:[function(e,t,o){"use strict";cc._RF.push(t,"499c2jQ7K1KmrdHdjVD1Z+Z","UpdatePositionHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.execute=function(e){if(e.containsKey("guserid")&&e.containsKey("pos")){var t=e.getUtfString("guserid"),o=this.game.getUser(t);if(o){o.position=e.getInt("pos");for(var n=0;n<this.game.boardPositions.length;n++)if(this.game.boardPositions[n]==o.position){o.positionIndex=n;break}var r=!(!this.game.playing||!this.playerManager.has(t));this.updateUserEnterRoom(o,r)}}this.game.releaseCurrentQueue()},t.prototype.updateUserEnterRoom=function(e,t){t||(this.screen.seatManager.getSeatAt(e.positionIndex).updateData(e),this.screen.deskLayer.hideWatingPlayerText(),this.game.friendMode&&this.screen.invitePopup&&this.screen.invitePopup.updateUserEnterRoom(e))},t}(e("./AbstractHandler").default);o.default=a,cc._RF.pop()},{"./AbstractHandler":"AbstractHandler"}],UserEnterRoomHandler:[function(e,t,o){"use strict";cc._RF.push(t,"33c47nlhkxKI5/LB0im8zXz","UserEnterRoomHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.execute=function(e){this.game.addUser(e),this.game.releaseCurrentQueue()},t}(e("./AbstractHandler").default);o.default=a,cc._RF.pop()},{"./AbstractHandler":"AbstractHandler"}],UserExitRoomHandler:[function(e,t,o){"use strict";cc._RF.push(t,"4f9979IdpVGi4Q8SVNGKJQm","UserExitRoomHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.execute=function(e){try{if(this.game.inited&&e.containsKey("guserid")){var t=e.getUtfString("guserid"),o=this.game.getUser(t);o&&(this.game.removeUser(o.guserid),this.updateUserExitRoom(o.guserid))}}catch(n){console.log("UserExitRoomHandler exception",n)}this.game.releaseCurrentQueue()},t.prototype.updateUserExitRoom=function(e){var t=this.screen.seatManager.getSeatByGuserid(e);t&&(t.updateData(null),this.game.playing?t.reset():1==this.screen.seatManager.getSize()&&(this.screen.deskLayer.hideStartCountDown(),this.screen.deskLayer.showWatingPlayerText()),this.game.friendMode&&this.screen.invitePopup&&this.screen.invitePopup.updateUserExitRoom(e,this.game.userCount))},t}(e("./AbstractHandler").default);o.default=a,cc._RF.pop()},{"./AbstractHandler":"AbstractHandler"}],UserVarUpdateHandler:[function(e,t,o){"use strict";cc._RF.push(t,"9943fXHNT5PJKdVSD3dqNsq","UserVarUpdateHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.execute=function(e){var t=e.user.name,o=this.game.getUser(t);if(o&&(o.coin=e.user.getVariable("coin").value,!this.screen.gameFinished)){var n=this.screen.seatManager.getSeatByGuserid(t);n&&n.updateCoin(o.coin)}this.game.releaseCurrentQueue()},t}(e("./AbstractHandler").default);o.default=a,cc._RF.pop()},{"./AbstractHandler":"AbstractHandler"}],Utils:[function(e,t,o){"use strict";cc._RF.push(t,"ab9c79UXE1JKrkxlaQJwtAS","Utils"),Object.defineProperty(o,"__esModule",{value:!0}),o.utils=void 0,function(e){e.formatCoinWithCommas=function(e){return String(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},e.formatName=function(e,t,o){if(e.length>t){var n=e.substring(0,t);return!1===o?n:n.trim()}return e},e.shortenLargeNumber=function(e,t){for(var o,n=["K","M"],r=n.length-1;r>=0;r--)if(e<=-(o=Math.pow(1e3,r+1))||e>=o)return+(e/o).toFixed(t)+n[r];return e},e.randomInt=function(e,t){return Math.floor(Math.random()*(t-e))+e},e.timezoneOffset=function(){var e=(new Date).getTimezoneOffset(),t=e<0?"+":"-",o=(e=Math.abs(e))/60|0;return"+"==t?o:-o},e.formatTime=function(e){var t,o=Math.floor(e/864e5),n=Math.floor((e-864e5*o)/36e5),r=Math.round((e-864e5*o-36e5*n)/6e4);return 60===r&&(n++,r=0),24===n&&(o++,n=0),o>0?(t=o+" ",n>0?t+=" "+n+" ":r>0&&(t+=" "+r+" ")):n>0?(t=n,r>0&&(t+=" : "+r)):t=r+" ",t},e.formatTimeV2=function(e){var t=Math.floor(e/864e5),o=Math.floor(e%864e5/36e5),n=Math.floor(e%36e5/6e4)+"",r=Math.floor(e%6e4/1e3)+"";return 1==n.length&&(n="0"+n),1==r.length&&(r="0"+r),0==t?o>0?o+":"+n+":"+r:n+":"+r:t+"d "+o+":"+n+":"+r}}(o.utils||(o.utils={})),cc._RF.pop()},{}],Variable:[function(e,t,o){"use strict";cc._RF.push(t,"8a5e6JDSGVOt4XZXc6kXY15","Variable"),Object.defineProperty(o,"__esModule",{value:!0}),o.UserVariable=o.RoomVariable=void 0,o.RoomVariable=Object.freeze({BET:"bet",FRIEND_MODE:"friendMode"}),o.UserVariable=Object.freeze({GUSERID:"guserid",AVATAR:"avatar",COIN:"coin",DISPLAYNAME:"username",LEVEL:"level",EXP:"exp",CREDIT:"credit"}),cc._RF.pop()},{}],WhiteWinDialog:[function(e,t,o){"use strict";cc._RF.push(t,"7b5feJs6I5NRqNmOxky6fKO","WhiteWinDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../main/CyberGame"),s=e("../card/CardSize"),c=cc._decorator,u=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enSF=[],t.thSF=[],t}return r(t,e),t.prototype.show=function(e,t){this.node.active=!0,this.typeTitle.getComponent(cc.Sprite).spriteFrame=this.getSF(e-1),this.leafLeft.x=-this.typeTitle.width/2-this.leafLeft.width/2+4,this.leafRight.x=this.typeTitle.width/2+this.leafRight.width/2-4,i.cyberGame.audio.playSound("opencards");for(var o=this.node.x-this.node.width/2+90,n=0;n<t.length;n++){var r=t[n];r.setCardPositon({x:o,y:this.node.y-58,angle:0,scale:s.CardSize.WHITE_WIN_SCALE}),n<t.length-1?r.moveToWhiteWinBox():r.moveToWhiteWinBox(function(){cc.game.emit("WHITE_WIN_OPEN_CARD_FINISH")}),o+=s.CardSize.WHITE_WIN_WIDTH+10}},t.prototype.showForCurrentUser=function(e,t){this.node.active=!0,this.typeTitle.getComponent(cc.Sprite).spriteFrame=this.getSF(e-1),this.leafLeft.x=-this.typeTitle.width/2-this.leafLeft.width/2+4,this.leafRight.x=this.typeTitle.width/2+this.leafRight.width/2-4,i.cyberGame.audio.playSound("opencards");for(var o=t.cards,n=this.node.x-this.node.width/2+67,r=0;r<o.length;r++){var a=o[r];a.hideOverlay(),a.setCardPositon({x:n,y:this.node.y-72,angle:0,scale:.5}),r<o.length-1?a.moveToWhiteWinBoxV2():a.moveToWhiteWinBoxV2(function(){cc.game.emit("WHITE_WIN_OPEN_CARD_FINISH")}),n+=.5*s.CardSize.CARD_WIDTH+10}},t.prototype.getSF=function(e){return"th"==i.cyberGame.lang.code?this.thSF[e]:this.enSF[e]},t.prototype.hide=function(){this.node.active=!1},Object.defineProperty(t.prototype,"typeTitle",{get:function(){return this.node.getChildByName("type_title")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leafLeft",{get:function(){return this.node.getChildByName("leaf_l")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leafRight",{get:function(){return this.node.getChildByName("leaf_r")},enumerable:!1,configurable:!0}),a([l({type:[cc.SpriteFrame]})],t.prototype,"enSF",void 0),a([l({type:[cc.SpriteFrame]})],t.prototype,"thSF",void 0),a([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../main/CyberGame":"CyberGame","../card/CardSize":"CardSize"}],WhiteWinType:[function(e,t,o){"use strict";cc._RF.push(t,"50d1cfCFmJLy5HKDjDD5FVn","WhiteWinType"),Object.defineProperty(o,"__esModule",{value:!0}),o.WhiteWinType=void 0,function(e){e[e.XAM_CO=1]="XAM_CO",e[e.SANH=2]="SANH",e[e.THUNG=3]="THUNG",e[e.CU_LU=4]="CU_LU",e[e.TU_QUY=5]="TU_QUY",e[e.THUNG_PHA_SANH=6]="THUNG_PHA_SANH"}(o.WhiteWinType||(o.WhiteWinType={})),cc._RF.pop()},{}],WinType:[function(e,t,o){"use strict";cc._RF.push(t,"5ef01ff3/tEzqJ79HQ8dwVj","WinType"),Object.defineProperty(o,"__esModule",{value:!0}),o.WinType=void 0,function(e){e[e.NORMAL=0]="NORMAL",e[e.KAENG=1]="KAENG",e[e.KNOCK=2]="KNOCK",e[e.BIG_WIN=3]="BIG_WIN",e[e.WHITE_WIN=4]="WHITE_WIN"}(o.WinType||(o.WinType={})),cc._RF.pop()},{}],en_US:[function(e,t,o){"use strict";cc._RF.push(t,"6ecb22zuFND/J9s/vptFxpz","en_US"),Object.defineProperty(o,"__esModule",{value:!0});o.default=function(){this.PAYMENT_SUCCESS="Congratulations! Your account have been deposited %s chip. Thank you and enjoy playing games!",this.WATCH_VIDEO_SUCCESS="Congratulations! You just earned %s chip",this.INV_POPUP_DESC="You will be earned 1M chip for\neach new player who accepts the invitation",this.YOU_GOT_CHIP="Congratulations! You just earned %s chip",this.MUSIC="Music",this.SOUND="Sound",this.GIFT_CODE="Gift Code",this.LANGUAGE="Language",this.ON="on",this.OFF="off",this.ADS_LEFT="Ads left",this.ADS_NOT_AVAILABLE="Ads are not available this moment. Try again later!",this.DAILY_ADS_REACHED="Daily ads limit reached. Come back later for more!",this.BET="Bet:",this.BET2="Bet: ",this.ENTER_ROOM_CODE="Enter room code",this.LOADING_LOBBY_DATA="Loading data...",this.YOU_NEED_AT_LEAST="You need at least %s chip to play game",this.TUT_STEP_1="The player has the least points in your hand will be the\n<color=#f18215>WINNER</c>\nCards:  1, 2, 3, 4, 5, 6, 7, 8, 9, 10 are valued according to the\ncard numbers.\nCards J, Q K are worth 10 points",this.TUT_STEP_2="If the first 5 cards are a special combination, we win\nimmediately. Special combination as shown in the picture:\n<color=#bd5d07>Flush straight > Four of a kinds > Full house > Flush\n                                                  >Straight  > Three of a kinds</color>",this.TUT_STEP_3='We have 31 points! This is a high score, we should\nget one more card.\nPlease click button "Draw".',this.TUT_STEP_4='We get card 4. K seems highest rank "10 points".\nWe should discard K by click "Discard" button',this.TUT_STEP_5='Oh great! We also have 10. Click "Follow" button now\nto get 50K Coins from your opponent',this.TUT_STEP_6="Now we have 4 cards left, totaling 15 points.\nThe point value is still high. You should continue to Draw",this.TUT_STEP_7='Do you see the pair 4 ? we can discards them!\nPlease,  Click "Discard" button',this.TUT_STEP_8='We have a total point of 8. That\'s a low score.I think we\ncan win. Click "Kaeng" to show cards and compare point',this.TUT_STEP_9="So we have learned how to play. Let's play with other\nplayers now! Good luck",this.SEND_YOU_100K="<color=#618cc0>sent you</c> <color=#fc8c07>100K</color> <color=#618cc0>chip</c>",this.MY_FRIENDS="My Friends",this.GIFT="Gift",this.NO_GIFT_TODAY="No gifts from your friends today.\nLet's be proactive  send gift  and invite friends",this.ROOM_NUMBER="Room number: ",this.CONNECTION_LOST="You have lost connection to server.\nPlease check your internet connection,\ntrying to reconnect...",this.WAIT_TO_EXIT="Register to leave the room successfully",this.WAIT_TO_EXIT_CANCEL="Cancel registration to leave room",this.CHAT_GLOBAL="Global",this.WRITE_A_MESSAGE="Write a message",this.CAN_NOT_CHANGE_TABLE="Can not change table while play game!",this.ROOM_WAS_NOT_FOUND="Room was not found",this.ROOM_FULL="Room is full!",this.UNLIMITED="Unlimited"},cc._RF.pop()},{}],th_TH:[function(e,t,o){"use strict";cc._RF.push(t,"60911MDPa9F2bbzMETAsqD6","th_TH"),Object.defineProperty(o,"__esModule",{value:!0});o.default=function(){this.PAYMENT_SUCCESS="Congratulations! Your account have been deposited %s chip. Thank you and enjoy playing games!",this.WATCH_VIDEO_SUCCESS="\u0e22\u0e34\u0e19\u0e14\u0e35\u0e14\u0e49\u0e27\u0e22! \u0e04\u0e38\u0e13\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a %s \u0e0a\u0e34\u0e1b",this.INV_POPUP_DESC="\u0e40\u0e0a\u0e34\u0e0d\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e19\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13\u0e40\u0e02\u0e49\u0e32\u0e23\u0e48\u0e27\u0e21 \u0e1b\u0e32\u0e07\u0e01\u0e31\u0e07 \u0e41\u0e25\u0e30\n\u0e23\u0e31\u0e1a 1,000,000 \u0e40\u0e2b\u0e23\u0e35\u0e22\u0e0d\u0e2a\u0e33\u0e2b\u0e23\u0e31\u0e1a\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e19\u0e41\u0e15\u0e48\u0e25\u0e30\u0e04\u0e19\u0e17\u0e35\u0e48\u0e40\u0e02\u0e49\u0e32\u0e23\u0e48\u0e27\u0e21",this.YOU_GOT_CHIP="\u0e22\u0e34\u0e19\u0e14\u0e35\u0e14\u0e49\u0e27\u0e22! \u0e04\u0e38\u0e13\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a %s \u0e0a\u0e34\u0e1b",this.MUSIC="\u0e14\u0e19\u0e15\u0e23\u0e35",this.SOUND="\u0e40\u0e2a\u0e35\u0e22\u0e07",this.GIFT_CODE="\u0e23\u0e2b\u0e31\u0e2a\u0e02\u0e2d\u0e07\u0e02\u0e27\u0e31\u0e0d",this.LANGUAGE="\u0e20\u0e32\u0e29\u0e32",this.ON="\u0e1a\u0e19",this.OFF="\u0e1b\u0e34\u0e14",this.ADS_LEFT="\u0e08\u0e33\u0e19\u0e27\u0e19",this.ADS_NOT_AVAILABLE="\u0e42\u0e06\u0e29\u0e13\u0e32\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13\u0e22\u0e31\u0e07\u0e44\u0e21\u0e48\u0e1e\u0e23\u0e49\u0e2d\u0e21",this.DAILY_ADS_REACHED="\u0e16\u0e36\u0e07\u0e02\u0e35\u0e14\u0e08\u0e33\u0e01\u0e31\u0e14\u0e42\u0e06\u0e29\u0e13\u0e32\u0e23\u0e32\u0e22\u0e27\u0e31\u0e19\u0e41\u0e25\u0e49\u0e27 \u0e01\u0e25\u0e31\u0e1a\u0e21\u0e32\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07\u0e43\u0e19\u0e20\u0e32\u0e22\u0e2b\u0e25\u0e31\u0e07!",this.BET="\u0e40\u0e14\u0e34\u0e21\u0e1e\u0e31\u0e19",this.BET2="\u0e40\u0e14\u0e34\u0e21\u0e1e\u0e31\u0e19: ",this.ENTER_ROOM_CODE="\u0e1b\u0e49\u0e2d\u0e19\u0e23\u0e2b\u0e31\u0e2a\u0e2b\u0e49\u0e2d\u0e07",this.LOADING_LOBBY_DATA="\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25...",this.YOU_NEED_AT_LEAST="\u0e04\u0e38\u0e13\u0e15\u0e49\u0e2d\u0e07\u0e21\u0e35\u0e0a\u0e34\u0e1b\u0e2d\u0e22\u0e48\u0e32\u0e07\u0e19\u0e49\u0e2d\u0e22 %s \u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e40\u0e25\u0e48\u0e19\u0e40\u0e01\u0e21",this.TUT_STEP_1="+ \u0e2b\u0e25\u0e31\u0e07\u0e41\u0e04\u0e07\u0e41\u0e25\u0e49\u0e27 \u0e17\u0e48\u0e32\u0e19\u0e17\u0e35\u0e48\u0e21\u0e35\u0e04\u0e48\u0e32\u0e41\u0e15\u0e49\u0e21\u0e19\u0e49\u0e2d\u0e22\u0e17\u0e35\u0e48\u0e2a\u0e38\u0e14\u0e43\u0e19\u0e27\u0e07 \u0e44\u0e1e\u0e48\u0e08\u0e30\u0e40\u0e1b\u0e47\u0e19\u0e1c\u0e39\u0e49\u0e0a\u0e19\u0e30\u0e04\u0e48\u0e30\n+ \u0e44\u0e1f 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 \u0e21\u0e35\u0e04\u0e48\u0e32\u0e41\u0e15\u0e49\u0e21\u0e15\u0e32\u0e21\u0e15\u0e31\u0e27\u0e40\u0e25\u0e02\u0e44\u0e1e\u0e48 \u0e14\n+ \u0e44\u0e1e\u0e48 J, Q. K \u0e21\u0e35\u0e04\u0e48\u0e32 10 \u0e41\u0e15\u0e49\u0e21 \u0e15\u0e32\u0e21\u0e23\u0e39\u0e1b",this.TUT_STEP_2="\u0e2b\u0e32\u0e01\u0e44\u0e1e\u0e48 5 \u0e43\u0e1a\u0e41\u0e23\u0e01\u0e40\u0e1b\u0e47\u0e19\u0e44\u0e1e\u0e48\u0e1e\u0e34\u0e40\u0e28\u0e29 \u0e08\u0e30\u0e0a\u0e19\u0e30 \u0e17\u0e31\u0e19\u0e17\u0e35\u0e04\u0e48\u0e30\n\u0e44\u0e1e\u0e48\u0e1e\u0e34\u0e40\u0e28\u0e29\u0e15\u0e32\u0e21\u0e23\u0e39\u0e1b\u0e04\u0e48\u0e30\n<color=#bd5d07>\u0e44\u0e1f\u0e2a\u0e40\u0e15\u0e23\u0e17\u0e1f\u0e25\u0e31\u0e0a > \u0e44\u0e1f\u0e42\u0e1f\u0e23\u0e4c\u0e01\u0e32\u0e23\u0e4c\u0e14 > \u0e44\u0e1f\u0e1f\u0e39\u0e25\u0e40\u0e2e\u0e32\u0e2a\u0e4c > \u0e44\u0e1f\u0e2a\u0e35\n                                                                > \u0e44\u0e1f\u0e40\u0e23\u0e35\u0e22\u0e07 > \u0e44\u0e1e\u0e48\u0e15\u0e2d\u0e07</color>",this.TUT_STEP_3="\u0e15\u0e2d\u0e19\u0e41\u0e23\u0e01\u0e41\u0e08\u0e01\u0e44\u0e1e\u0e48\u0e04\u0e19\u0e25\u0e30 5 \u0e43\u0e1a \u0e04\u0e48\u0e32\u0e41\u0e15\u0e49\u0e21  \u0e02\u0e2d\u0e07\u0e17\u0e48\u0e32\u0e19\u0e40\u0e1b\u0e47\u0e19\n31 \u0e41\u0e15\u0e49\u0e21 \u0e44\u0e21\u0e48\u0e04\u0e27\u0e23\u0e41\u0e04\u0e07\u0e43\u0e19\u0e15\u0e2d\u0e19 \u0e19\u0e35\u0e49 \u0e08\u0e31\u0e48\u0e27 \u0e14\u0e35\u0e01\u0e27\u0e48\u0e32",this.TUT_STEP_4="\u0e17\u0e48\u0e32\u0e19\u0e0a\u0e31\u0e48\u0e27\u0e44\u0e14\u0e49\u0e44\u0e1e\u0e48 4 \u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e25\u0e14\u0e04\u0e48\u0e32\u0e41\u0e15\u0e49\u0e21\u0e19\u0e49\u0e2d\u0e22\u0e25\u0e07 \u0e23\u0e30\u0e1a\u0e1a\u0e08\u0e30\u0e40\u0e25\u0e37\u0e2d\u0e01\n\u0e44\u0e1e\u0e48\u0e17\u0e35\u0e48\u0e21\u0e35\u0e41\u0e15\u0e49\u0e21\u0e2a\u0e39\u0e07\u0e2a\u0e38\u0e14 K \u0e43\u0e2b\u0e49\u0e42\u0e14\u0e22\u0e2d\u0e31\u0e15\u0e42\u0e19\u0e21\u0e31\u0e15\u0e34\u0e04\u0e48\u0e30 \u0e01\u0e14 \u0e17\u0e34\u0e49\u0e07 \u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e17\u0e34\u0e49\u0e07\u0e44\u0e1f K",this.TUT_STEP_5="\u0e1c\u0e39\u0e49\u0e40\u0e25\u0e48\u0e19\u0e02\u0e49\u0e32\u0e07\u0e1a\u0e19\u0e17\u0e34\u0e49\u0e07\u0e44\u0e1f 10 \u0e1e\u0e2d\u0e14\u0e35\u0e17\u0e48\u0e32\u0e19\u0e21\u0e35\u0e44\u0e1f 10 \u0e14\u0e49\u0e27\u0e22.\n\u0e17\u0e48\u0e32\u0e19\u0e44\u0e21\u0e48\u0e08\u0e4d\u0e32\u0e40\u0e1b\u0e47\u0e19\u0e15\u0e49\u0e2d\u0e07\u0e08\u0e49\u0e27\u0e04\u0e48\u0e30\u0e41\u0e25\u0e30\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e44\u0e2b\u0e25\u0e44\u0e14\u0e49\u0e04\u0e48\u0e30 \u0e41\u0e25\u0e30\u0e17\u0e48\u0e32\u0e19\u0e08\n\u0e30\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e0a\u0e34\u0e1b\u0e44\u0e2b\u0e25\u0e14\u0e49\u0e27\u0e22\u0e04\u0e48\u0e30",this.TUT_STEP_6="\u0e15\u0e2d\u0e19\u0e19\u0e35\u0e49\u0e17\u0e48\u0e32\u0e19\u0e40\u0e2b\u0e25\u0e37\u0e2d\u0e44\u0e1e\u0e48 4 \u0e43\u0e1a \u0e04\u0e48\u0e32\u0e23\u0e27\u0e21\u0e40\u0e1b\u0e47\u0e19 15 \u0e41\u0e15\u0e49\u0e21\n\u0e04\u0e48\u0e32\u0e41\u0e15\u0e49\u0e21\u0e22\u0e31\u0e07\u0e2a\u0e39\u0e07\u0e2d\u0e22\u0e39\u0e48\u0e04\u0e48\u0e30 \u0e04\u0e27\u0e23 \u0e08\u0e48\u0e27 \u0e44\u0e1f\u0e15\u0e48\u0e2d\u0e04\u0e48\u0e30",this.TUT_STEP_7="\u0e0a\u0e31\u0e48\u0e27\u0e44\u0e14\u0e49\u0e44\u0e1e\u0e48 2 \u0e17\u0e48\u0e32\u0e19\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e17\u0e34\u0e07\u0e04\u0e39\u0e48 4 \u0e44\u0e14\u0e49\u0e04\u0e48\u0e30 (\u0e16\u0e49\u0e32\u0e21\u0e35\u0e44\u0e1e\u0e48\u0e15\u0e31\u0e27\u0e40\u0e25\u0e02\u0e40\u0e2b\u0e21\u0e37\u0e2d\n\u0e19\u0e01\u0e31\u0e19 \u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e17\u0e34\u0e07 \u0e2d\u0e2d\u0e01\u0e17\u0e35\u0e48\u0e40\u0e14\u0e35\u0e22\u0e27\u0e01\u0e31\u0e19\u0e44\u0e14\u0e49\u0e04\u0e48\u0e30)",this.TUT_STEP_8='\u0e40\u0e23\u0e32\u0e21\u0e35\u0e04\u0e30\u0e41\u0e19\u0e19\u0e23\u0e27\u0e21 8 \u0e41\u0e15\u0e49\u0e21 \u0e19\u0e31\u0e48\u0e19\u0e40\u0e1b\u0e47\u0e19\u0e04\u0e30\u0e41\u0e19\u0e19\u0e17\u0e35\u0e48\u0e15\u0e48\u0e33. \u0e09\u0e31\u0e19\u0e04\u0e34\u0e14\u0e27\u0e48\u0e32\u0e40\u0e23\u0e32\u0e2a\u0e32\n\u0e21\u0e32\u0e23\u0e16\u0e0a\u0e19\u0e30\u0e44\u0e14\u0e49 \u0e04\u0e25\u0e34\u0e01 "\u0e41\u0e04\u0e07" \u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e41\u0e2a\u0e14\u0e07\u0e44\u0e1e\u0e48\u0e41\u0e25\u0e30\u0e40\u0e1b\u0e23\u0e35\u0e22\u0e1a\u0e40\u0e17\u0e35\u0e22\u0e1a\u0e04\u0e30\u0e41\u0e19\u0e19',this.TUT_STEP_9="\u0e02\u0e2d\u0e22\u0e34\u0e19\u0e14\u0e35\u0e17\u0e35\u0e48\u0e40\u0e23\u0e35\u0e22\u0e19\u0e2b\u0e25\u0e31\u0e01\u0e2a\u0e39\u0e15\u0e23\u0e21\u0e37\u0e2d\u0e43\u0e2b\u0e21\u0e48\u0e44\u0e1e\u0e48\u0e41\u0e04\u0e07\u0e08\u0e1a\u0e40\u0e23\u0e35\u0e22\u0e1a\u0e23\u0e49\u0e2d\u0e22\u0e04\u0e48\u0e30\n\u0e44\u0e1b\u0e40\u0e25\u0e48\u0e19\u0e01\u0e31\u0e1a\u0e1c\u0e39\u0e49\u0e40\u0e25\u0e48\u0e19\u0e17\u0e48\u0e32\u0e19\u0e2d\u0e37\u0e48\u0e19\u0e40\u0e14\u0e35\u0e22\u0e27\u0e19\u0e35\u0e49\u0e44\u0e14\u0e49 \u0e40\u0e25\u0e22 ! \u0e02\u0e2d\u0e43\u0e2b\u0e49\u0e42\u0e0a\u0e04\u0e14\u0e35\u0e04\u0e48\u0e30",this.SEND_YOU_100K="<color=#618cc0>\u0e2a\u0e48\u0e07\u0e0a\u0e34\u0e1b 100k \u0e43\u0e2b\u0e49\u0e04\u0e38\u0e13</c>",this.MY_FRIENDS="\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e19\u0e02\u0e2d\u0e07\u0e09\u0e31\u0e19",this.GIFT="\u0e02\u0e2d\u0e07\u0e02\u0e27\u0e31\u0e0d",this.NO_GIFT_TODAY="\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49\u0e44\u0e21\u0e48\u0e21\u0e35\u0e02\u0e2d\u0e07\u0e02\u0e27\u0e31\u0e0d\u0e08\u0e32\u0e01\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e19\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13",this.ROOM_NUMBER="\u0e2b\u0e21\u0e32\u0e22\u0e40\u0e25\u0e02\u0e2b\u0e49\u0e2d\u0e07: ",this.CONNECTION_LOST="\u0e04\u0e38\u0e13\u0e02\u0e32\u0e14\u0e01\u0e32\u0e23\u0e40\u0e0a\u0e37\u0e48\u0e2d\u0e21\u0e15\u0e48\u0e2d\u0e01\u0e31\u0e1a\u0e40\u0e0b\u0e34\u0e23\u0e4c\u0e1f\u0e40\u0e27\u0e2d\u0e23\u0e4c\n\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e0a\u0e37\u0e48\u0e2d\u0e21\u0e15\u0e48\u0e2d\u0e43\u0e2b\u0e21\u0e48",this.WAIT_TO_EXIT="\u0e25\u0e07\u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e2b\u0e49\u0e2d\u0e07\u0e40\u0e23\u0e35\u0e22\u0e1a\u0e23\u0e49\u0e2d\u0e22",this.WAIT_TO_EXIT_CANCEL="\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01\u0e01\u0e32\u0e23\u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e42\u0e15\u0e30",this.CHAT_GLOBAL="\u0e17\u0e31\u0e48\u0e27\u0e42\u0e25\u0e01",this.WRITE_A_MESSAGE="\u0e40\u0e02\u0e35\u0e22\u0e19\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21",this.CAN_NOT_CHANGE_TABLE="\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e42\u0e15\u0e4a\u0e30\u0e02\u0e13\u0e30\u0e40\u0e25\u0e48\u0e19\u0e40\u0e01\u0e21\u0e44\u0e14\u0e49",this.ROOM_WAS_NOT_FOUND="\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e2b\u0e49\u0e2d\u0e07",this.ROOM_FULL="\u0e2b\u0e49\u0e2d\u0e07\u0e40\u0e15\u0e47\u0e21",this.UNLIMITED="\u0e44\u0e21\u0e48 \u0e08\u0e33\u0e01\u0e31\u0e14"},cc._RF.pop()},{}]},{},["Game","PlayManager","SocketControl","CompareType","GameConfig","GameInfo","GameRequest","GameState","Variable","WhiteWinType","WinType","CardEntity","Player","ResultData","AbstractHandler","AutoStartTimerHandler","DealCardHandler","DrawCardHandler","DumpCardHandler","FollowCardHandler","GameOverHandler","GetPlayingInfo","InitGameHandler","KhaengHandler","QuitGameHandler","ReadyHandler","UpdatePositionHandler","UserEnterRoomHandler","UserExitRoomHandler","UserVarUpdateHandler","CardUtil","Queue","RequestParameter","GameScene","TutorialScene","Card","CardControl","CardManagerV2","CardSize","InGameChat","ActionButtons","DeskLayer","DeskNumText","FollowText","InviteButton","KhaengPopup","LightingCtrl","LightingLayer","MoneyEntry","Notification","PlayerInfoPopup","PointText","PreloadNode","ProgressBar","ResultPopup","TextManager","WhiteWinDialog","GiftManager","GameRule","Menu","Avatar","OppResultEntry","PlayerInfo","PositionHelper","SeatManager","SetPositionHelper","GameInvitePopup","StartCountDown","HandEffect","TutActionButtons","TutLan","TutSeatManager","GameLanuage","en_US","th_TH","CyberGame","ChatButton","ChatContent","LobbyChat","AvatarBox","AvatarRow","FriendGiftRow","LoadSpine","LobbyTabs","LocalizedNode","LocalizedRichText","LocalizedTxt","OptimizeScrollView","OverlayLoader","PersistNode","RoomItem","ShopItem","CyberEvent","Ad","AdapterManager","Audio","Chat","Connector","IAPManager","InterstitialManager","LobbyController","PromotionEntry","AdsPopup","ChatPopup","FriendGiftPopup","IAPPopup","InvitePopup","LeaderboardPopup","LobbyCreateGamePopup","OptInPopup","PlayFriendPopup","Popup","RedeemPopup","SettingPopup","SpinPopup","TutorialPopup","ConnectingScene","HomeSceneDecorator","HomeScreen","LobbyScreen","SplashDevScreen","SplashScreen","Storage","Utils"]);